"use strict";(self.webpackChunkcardgamemaker=self.webpackChunkcardgamemaker||[]).push([[397],{8397:(e,t,i)=>{var n=i(8507),s=i(5815),o=i(4458),r=i(7309);class a{constructor(e){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;const e=this._canvas.getBoundingClientRect(),t=this._canvas.width,i=this._canvas.height,n=e.width/t*this._renderer.resolution,s=e.height/i*this._renderer.resolution,o=`translate(${e.left}px, ${e.top}px) scale(${n}, ${s})`;o!==this._lastTransform&&(this._domElement.style.transform=o,this._lastTransform=o)},this._domElement=e.domElement,this._renderer=e.renderer,globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas||(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver((e=>{for(const t of e){if(t.target!==this._canvas)continue;const e=this.canvas.width,i=this.canvas.height,n=t.contentRect.width/e*this._renderer.resolution,s=t.contentRect.height/i*this._renderer.resolution;(this._lastScaleX!==n||this._lastScaleY!==s)&&(this.updateTranslation(),this._lastScaleX=n,this._lastScaleY=s)}})),this._observer.observe(this._canvas)):this._tickerAttached||r.R.shared.add(this.updateTranslation,this,o.d.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&r.R.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}var h=i(5101);class l{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=l.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new h.b,this.page=new h.b,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var c=/iPhone/i,d=/iPod/i,p=/iPad/i,u=/\biOS-universal(?:.+)Mac\b/i,v=/\bAndroid(?:.+)Mobile\b/i,m=/Android/i,g=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_=/Silk/i,y=/Windows Phone/i,b=/\bWindows(?:.+)ARM\b/i,E=/BlackBerry/i,f=/BB10/i,T=/Opera Mini/i,P=/\b(CriOS|Chrome)(?:.+)Mobile/i,w=/Mobile(?:.+)Firefox\b/i,M=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function A(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=t.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var s=function(e){return function(t){return t.test(e)}}(i),o={apple:{phone:s(c)&&!s(y),ipod:s(d),tablet:!s(c)&&(s(p)||M(t))&&!s(y),universal:s(u),device:(s(c)||s(d)||s(p)||s(u)||M(t))&&!s(y)},amazon:{phone:s(g),tablet:!s(g)&&s(_),device:s(g)||s(_)},android:{phone:!s(y)&&s(g)||!s(y)&&s(v),tablet:!s(y)&&!s(g)&&!s(v)&&(s(_)||s(m)),device:!s(y)&&(s(g)||s(_)||s(v)||s(m))||s(/\bokhttp\b/i)},windows:{phone:s(y),tablet:s(b),device:s(y)||s(b)},other:{blackberry:s(E),blackberry10:s(f),opera:s(T),firefox:s(w),chrome:s(P),device:s(E)||s(f)||s(T)||s(w)||s(P)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const O=(A.default??A)(globalThis.navigator);var D=i(9903);const I=class e{constructor(e,t=O){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top="0px",this._div.style.left="0px",this._div.style.pointerEvents="none",this._div.style.zIndex=2..toString(),this._canvasObserver=new a({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{const t=new MutationObserver((()=>{e.parentNode&&(t.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())}));t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(this._isActive&&!this._isMobileAccessibility){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const t=e.children;if(t)for(let e=0;e<t.length;e++)this._updateAccessibleObjects(t[e])}init(t){const i={accessibilityOptions:{...e.defaultOptions,...t?.accessibilityOptions||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount)return;if(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas)return;const t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const e of this._children)e._renderId===this._renderId&&t.add(this._children.indexOf(e))}for(let e=this._children.length-1;e>=0;e--){const i=this._children[e];t.has(e)||(i._accessibleDiv&&i._accessibleDiv.parentNode&&(i._accessibleDiv.parentNode.removeChild(i._accessibleDiv),this._pool.push(i._accessibleDiv),i._accessibleDiv=null),i._accessibleActive=!1,(0,D.d)(this._children,e,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let e=0;e<this._children.length;e++){const t=this._children[e];if(!t._accessibleActive||!t._accessibleDiv)continue;const i=t._accessibleDiv,n=t.hitArea||t.getBounds().rectangle;if(t.hitArea){const e=t.worldTransform;i.style.left=`${e.tx+n.x*e.a}px`,i.style.top=`${e.ty+n.y*e.d}px`,i.style.width=n.width*e.a+"px",i.style.height=n.height*e.d+"px"}else this._capHitArea(n),i.style.left=`${n.x}px`,i.style.top=`${n.y}px`,i.style.width=`${n.width}px`,i.style.height=`${n.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let t=this._pool.pop();t||("button"===e.accessibleType?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText="\n                        color: transparent;\n                        pointer-events: none;\n                        padding: 0;\n                        margin: 0;\n                        border: 0;\n                        outline: 0;\n                        background: transparent;\n                        box-sizing: border-box;\n                        user-select: none;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                    ",e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title=`container ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,t){const{container:i}=e.target,n=this._renderer.events.rootBoundary,s=Object.assign(new l(n),{target:i});n.rootTarget=this._renderer.lastObjectRendered,t.forEach((e=>n.dispatchEvent(s,e)))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this._activateOnTab&&this._activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};I.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"accessibility"},I.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let k=I;n.XO.add(k),n.XO.mixin(s.mc,{accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1}),i(4732);var x=i(8875),L=i(268);const B=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){!this._tickerAdded&&this.domElement&&(r.R.system.add(this._tickerUpdate,this,o.d.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(r.R.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this._update())}};class S extends l{constructor(){super(...arguments),this.client=new h.b,this.movement=new h.b,this.offset=new h.b,this.global=new h.b,this.screen=new h.b}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,n,s,o,r,a,h,l,c,d,p,u,v){throw new Error("Method not implemented.")}}class C extends S{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class R extends S{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}R.DOM_DELTA_PIXEL=0,R.DOM_DELTA_LINE=1,R.DOM_DELTA_PAGE=2;const U=new h.b,X=new h.b;class F{constructor(e){this.dispatch=new x.A,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort(((e,t)=>e.priority-t.priority))}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,n=t.length;i<n;i++)t[i].fn(e);else(0,L.R)(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){B.pauseUpdate=!0;const i=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,U.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(0===i.length)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(t)?t:[t];for(let t=i.length-1;t>=0;t--)n.forEach((n=>{e.currentTarget=i[t],this.notifyTarget(e,n)}))}propagationPath(e){const t=[e];for(let i=0;i<2048&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,n,s,o=!1){let r=!1;if(this._interactivePrune(e))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(B.pauseUpdate=!1),e.interactiveChildren&&e.children){const a=e.children;for(let h=a.length-1;h>=0;h--){const l=a[h],c=this.hitTestMoveRecursive(l,this._isInteractive(t)?t:l.eventMode,i,n,s,o||s(e,i));if(c){if(c.length>0&&!c[c.length-1].parent)continue;const t=e.isInteractive();(c.length>0||t)&&(t&&this._allInteractiveElements.push(e),c.push(e)),0===this._hitElements.length&&(this._hitElements=c),r=!0}}}const a=this._isInteractive(t),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:r?this._hitElements:a&&!s(e,i)&&n(e,i)?h?[e]:[]:null}hitTestRecursive(e,t,i,n,s){if(this._interactivePrune(e)||s(e,i))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(B.pauseUpdate=!1),e.interactiveChildren&&e.children){const o=e.children,r=i;for(let i=o.length-1;i>=0;i--){const a=o[i],h=this.hitTestRecursive(a,this._isInteractive(t)?t:a.eventMode,r,n,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const t=e.isInteractive();return(h.length>0||t)&&h.push(e),h}}}const o=this._isInteractive(t),r=e.isInteractive();return o&&n(e,i)?r?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&e.visible&&e.renderable&&e.measurable)||"none"===e.eventMode||"passive"===e.eventMode&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,X),!e.hitArea.contains(X.x,X.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){const n=e.effects[i];if(n.containsPoint&&!n.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return!!e.hitArea||!!e?.containsPoint&&(e.worldTransform.applyInverse(t,X),e.containsPoint(X))}notifyTarget(e,t){if(!e.currentTarget.isInteractive())return;t??(t=e.type);const i=`on${t}`;e.currentTarget[i]?.(e);const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i="mouse"===t.pointerType||"pen"===t.pointerType,n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&s!==t.target){const n="mousemove"===e.type?"mouseout":"pointerout",o=this.createPointerEvent(e,n,s);if(this.dispatchEvent(o,"pointerout"),i&&this.dispatchEvent(o,"mouseout"),!t.composedPath().includes(s)){const n=this.createPointerEvent(e,"pointerleave",s);for(n.eventPhase=n.AT_TARGET;n.target&&!t.composedPath().includes(n.target);)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(o)}if(s!==t.target){const n="mousemove"===e.type?"mouseover":"pointerover",o=this.clonePointerEvent(t,n);this.dispatchEvent(o,"pointerover"),i&&this.dispatchEvent(o,"mouseover");let r=s?.parent;for(;r&&r!==this.rootTarget.parent&&r!==t.target;)r=r.parent;if(!r||r===this.rootTarget.parent){const e=this.clonePointerEvent(t,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==s&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),i&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(o)}const o=[],r=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),r&&o.push("globalpointermove"),"touch"===t.pointerType&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),r&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),r&&o.push("globalmousemove"),this.cursor=t.target?.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),n="mouse"===i.pointerType||"pen"===i.pointerType;this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(this.cursor=i.target?.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const i="mouse"===e.pointerType||"pen"===e.pointerType,n=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),"touch"===i.pointerType)this.dispatchEvent(i,"touchend");else if("mouse"===i.pointerType||"pen"===i.pointerType){const e=2===i.button;this.dispatchEvent(i,e?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let t=s;for(;t&&!i.composedPath().includes(t);){if(i.currentTarget=t,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType)this.notifyTarget(i,"touchendoutside");else if("mouse"===i.pointerType||"pen"===i.pointerType){const e=2===i.button;this.notifyTarget(i,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete n.pressTargetsByButton[e.button],o=t}if(o){const s=this.clonePointerEvent(i,"click");s.target=o,s.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:s.target,timeStamp:t});const r=n.clicksByButton[e.button];if(r.target===s.target&&t-r.timeStamp<200?++r.clickCount:r.clickCount=1,r.target=s.target,r.timeStamp=t,s.detail=r.clickCount,"mouse"===s.pointerType){const e=2===s.button;this.dispatchEvent(s,e?"rightclick":"click")}else"touch"===s.pointerType&&this.dispatchEvent(s,"tap");this.dispatchEvent(s,"pointertap"),this.freeEvent(s)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof R))return void(0,L.R)("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const n=this.allocateEvent(C);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],"string"==typeof t&&(n.type=t),n}createWheelEvent(e){const t=this.allocateEvent(R);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(C);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof C&&t instanceof C&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof S&&t instanceof S&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){const i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let n=0,s=i.length;n<s&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeListener(t,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}const Y={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},N=class e{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new F(null),B.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new C(null),this._rootWheelEvent=new R(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...e.defaultEventFeatures},{set:(e,t,i)=>("globalMove"===t&&(this.rootBoundary.enableGlobalMoveEvents=i),e[t]=i,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{canvas:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,e._defaultEventMode=t.eventMode??"passive",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let e=0,i=t.length;e<i;e++){const i=t[e],n=this._bootstrapEvent(this._rootPointerEvent,i);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,B.pointerMoved();const t=this._normalizeToPointerData(e);for(let e=0,i=t.length;e<i;e++){const i=this._bootstrapEvent(this._rootPointerEvent,t[e]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",n=this._normalizeToPointerData(e);for(let e=0,t=n.length;e<t;e++){const t=this._bootstrapEvent(this._rootPointerEvent,n[e]);t.type+=i,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);for(let e=0,i=t.length;e<i;e++){const i=this._bootstrapEvent(this._rootPointerEvent,t[e]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,B.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;B.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;B.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*s,e.y=(i-n.top)*(this.domElement.height/n.height)*s}_normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,n=e.changedTouches.length;i<n;i++){const n=e.changedTouches[i];void 0===n.button&&(n.button=0),void 0===n.buttons&&(n.buttons=1),void 0===n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const i=e;void 0===i.isPrimary&&(i.isPrimary=!0),void 0===i.width&&(i.width=1),void 0===i.height&&(i.height=1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="mouse"),void 0===i.pointerId&&(i.pointerId=1),void 0===i.pressure&&(i.pressure=.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Y[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};N.extension={name:"events",type:[n.Ag.WebGLSystem,n.Ag.CanvasSystem,n.Ag.WebGPUSystem],priority:-1},N.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let G=N;const W={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return"dynamic"===this.eventMode||"static"===this.eventMode},set interactive(e){this.eventMode=e?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??G.defaultEventMode},set eventMode(e){this._internalEventMode=e},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const n="boolean"==typeof i&&i||"object"==typeof i&&i.capture,s="object"==typeof i?i.signal:void 0,o="object"==typeof i&&!0===i.once,r="function"==typeof t?void 0:t;e=n?`${e}capture`:e;const a="function"==typeof t?t:t.handleEvent,h=this;s&&s.addEventListener("abort",(()=>{h.off(e,a,r)})),o?h.once(e,a,r):h.on(e,a,r)},removeEventListener(e,t,i){const n="function"==typeof t?void 0:t;e="boolean"==typeof i&&i||"object"==typeof i&&i.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof l))throw new Error("Container cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};n.XO.add(G),n.XO.mixin(s.mc,W);class ${constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new a({domElement:this._domElement,renderer:this._renderer})}addRenderable(e,t){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){const e=this._attachedDomElements;if(0!==e.length){this._canvasObserver.ensureAttached();for(let t=0;t<e.length;t++){const i=e[t],n=i.element;if(!i.parent||i.globalDisplayStatus<7)n?.remove(),e.splice(t,1),t--;else{this._domElement.contains(n)||(n.style.position="absolute",n.style.pointerEvents="auto",this._domElement.appendChild(n));const e=i.worldTransform,t=i._anchor,s=i.width*t.x,o=i.height*t.y;n.style.transformOrigin=`${s}px ${o}px`,n.style.transform=`matrix(${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.tx-s}, ${e.ty-o})`,n.style.opacity=i.groupAlpha.toString()}}}else this._domElement.remove()}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++){const t=this._attachedDomElements[e];t.element?.remove()}this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}$.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"dom"},n.XO.add($),i(6312),i(5753),i(8928),i(5285),i(9305),i(5148),i(23),i(2623),i(8723),i(1317),i(4980)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FBSzRrQixxQkFBcUJ4WSxHQUMvQzBZLEVBQWF6RSxTQUFTeGQsUUFDeEIsQ0FDQTdDLEtBQUs0a0IscUJBQXFCbmdCLE9BQVMsRUFDbkN6RSxLQUFLbUIsWUFBWTBCLFNBQ2pCN0MsS0FBS3lLLGdCQUFnQjdILFVBQ3JCNUMsS0FBS2EsVUFBWSxJQUNuQixFQU1GOGpCLEVBQVFyVSxVQUFZLENBQ2xCckMsS0FBTSxDQUNKLEtBQWM0WCxXQUNkLEtBQWNDLFlBQ2QsS0FBY0MsYUFFaEJ0VixLQUFNLE9DcEdSLEtBQVcvTixJQUFJaWlCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXJkZ2FtZW1ha2VyLy4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2RvbS9DYW52YXNPYnNlcnZlci5tanMiLCJ3ZWJwYWNrOi8vY2FyZGdhbWVtYWtlci8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkRXZlbnQubWpzIiwid2VicGFjazovL2NhcmRnYW1lbWFrZXIvLi9ub2RlX21vZHVsZXMvaXNtb2JpbGVqcy9lc20vaXNNb2JpbGUuanMiLCJ3ZWJwYWNrOi8vY2FyZGdhbWVtYWtlci8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi91dGlscy9icm93c2VyL2lzTW9iaWxlLm1qcyIsIndlYnBhY2s6Ly9jYXJkZ2FtZW1ha2VyLy4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2FjY2Vzc2liaWxpdHkvQWNjZXNzaWJpbGl0eVN5c3RlbS5tanMiLCJ3ZWJwYWNrOi8vY2FyZGdhbWVtYWtlci8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9hY2Nlc3NpYmlsaXR5L2luaXQubWpzIiwid2VicGFjazovL2NhcmRnYW1lbWFrZXIvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvYWNjZXNzaWJpbGl0eS9hY2Nlc3NpYmlsaXR5VGFyZ2V0Lm1qcyIsIndlYnBhY2s6Ly9jYXJkZ2FtZW1ha2VyLy4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9FdmVudFRpY2tlci5tanMiLCJ3ZWJwYWNrOi8vY2FyZGdhbWVtYWtlci8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkTW91c2VFdmVudC5tanMiLCJ3ZWJwYWNrOi8vY2FyZGdhbWVtYWtlci8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkUG9pbnRlckV2ZW50Lm1qcyIsIndlYnBhY2s6Ly9jYXJkZ2FtZW1ha2VyLy4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9GZWRlcmF0ZWRXaGVlbEV2ZW50Lm1qcyIsIndlYnBhY2s6Ly9jYXJkZ2FtZW1ha2VyLy4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9FdmVudEJvdW5kYXJ5Lm1qcyIsIndlYnBhY2s6Ly9jYXJkZ2FtZW1ha2VyLy4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9FdmVudFN5c3RlbS5tanMiLCJ3ZWJwYWNrOi8vY2FyZGdhbWVtYWtlci8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkRXZlbnRUYXJnZXQubWpzIiwid2VicGFjazovL2NhcmRnYW1lbWFrZXIvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZXZlbnRzL2luaXQubWpzIiwid2VicGFjazovL2NhcmRnYW1lbWFrZXIvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZG9tL0RPTVBpcGUubWpzIiwid2VicGFjazovL2NhcmRnYW1lbWFrZXIvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZG9tL2luaXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVQREFURV9QUklPUklUWSB9IGZyb20gJy4uL3RpY2tlci9jb25zdC5tanMnO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSAnLi4vdGlja2VyL1RpY2tlci5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIENhbnZhc09ic2VydmVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIC8qKiBBIGNhY2hlZCB2YWx1ZSBvZiB0aGUgbGFzdCB0cmFuc2Zvcm0gYXBwbGllZCB0byB0aGUgRE9NIGVsZW1lbnQuICovXG4gICAgdGhpcy5fbGFzdFRyYW5zZm9ybSA9IFwiXCI7XG4gICAgLyoqIEEgUmVzaXplT2JzZXJ2ZXIgaW5zdGFuY2UgdG8gb2JzZXJ2ZSBjaGFuZ2VzIGluIHRoZSBjYW52YXMgc2l6ZS4gKi9cbiAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7XG4gICAgLyoqIEEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBvYnNlcnZlciBpcyBhdHRhY2hlZCB0byB0aGUgVGlja2VyIGZvciBjb250aW51b3VzIHVwZGF0ZXMuICovXG4gICAgdGhpcy5fdGlja2VyQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIERPTSBlbGVtZW50IGJhc2VkIG9uIHRoZSBjYW52YXMgc2l6ZSBhbmQgcG9zaXRpb24uXG4gICAgICogVGhpcyBtZXRob2QgY2FsY3VsYXRlcyB0aGUgc2NhbGUgYW5kIHRyYW5zbGF0aW9uIG5lZWRlZCB0byBrZWVwIHRoZSBET00gZWxlbWVudCBpbiBzeW5jIHdpdGggdGhlIGNhbnZhcy5cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZVRyYW5zbGF0aW9uID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jYW52YXMpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLl9jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBjb250ZW50V2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGg7XG4gICAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gdGhpcy5fY2FudmFzLmhlaWdodDtcbiAgICAgIGNvbnN0IHN4ID0gcmVjdC53aWR0aCAvIGNvbnRlbnRXaWR0aCAqIHRoaXMuX3JlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICBjb25zdCBzeSA9IHJlY3QuaGVpZ2h0IC8gY29udGVudEhlaWdodCAqIHRoaXMuX3JlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICBjb25zdCB0eCA9IHJlY3QubGVmdDtcbiAgICAgIGNvbnN0IHR5ID0gcmVjdC50b3A7XG4gICAgICBjb25zdCBuZXdUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dHh9cHgsICR7dHl9cHgpIHNjYWxlKCR7c3h9LCAke3N5fSlgO1xuICAgICAgaWYgKG5ld1RyYW5zZm9ybSAhPT0gdGhpcy5fbGFzdFRyYW5zZm9ybSkge1xuICAgICAgICB0aGlzLl9kb21FbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IG5ld1RyYW5zZm9ybTtcbiAgICAgICAgdGhpcy5fbGFzdFRyYW5zZm9ybSA9IG5ld1RyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX2RvbUVsZW1lbnQgPSBvcHRpb25zLmRvbUVsZW1lbnQ7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBvcHRpb25zLnJlbmRlcmVyO1xuICAgIGlmIChnbG9iYWxUaGlzLk9mZnNjcmVlbkNhbnZhcyAmJiB0aGlzLl9yZW5kZXJlci5jYW52YXMgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fY2FudmFzID0gdGhpcy5fcmVuZGVyZXIuY2FudmFzO1xuICAgIHRoaXMuX2F0dGFjaE9ic2VydmVyKCk7XG4gIH1cbiAgLyoqIFRoZSBjYW52YXMgZWxlbWVudCB0aGF0IHRoaXMgQ2FudmFzT2JzZXJ2ZXIgaXMgYXNzb2NpYXRlZCB3aXRoLiAqL1xuICBnZXQgY2FudmFzKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXM7XG4gIH1cbiAgLyoqIEF0dGFjaGVzIHRoZSBET00gZWxlbWVudCB0byB0aGUgY2FudmFzIHBhcmVudCBpZiBpdCBpcyBub3QgYWxyZWFkeSBhdHRhY2hlZC4gKi9cbiAgZW5zdXJlQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9kb21FbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5fY2FudmFzLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuX2NhbnZhcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuX2RvbUVsZW1lbnQpO1xuICAgICAgdGhpcy51cGRhdGVUcmFuc2xhdGlvbigpO1xuICAgIH1cbiAgfVxuICAvKiogU2V0cyB1cCBhIFJlc2l6ZU9ic2VydmVyIGlmIGF2YWlsYWJsZS4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIERPTSBlbGVtZW50IGlzIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBjYW52YXMgc2l6ZSAuICovXG4gIF9hdHRhY2hPYnNlcnZlcigpIHtcbiAgICBpZiAoXCJSZXNpemVPYnNlcnZlclwiIGluIGdsb2JhbFRoaXMpIHtcbiAgICAgIGlmICh0aGlzLl9vYnNlcnZlcikge1xuICAgICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX29ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgIGlmIChlbnRyeS50YXJnZXQgIT09IHRoaXMuX2NhbnZhcykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNvbnRlbnRXaWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgY29uc3Qgc3ggPSBlbnRyeS5jb250ZW50UmVjdC53aWR0aCAvIGNvbnRlbnRXaWR0aCAqIHRoaXMuX3JlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICAgICAgY29uc3Qgc3kgPSBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQgLyBjb250ZW50SGVpZ2h0ICogdGhpcy5fcmVuZGVyZXIucmVzb2x1dGlvbjtcbiAgICAgICAgICBjb25zdCBuZWVkc1VwZGF0ZSA9IHRoaXMuX2xhc3RTY2FsZVggIT09IHN4IHx8IHRoaXMuX2xhc3RTY2FsZVkgIT09IHN5O1xuICAgICAgICAgIGlmIChuZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2xhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5fbGFzdFNjYWxlWCA9IHN4O1xuICAgICAgICAgICAgdGhpcy5fbGFzdFNjYWxlWSA9IHN5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMuX2NhbnZhcyk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5fdGlja2VyQXR0YWNoZWQpIHtcbiAgICAgIFRpY2tlci5zaGFyZWQuYWRkKHRoaXMudXBkYXRlVHJhbnNsYXRpb24sIHRoaXMsIFVQREFURV9QUklPUklUWS5ISUdIKTtcbiAgICB9XG4gIH1cbiAgLyoqIERlc3Ryb3lzIHRoZSBDYW52YXNPYnNlcnZlciBpbnN0YW5jZSwgY2xlYW5pbmcgdXAgb2JzZXJ2ZXJzIGFuZCBUaWNrZXIuICovXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuX29ic2VydmVyKSB7XG4gICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90aWNrZXJBdHRhY2hlZCkge1xuICAgICAgVGlja2VyLnNoYXJlZC5yZW1vdmUodGhpcy51cGRhdGVUcmFuc2xhdGlvbik7XG4gICAgfVxuICAgIHRoaXMuX2RvbUVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgICB0aGlzLl9jYW52YXMgPSBudWxsO1xuICAgIHRoaXMuX3RpY2tlckF0dGFjaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fbGFzdFRyYW5zZm9ybSA9IFwiXCI7XG4gICAgdGhpcy5fbGFzdFNjYWxlWCA9IG51bGw7XG4gICAgdGhpcy5fbGFzdFNjYWxlWSA9IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ2FudmFzT2JzZXJ2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbnZhc09ic2VydmVyLm1qcy5tYXBcbiIsImltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vbWF0aHMvcG9pbnQvUG9pbnQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBGZWRlcmF0ZWRFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0gbWFuYWdlciAtIFRoZSBldmVudCBib3VuZGFyeSB3aGljaCBtYW5hZ2VzIHRoaXMgZXZlbnQuIFByb3BhZ2F0aW9uIGNhbiBvbmx5IG9jY3VyXG4gICAqICB3aXRoaW4gdGhlIGJvdW5kYXJ5J3MganVyaXNkaWN0aW9uLlxuICAgKi9cbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIC8qKiBGbGFncyB3aGV0aGVyIHRoaXMgZXZlbnQgYnViYmxlcy4gVGhpcyB3aWxsIHRha2UgZWZmZWN0IG9ubHkgaWYgaXQgaXMgc2V0IGJlZm9yZSBwcm9wYWdhdGlvbi4gKi9cbiAgICB0aGlzLmJ1YmJsZXMgPSB0cnVlO1xuICAgIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSA3LjAuMCAqL1xuICAgIHRoaXMuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBGbGFncyB3aGV0aGVyIHRoaXMgZXZlbnQgY2FuIGJlIGNhbmNlbGVkIHVzaW5nIHtAbGluayBGZWRlcmF0ZWRFdmVudC5wcmV2ZW50RGVmYXVsdH0uIFRoaXMgaXMgYWx3YXlzXG4gICAgICogZmFsc2UgKGZvciBub3cpLlxuICAgICAqL1xuICAgIHRoaXMuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEZsYWcgYWRkZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBET00gYEV2ZW50YC4gSXQgaXMgbm90IHVzZWQgaW4gdGhlIEZlZGVyYXRlZCBFdmVudHNcbiAgICAgKiBBUEkuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jb21wb3NlZFxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICB0aGlzLmNvbXBvc2VkID0gZmFsc2U7XG4gICAgLyoqIEZsYWdzIHdoZXRoZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2Ugb2YgdGhlIHVzZXIgYWdlbnQgd2FzIHByZXZlbnQgdGhyb3VnaCB0aGlzIGV2ZW50LiAqL1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIFRoZSBwcm9wYWdhdGlvbiBwaGFzZS5cbiAgICAgKiBAZGVmYXVsdCB7QGxpbmsgRmVkZXJhdGVkRXZlbnQuTk9ORX1cbiAgICAgKi9cbiAgICB0aGlzLmV2ZW50UGhhc2UgPSBGZWRlcmF0ZWRFdmVudC5wcm90b3R5cGUuTk9ORTtcbiAgICAvKiogRmxhZ3Mgd2hldGhlciBwcm9wYWdhdGlvbiB3YXMgc3RvcHBlZC4gKi9cbiAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IGZhbHNlO1xuICAgIC8qKiBGbGFncyB3aGV0aGVyIHByb3BhZ2F0aW9uIHdhcyBpbW1lZGlhdGVseSBzdG9wcGVkLiAqL1xuICAgIHRoaXMucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQgPSBmYWxzZTtcbiAgICAvKiogVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgbmVhcmVzdCBET00gbGF5ZXIuIFRoaXMgaXMgYSBub24tc3RhbmRhcmQgcHJvcGVydHkuICovXG4gICAgdGhpcy5sYXllciA9IG5ldyBQb2ludCgpO1xuICAgIC8qKiBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSBET00gZG9jdW1lbnQuIFRoaXMgaXMgYSBub24tc3RhbmRhcmQgcHJvcGVydHkuICovXG4gICAgdGhpcy5wYWdlID0gbmV3IFBvaW50KCk7XG4gICAgLyoqXG4gICAgICogVGhlIGV2ZW50IHByb3BhZ2F0aW9uIHBoYXNlIE5PTkUgdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZXZlbnQgaXMgbm90IGluIGFueSBwaGFzZS5cbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICogQGFkdmFuY2VkXG4gICAgICovXG4gICAgdGhpcy5OT05FID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcHJvcGFnYXRpb24gcGhhc2UgQ0FQVFVSSU5HX1BIQVNFIHRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIGV2ZW50IGlzIGluIHRoZSBjYXB0dXJpbmcgcGhhc2UuXG4gICAgICogQGRlZmF1bHQgMVxuICAgICAqIEBhZHZhbmNlZFxuICAgICAqL1xuICAgIHRoaXMuQ0FQVFVSSU5HX1BIQVNFID0gMTtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcHJvcGFnYXRpb24gcGhhc2UgQVRfVEFSR0VUIHRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIGV2ZW50IGlzIGF0IHRoZSB0YXJnZXQuXG4gICAgICogQGRlZmF1bHQgMlxuICAgICAqIEBhZHZhbmNlZFxuICAgICAqL1xuICAgIHRoaXMuQVRfVEFSR0VUID0gMjtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcHJvcGFnYXRpb24gcGhhc2UgQlVCQkxJTkdfUEhBU0UgdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZXZlbnQgaXMgaW4gdGhlIGJ1YmJsaW5nIHBoYXNlLlxuICAgICAqIEBkZWZhdWx0IDNcbiAgICAgKiBAYWR2YW5jZWRcbiAgICAgKi9cbiAgICB0aGlzLkJVQkJMSU5HX1BIQVNFID0gMztcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGxheWVyWCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllci54O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGxheWVyWSgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllci55O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IHBhZ2VYKCkge1xuICAgIHJldHVybiB0aGlzLnBhZ2UueDtcbiAgfVxuICAvKiogQHJlYWRvbmx5ICovXG4gIGdldCBwYWdlWSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlLnk7XG4gIH1cbiAgLyoqXG4gICAqIEZhbGxiYWNrIGZvciB0aGUgZGVwcmVjYXRlZCBgSW50ZXJhY3Rpb25FdmVudC5kYXRhYC5cbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgNy4wLjBcbiAgICovXG4gIGdldCBkYXRhKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgcHJvcGFnYXRpb24gcGF0aCBmb3IgdGhpcyBldmVudC4gQWxpYXMgZm9yIHtAbGluayBFdmVudEJvdW5kYXJ5LnByb3BhZ2F0aW9uUGF0aH0uXG4gICAqIEBhZHZhbmNlZFxuICAgKi9cbiAgY29tcG9zZWRQYXRoKCkge1xuICAgIGlmICh0aGlzLm1hbmFnZXIgJiYgKCF0aGlzLnBhdGggfHwgdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGggLSAxXSAhPT0gdGhpcy50YXJnZXQpKSB7XG4gICAgICB0aGlzLnBhdGggPSB0aGlzLnRhcmdldCA/IHRoaXMubWFuYWdlci5wcm9wYWdhdGlvblBhdGgodGhpcy50YXJnZXQpIDogW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBhdGg7XG4gIH1cbiAgLyoqXG4gICAqIFVuaW1wbGVtZW50ZWQgbWV0aG9kIGluY2x1ZGVkIGZvciBpbXBsZW1lbnRpbmcgdGhlIERPTSBpbnRlcmZhY2UgYEV2ZW50YC4gSXQgd2lsbCB0aHJvdyBhbiBgRXJyb3JgLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAaWdub3JlXG4gICAqIEBwYXJhbSBfdHlwZVxuICAgKiBAcGFyYW0gX2J1YmJsZXNcbiAgICogQHBhcmFtIF9jYW5jZWxhYmxlXG4gICAqL1xuICBpbml0RXZlbnQoX3R5cGUsIF9idWJibGVzLCBfY2FuY2VsYWJsZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImluaXRFdmVudCgpIGlzIGEgbGVnYWN5IERPTSBBUEkuIEl0IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGUgRmVkZXJhdGVkIEV2ZW50cyBBUEkuXCIpO1xuICB9XG4gIC8qKlxuICAgKiBVbmltcGxlbWVudGVkIG1ldGhvZCBpbmNsdWRlZCBmb3IgaW1wbGVtZW50aW5nIHRoZSBET00gaW50ZXJmYWNlIGBVSUV2ZW50YC4gSXQgd2lsbCB0aHJvdyBhbiBgRXJyb3JgLlxuICAgKiBAaWdub3JlXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEBwYXJhbSBfdHlwZUFyZ1xuICAgKiBAcGFyYW0gX2J1YmJsZXNBcmdcbiAgICogQHBhcmFtIF9jYW5jZWxhYmxlQXJnXG4gICAqIEBwYXJhbSBfdmlld0FyZ1xuICAgKiBAcGFyYW0gX2RldGFpbEFyZ1xuICAgKi9cbiAgaW5pdFVJRXZlbnQoX3R5cGVBcmcsIF9idWJibGVzQXJnLCBfY2FuY2VsYWJsZUFyZywgX3ZpZXdBcmcsIF9kZXRhaWxBcmcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0VUlFdmVudCgpIGlzIGEgbGVnYWN5IERPTSBBUEkuIEl0IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGUgRmVkZXJhdGVkIEV2ZW50cyBBUEkuXCIpO1xuICB9XG4gIC8qKlxuICAgKiBQcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3Igb2YgYm90aCBQaXhpSlMgYW5kIHRoZSB1c2VyIGFnZW50LlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBzcHJpdGUub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAqICAgICAvLyBQcmV2ZW50IGJvdGggYnJvd3NlcidzIGRlZmF1bHQgY2xpY2sgYmVoYXZpb3JcbiAgICogICAgIC8vIGFuZCBQaXhpSlMncyBkZWZhdWx0IGhhbmRsaW5nXG4gICAqICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgKlxuICAgKiAgICAgLy8gQ3VzdG9tIGhhbmRsaW5nXG4gICAqICAgICBjdXN0b21DbGlja0hhbmRsZXIoKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAcmVtYXJrc1xuICAgKiAtIE9ubHkgd29ya3MgaWYgdGhlIG5hdGl2ZSBldmVudCBpcyBjYW5jZWxhYmxlXG4gICAqIC0gRG9lcyBub3Qgc3RvcCBldmVudCBwcm9wYWdhdGlvblxuICAgKi9cbiAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgaWYgKHRoaXMubmF0aXZlRXZlbnQgaW5zdGFuY2VvZiBFdmVudCAmJiB0aGlzLm5hdGl2ZUV2ZW50LmNhbmNlbGFibGUpIHtcbiAgICAgIHRoaXMubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU3RvcCB0aGlzIGV2ZW50IGZyb20gcHJvcGFnYXRpbmcgdG8gYW55IGFkZGl0aW9uYWwgbGlzdGVuZXJzLCBpbmNsdWRpbmcgdGhvc2VcbiAgICogb24gdGhlIGN1cnJlbnQgdGFyZ2V0IGFuZCBhbnkgZm9sbG93aW5nIHRhcmdldHMgaW4gdGhlIHByb3BhZ2F0aW9uIHBhdGguXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnRhaW5lci5vbigncG9pbnRlcmRvd24nLCAoZXZlbnQpID0+IHtcbiAgICogICAgIC8vIFN0b3AgYWxsIGZ1cnRoZXIgZXZlbnQgaGFuZGxpbmdcbiAgICogICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgKlxuICAgKiAgICAgLy8gVGhlc2UgaGFuZGxlcnMgd29uJ3QgYmUgY2FsbGVkOlxuICAgKiAgICAgLy8gLSBPdGhlciBwb2ludGVyZG93biBsaXN0ZW5lcnMgb24gdGhpcyBjb250YWluZXJcbiAgICogICAgIC8vIC0gQW55IHBvaW50ZXJkb3duIGxpc3RlbmVycyBvbiBwYXJlbnQgY29udGFpbmVyc1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIEByZW1hcmtzXG4gICAqIC0gSW1tZWRpYXRlbHkgc3RvcHMgYWxsIGV2ZW50IHByb3BhZ2F0aW9uXG4gICAqIC0gUHJldmVudHMgb3RoZXIgbGlzdGVuZXJzIG9uIHNhbWUgdGFyZ2V0IGZyb20gYmVpbmcgY2FsbGVkXG4gICAqIC0gTW9yZSBhZ2dyZXNzaXZlIHRoYW4gc3RvcFByb3BhZ2F0aW9uKClcbiAgICovXG4gIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICB0aGlzLnByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU3RvcCB0aGlzIGV2ZW50IGZyb20gcHJvcGFnYXRpbmcgdG8gdGhlIG5leHQgdGFyZ2V0IGluIHRoZSBwcm9wYWdhdGlvbiBwYXRoLlxuICAgKiBUaGUgcmVzdCBvZiB0aGUgbGlzdGVuZXJzIG9uIHRoZSBjdXJyZW50IHRhcmdldCB3aWxsIHN0aWxsIGJlIG5vdGlmaWVkLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjaGlsZC5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICogICAgIC8vIEhhbmRsZSBldmVudCBvbiBjaGlsZFxuICAgKiAgICAgdXBkYXRlQ2hpbGQoKTtcbiAgICpcbiAgICogICAgIC8vIFByZXZlbnQgcGFyZW50IGhhbmRsZXJzIGZyb20gYmVpbmcgY2FsbGVkXG4gICAqICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICogfSk7XG4gICAqXG4gICAqIC8vIFRoaXMgd29uJ3QgYmUgY2FsbGVkIGlmIGNoaWxkIGhhbmRsZXMgdGhlIGV2ZW50XG4gICAqIHBhcmVudC5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICogICAgIHVwZGF0ZVBhcmVudCgpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIEByZW1hcmtzXG4gICAqIC0gU3RvcHMgZXZlbnQgYnViYmxpbmcgdG8gcGFyZW50IGNvbnRhaW5lcnNcbiAgICogLSBEb2VzIG5vdCBwcmV2ZW50IG90aGVyIGxpc3RlbmVycyBvbiBzYW1lIHRhcmdldFxuICAgKiAtIExlc3MgYWdncmVzc2l2ZSB0aGFuIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG4gICAqL1xuICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICB9XG59XG5cbmV4cG9ydCB7IEZlZGVyYXRlZEV2ZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GZWRlcmF0ZWRFdmVudC5tanMubWFwXG4iLCJ2YXIgYXBwbGVJcGhvbmUgPSAvaVBob25lL2k7XG52YXIgYXBwbGVJcG9kID0gL2lQb2QvaTtcbnZhciBhcHBsZVRhYmxldCA9IC9pUGFkL2k7XG52YXIgYXBwbGVVbml2ZXJzYWwgPSAvXFxiaU9TLXVuaXZlcnNhbCg/Oi4rKU1hY1xcYi9pO1xudmFyIGFuZHJvaWRQaG9uZSA9IC9cXGJBbmRyb2lkKD86LispTW9iaWxlXFxiL2k7XG52YXIgYW5kcm9pZFRhYmxldCA9IC9BbmRyb2lkL2k7XG52YXIgYW1hem9uUGhvbmUgPSAvKD86U0Q0OTMwVVJ8XFxiU2lsayg/Oi4rKU1vYmlsZVxcYikvaTtcbnZhciBhbWF6b25UYWJsZXQgPSAvU2lsay9pO1xudmFyIHdpbmRvd3NQaG9uZSA9IC9XaW5kb3dzIFBob25lL2k7XG52YXIgd2luZG93c1RhYmxldCA9IC9cXGJXaW5kb3dzKD86LispQVJNXFxiL2k7XG52YXIgb3RoZXJCbGFja0JlcnJ5ID0gL0JsYWNrQmVycnkvaTtcbnZhciBvdGhlckJsYWNrQmVycnkxMCA9IC9CQjEwL2k7XG52YXIgb3RoZXJPcGVyYSA9IC9PcGVyYSBNaW5pL2k7XG52YXIgb3RoZXJDaHJvbWUgPSAvXFxiKENyaU9TfENocm9tZSkoPzouKylNb2JpbGUvaTtcbnZhciBvdGhlckZpcmVmb3ggPSAvTW9iaWxlKD86LispRmlyZWZveFxcYi9pO1xudmFyIGlzQXBwbGVUYWJsZXRPbklvczEzID0gZnVuY3Rpb24gKG5hdmlnYXRvcikge1xuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgbmF2aWdhdG9yLnBsYXRmb3JtID09PSAnTWFjSW50ZWwnICYmXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPT09ICdudW1iZXInICYmXG4gICAgICAgIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEgJiZcbiAgICAgICAgdHlwZW9mIE1TU3RyZWFtID09PSAndW5kZWZpbmVkJyk7XG59O1xuZnVuY3Rpb24gY3JlYXRlTWF0Y2godXNlckFnZW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWdleCkgeyByZXR1cm4gcmVnZXgudGVzdCh1c2VyQWdlbnQpOyB9O1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNNb2JpbGUocGFyYW0pIHtcbiAgICB2YXIgbmF2ID0ge1xuICAgICAgICB1c2VyQWdlbnQ6ICcnLFxuICAgICAgICBwbGF0Zm9ybTogJycsXG4gICAgICAgIG1heFRvdWNoUG9pbnRzOiAwXG4gICAgfTtcbiAgICBpZiAoIXBhcmFtICYmIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG5hdiA9IHtcbiAgICAgICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIHBsYXRmb3JtOiBuYXZpZ2F0b3IucGxhdGZvcm0sXG4gICAgICAgICAgICBtYXhUb3VjaFBvaW50czogbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzIHx8IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHBhcmFtID09PSAnc3RyaW5nJykge1xuICAgICAgICBuYXYudXNlckFnZW50ID0gcGFyYW07XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhcmFtICYmIHBhcmFtLnVzZXJBZ2VudCkge1xuICAgICAgICBuYXYgPSB7XG4gICAgICAgICAgICB1c2VyQWdlbnQ6IHBhcmFtLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIHBsYXRmb3JtOiBwYXJhbS5wbGF0Zm9ybSxcbiAgICAgICAgICAgIG1heFRvdWNoUG9pbnRzOiBwYXJhbS5tYXhUb3VjaFBvaW50cyB8fCAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciB1c2VyQWdlbnQgPSBuYXYudXNlckFnZW50O1xuICAgIHZhciB0bXAgPSB1c2VyQWdlbnQuc3BsaXQoJ1tGQkFOJyk7XG4gICAgaWYgKHR5cGVvZiB0bXBbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVzZXJBZ2VudCA9IHRtcFswXTtcbiAgICB9XG4gICAgdG1wID0gdXNlckFnZW50LnNwbGl0KCdUd2l0dGVyJyk7XG4gICAgaWYgKHR5cGVvZiB0bXBbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVzZXJBZ2VudCA9IHRtcFswXTtcbiAgICB9XG4gICAgdmFyIG1hdGNoID0gY3JlYXRlTWF0Y2godXNlckFnZW50KTtcbiAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICBhcHBsZToge1xuICAgICAgICAgICAgcGhvbmU6IG1hdGNoKGFwcGxlSXBob25lKSAmJiAhbWF0Y2god2luZG93c1Bob25lKSxcbiAgICAgICAgICAgIGlwb2Q6IG1hdGNoKGFwcGxlSXBvZCksXG4gICAgICAgICAgICB0YWJsZXQ6ICFtYXRjaChhcHBsZUlwaG9uZSkgJiZcbiAgICAgICAgICAgICAgICAobWF0Y2goYXBwbGVUYWJsZXQpIHx8IGlzQXBwbGVUYWJsZXRPbklvczEzKG5hdikpICYmXG4gICAgICAgICAgICAgICAgIW1hdGNoKHdpbmRvd3NQaG9uZSksXG4gICAgICAgICAgICB1bml2ZXJzYWw6IG1hdGNoKGFwcGxlVW5pdmVyc2FsKSxcbiAgICAgICAgICAgIGRldmljZTogKG1hdGNoKGFwcGxlSXBob25lKSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKGFwcGxlSXBvZCkgfHxcbiAgICAgICAgICAgICAgICBtYXRjaChhcHBsZVRhYmxldCkgfHxcbiAgICAgICAgICAgICAgICBtYXRjaChhcHBsZVVuaXZlcnNhbCkgfHxcbiAgICAgICAgICAgICAgICBpc0FwcGxlVGFibGV0T25Jb3MxMyhuYXYpKSAmJlxuICAgICAgICAgICAgICAgICFtYXRjaCh3aW5kb3dzUGhvbmUpXG4gICAgICAgIH0sXG4gICAgICAgIGFtYXpvbjoge1xuICAgICAgICAgICAgcGhvbmU6IG1hdGNoKGFtYXpvblBob25lKSxcbiAgICAgICAgICAgIHRhYmxldDogIW1hdGNoKGFtYXpvblBob25lKSAmJiBtYXRjaChhbWF6b25UYWJsZXQpLFxuICAgICAgICAgICAgZGV2aWNlOiBtYXRjaChhbWF6b25QaG9uZSkgfHwgbWF0Y2goYW1hem9uVGFibGV0KVxuICAgICAgICB9LFxuICAgICAgICBhbmRyb2lkOiB7XG4gICAgICAgICAgICBwaG9uZTogKCFtYXRjaCh3aW5kb3dzUGhvbmUpICYmIG1hdGNoKGFtYXpvblBob25lKSkgfHxcbiAgICAgICAgICAgICAgICAoIW1hdGNoKHdpbmRvd3NQaG9uZSkgJiYgbWF0Y2goYW5kcm9pZFBob25lKSksXG4gICAgICAgICAgICB0YWJsZXQ6ICFtYXRjaCh3aW5kb3dzUGhvbmUpICYmXG4gICAgICAgICAgICAgICAgIW1hdGNoKGFtYXpvblBob25lKSAmJlxuICAgICAgICAgICAgICAgICFtYXRjaChhbmRyb2lkUGhvbmUpICYmXG4gICAgICAgICAgICAgICAgKG1hdGNoKGFtYXpvblRhYmxldCkgfHwgbWF0Y2goYW5kcm9pZFRhYmxldCkpLFxuICAgICAgICAgICAgZGV2aWNlOiAoIW1hdGNoKHdpbmRvd3NQaG9uZSkgJiZcbiAgICAgICAgICAgICAgICAobWF0Y2goYW1hem9uUGhvbmUpIHx8XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoKGFtYXpvblRhYmxldCkgfHxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2goYW5kcm9pZFBob25lKSB8fFxuICAgICAgICAgICAgICAgICAgICBtYXRjaChhbmRyb2lkVGFibGV0KSkpIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2goL1xcYm9raHR0cFxcYi9pKVxuICAgICAgICB9LFxuICAgICAgICB3aW5kb3dzOiB7XG4gICAgICAgICAgICBwaG9uZTogbWF0Y2god2luZG93c1Bob25lKSxcbiAgICAgICAgICAgIHRhYmxldDogbWF0Y2god2luZG93c1RhYmxldCksXG4gICAgICAgICAgICBkZXZpY2U6IG1hdGNoKHdpbmRvd3NQaG9uZSkgfHwgbWF0Y2god2luZG93c1RhYmxldClcbiAgICAgICAgfSxcbiAgICAgICAgb3RoZXI6IHtcbiAgICAgICAgICAgIGJsYWNrYmVycnk6IG1hdGNoKG90aGVyQmxhY2tCZXJyeSksXG4gICAgICAgICAgICBibGFja2JlcnJ5MTA6IG1hdGNoKG90aGVyQmxhY2tCZXJyeTEwKSxcbiAgICAgICAgICAgIG9wZXJhOiBtYXRjaChvdGhlck9wZXJhKSxcbiAgICAgICAgICAgIGZpcmVmb3g6IG1hdGNoKG90aGVyRmlyZWZveCksXG4gICAgICAgICAgICBjaHJvbWU6IG1hdGNoKG90aGVyQ2hyb21lKSxcbiAgICAgICAgICAgIGRldmljZTogbWF0Y2gob3RoZXJCbGFja0JlcnJ5KSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKG90aGVyQmxhY2tCZXJyeTEwKSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKG90aGVyT3BlcmEpIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2gob3RoZXJGaXJlZm94KSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKG90aGVyQ2hyb21lKVxuICAgICAgICB9LFxuICAgICAgICBhbnk6IGZhbHNlLFxuICAgICAgICBwaG9uZTogZmFsc2UsXG4gICAgICAgIHRhYmxldDogZmFsc2VcbiAgICB9O1xuICAgIHJlc3VsdC5hbnkgPVxuICAgICAgICByZXN1bHQuYXBwbGUuZGV2aWNlIHx8XG4gICAgICAgICAgICByZXN1bHQuYW5kcm9pZC5kZXZpY2UgfHxcbiAgICAgICAgICAgIHJlc3VsdC53aW5kb3dzLmRldmljZSB8fFxuICAgICAgICAgICAgcmVzdWx0Lm90aGVyLmRldmljZTtcbiAgICByZXN1bHQucGhvbmUgPVxuICAgICAgICByZXN1bHQuYXBwbGUucGhvbmUgfHwgcmVzdWx0LmFuZHJvaWQucGhvbmUgfHwgcmVzdWx0LndpbmRvd3MucGhvbmU7XG4gICAgcmVzdWx0LnRhYmxldCA9XG4gICAgICAgIHJlc3VsdC5hcHBsZS50YWJsZXQgfHwgcmVzdWx0LmFuZHJvaWQudGFibGV0IHx8IHJlc3VsdC53aW5kb3dzLnRhYmxldDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNNb2JpbGUuanMubWFwIiwiaW1wb3J0IGlzTW9iaWxlSnMgZnJvbSAnaXNtb2JpbGVqcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgaXNNb2JpbGVDYWxsID0gaXNNb2JpbGVKcy5kZWZhdWx0ID8/IGlzTW9iaWxlSnM7XG5jb25zdCBpc01vYmlsZSA9IGlzTW9iaWxlQ2FsbChnbG9iYWxUaGlzLm5hdmlnYXRvcik7XG5cbmV4cG9ydCB7IGlzTW9iaWxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc01vYmlsZS5tanMubWFwXG4iLCJpbXBvcnQgeyBDYW52YXNPYnNlcnZlciB9IGZyb20gJy4uL2RvbS9DYW52YXNPYnNlcnZlci5tanMnO1xuaW1wb3J0IHsgRmVkZXJhdGVkRXZlbnQgfSBmcm9tICcuLi9ldmVudHMvRmVkZXJhdGVkRXZlbnQubWpzJztcbmltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci9pc01vYmlsZS5tanMnO1xuaW1wb3J0IHsgcmVtb3ZlSXRlbXMgfSBmcm9tICcuLi91dGlscy9kYXRhL3JlbW92ZUl0ZW1zLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgS0VZX0NPREVfVEFCID0gOTtcbmNvbnN0IERJVl9UT1VDSF9TSVpFID0gMTAwO1xuY29uc3QgRElWX1RPVUNIX1BPU19YID0gMDtcbmNvbnN0IERJVl9UT1VDSF9QT1NfWSA9IDA7XG5jb25zdCBESVZfVE9VQ0hfWklOREVYID0gMjtcbmNvbnN0IERJVl9IT09LX1NJWkUgPSAxO1xuY29uc3QgRElWX0hPT0tfUE9TX1ggPSAtMWUzO1xuY29uc3QgRElWX0hPT0tfUE9TX1kgPSAtMWUzO1xuY29uc3QgRElWX0hPT0tfWklOREVYID0gMjtcbmNvbnN0IF9BY2Nlc3NpYmlsaXR5U3lzdGVtID0gY2xhc3MgX0FjY2Vzc2liaWxpdHlTeXN0ZW0ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUganNkb2MvcmVxdWlyZS1wYXJhbVxuICAvKipcbiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmVyfFdlYkdQVVJlbmRlcmVyfSByZW5kZXJlciAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJlbmRlcmVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgX21vYmlsZUluZm8gPSBpc01vYmlsZSkge1xuICAgIHRoaXMuX21vYmlsZUluZm8gPSBfbW9iaWxlSW5mbztcbiAgICAvKiogV2hldGhlciBhY2Nlc3NpYmlsaXR5IGRpdnMgYXJlIHZpc2libGUgZm9yIGRlYnVnZ2luZyAqL1xuICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcbiAgICAvKiogV2hldGhlciB0byBhY3RpdmF0ZSBvbiB0YWIga2V5IHByZXNzICovXG4gICAgdGhpcy5fYWN0aXZhdGVPblRhYiA9IHRydWU7XG4gICAgLyoqIFdoZXRoZXIgdG8gZGVhY3RpdmF0ZSBhY2Nlc3NpYmlsaXR5IHdoZW4gbW91c2UgbW92ZXMgKi9cbiAgICB0aGlzLl9kZWFjdGl2YXRlT25Nb3VzZU1vdmUgPSB0cnVlO1xuICAgIC8qKiBJbnRlcm5hbCB2YXJpYWJsZSwgc2VlIGlzQWN0aXZlIGdldHRlci4gKi9cbiAgICB0aGlzLl9pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIC8qKiBJbnRlcm5hbCB2YXJpYWJsZSwgc2VlIGlzTW9iaWxlQWNjZXNzaWJpbGl0eSBnZXR0ZXIuICovXG4gICAgdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5ID0gZmFsc2U7XG4gICAgLyoqIFRoaXMgaXMgdGhlIGRvbSBlbGVtZW50IHRoYXQgd2lsbCBzaXQgb3ZlciB0aGUgUGl4aUpTIGVsZW1lbnQuIFRoaXMgaXMgd2hlcmUgdGhlIGRpdiBvdmVybGF5cyB3aWxsIGdvLiAqL1xuICAgIHRoaXMuX2RpdiA9IG51bGw7XG4gICAgLyoqIEEgc2ltcGxlIHBvb2wgZm9yIHN0b3JpbmcgZGl2cy4gKi9cbiAgICB0aGlzLl9wb29sID0gW107XG4gICAgLyoqIFRoaXMgaXMgYSB0aWNrIHVzZWQgdG8gY2hlY2sgaWYgYW4gb2JqZWN0IGlzIG5vIGxvbmdlciBiZWluZyByZW5kZXJlZC4gKi9cbiAgICB0aGlzLl9yZW5kZXJJZCA9IDA7XG4gICAgLyoqIFRoZSBhcnJheSBvZiBjdXJyZW50bHkgYWN0aXZlIGFjY2Vzc2libGUgaXRlbXMuICovXG4gICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgICAvKiogQ291bnQgdG8gdGhyb3R0bGUgZGl2IHVwZGF0ZXMgb24gYW5kcm9pZCBkZXZpY2VzLiAqL1xuICAgIHRoaXMuX2FuZHJvaWRVcGRhdGVDb3VudCA9IDA7XG4gICAgLyoqICBUaGUgZnJlcXVlbmN5IHRvIHVwZGF0ZSB0aGUgZGl2IGVsZW1lbnRzLiAqL1xuICAgIHRoaXMuX2FuZHJvaWRVcGRhdGVGcmVxdWVuY3kgPSA1MDA7XG4gICAgdGhpcy5faG9va0RpdiA9IG51bGw7XG4gICAgaWYgKF9tb2JpbGVJbmZvLnRhYmxldCB8fCBfbW9iaWxlSW5mby5waG9uZSkge1xuICAgICAgdGhpcy5fY3JlYXRlVG91Y2hIb29rKCk7XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gIH1cbiAgLyoqXG4gICAqIFZhbHVlIG9mIGB0cnVlYCBpZiBhY2Nlc3NpYmlsaXR5IGlzIGN1cnJlbnRseSBhY3RpdmUgYW5kIGFjY2Vzc2liaWxpdHkgbGF5ZXJzIGFyZSBzaG93aW5nLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzQWN0aXZlO1xuICB9XG4gIC8qKlxuICAgKiBWYWx1ZSBvZiBgdHJ1ZWAgaWYgYWNjZXNzaWJpbGl0eSBpcyBlbmFibGVkIGZvciB0b3VjaCBkZXZpY2VzLlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgaXNNb2JpbGVBY2Nlc3NpYmlsaXR5KCkge1xuICAgIHJldHVybiB0aGlzLl9pc01vYmlsZUFjY2Vzc2liaWxpdHk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBET00gZWxlbWVudCB0aGF0IHdpbGwgc2l0IG92ZXIgdGhlIFBpeGlKUyBlbGVtZW50LiBUaGlzIGlzIHdoZXJlIHRoZSBkaXYgb3ZlcmxheXMgd2lsbCBnby5cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgaG9va0RpdigpIHtcbiAgICByZXR1cm4gdGhpcy5faG9va0RpdjtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyB0aGUgdG91Y2ggaG9va3MuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY3JlYXRlVG91Y2hIb29rKCkge1xuICAgIGNvbnN0IGhvb2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGhvb2tEaXYuc3R5bGUud2lkdGggPSBgJHtESVZfSE9PS19TSVpFfXB4YDtcbiAgICBob29rRGl2LnN0eWxlLmhlaWdodCA9IGAke0RJVl9IT09LX1NJWkV9cHhgO1xuICAgIGhvb2tEaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgaG9va0Rpdi5zdHlsZS50b3AgPSBgJHtESVZfSE9PS19QT1NfWH1weGA7XG4gICAgaG9va0Rpdi5zdHlsZS5sZWZ0ID0gYCR7RElWX0hPT0tfUE9TX1l9cHhgO1xuICAgIGhvb2tEaXYuc3R5bGUuekluZGV4ID0gRElWX0hPT0tfWklOREVYLnRvU3RyaW5nKCk7XG4gICAgaG9va0Rpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNGRjAwMDBcIjtcbiAgICBob29rRGl2LnRpdGxlID0gXCJzZWxlY3QgdG8gZW5hYmxlIGFjY2Vzc2liaWxpdHkgZm9yIHRoaXMgY29udGVudFwiO1xuICAgIGhvb2tEaXYuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2lzTW9iaWxlQWNjZXNzaWJpbGl0eSA9IHRydWU7XG4gICAgICB0aGlzLl9hY3RpdmF0ZSgpO1xuICAgICAgdGhpcy5fZGVzdHJveVRvdWNoSG9vaygpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaG9va0Rpdik7XG4gICAgdGhpcy5faG9va0RpdiA9IGhvb2tEaXY7XG4gIH1cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSB0b3VjaCBob29rcy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kZXN0cm95VG91Y2hIb29rKCkge1xuICAgIGlmICghdGhpcy5faG9va0Rpdikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuX2hvb2tEaXYpO1xuICAgIHRoaXMuX2hvb2tEaXYgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBBY3RpdmF0aW5nIHdpbGwgY2F1c2UgdGhlIEFjY2Vzc2liaWxpdHkgbGF5ZXIgdG8gYmUgc2hvd24uXG4gICAqIFRoaXMgaXMgY2FsbGVkIHdoZW4gYSB1c2VyIHByZXNzZXMgdGhlIHRhYiBrZXkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfYWN0aXZhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzQWN0aXZlID0gdHJ1ZTtcbiAgICBpZiAoIXRoaXMuX2Rpdikge1xuICAgICAgdGhpcy5fZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIHRoaXMuX2Rpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIHRoaXMuX2Rpdi5zdHlsZS50b3AgPSBgJHtESVZfVE9VQ0hfUE9TX1h9cHhgO1xuICAgICAgdGhpcy5fZGl2LnN0eWxlLmxlZnQgPSBgJHtESVZfVE9VQ0hfUE9TX1l9cHhgO1xuICAgICAgdGhpcy5fZGl2LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcbiAgICAgIHRoaXMuX2Rpdi5zdHlsZS56SW5kZXggPSBESVZfVE9VQ0hfWklOREVYLnRvU3RyaW5nKCk7XG4gICAgICB0aGlzLl9jYW52YXNPYnNlcnZlciA9IG5ldyBDYW52YXNPYnNlcnZlcih7XG4gICAgICAgIGRvbUVsZW1lbnQ6IHRoaXMuX2RpdixcbiAgICAgICAgcmVuZGVyZXI6IHRoaXMuX3JlbmRlcmVyXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2FjdGl2YXRlT25UYWIpIHtcbiAgICAgIHRoaXMuX29uS2V5RG93biA9IHRoaXMuX29uS2V5RG93bi5iaW5kKHRoaXMpO1xuICAgICAgZ2xvYmFsVGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9vbktleURvd24sIGZhbHNlKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RlYWN0aXZhdGVPbk1vdXNlTW92ZSkge1xuICAgICAgdGhpcy5fb25Nb3VzZU1vdmUgPSB0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgICAgZ2xvYmFsVGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uTW91c2VNb3ZlLCB0cnVlKTtcbiAgICB9XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5fcmVuZGVyZXIudmlldy5jYW52YXM7XG4gICAgaWYgKCFjYW52YXMucGFyZW50Tm9kZSkge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgIGlmIChjYW52YXMucGFyZW50Tm9kZSkge1xuICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB0aGlzLl9jYW52YXNPYnNlcnZlci5lbnN1cmVBdHRhY2hlZCgpO1xuICAgICAgICAgIHRoaXMuX2luaXRBY2Nlc3NpYmlsaXR5U2V0dXAoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYW52YXNPYnNlcnZlci5lbnN1cmVBdHRhY2hlZCgpO1xuICAgICAgdGhpcy5faW5pdEFjY2Vzc2liaWxpdHlTZXR1cCgpO1xuICAgIH1cbiAgfVxuICAvLyBOZXcgbWV0aG9kIHRvIGhhbmRsZSBpbml0aWFsaXphdGlvbiBhZnRlciBkaXYgaXMgcmVhZHlcbiAgX2luaXRBY2Nlc3NpYmlsaXR5U2V0dXAoKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIucnVubmVycy5wb3N0cmVuZGVyLmFkZCh0aGlzKTtcbiAgICBpZiAodGhpcy5fcmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkKSB7XG4gICAgICB0aGlzLl91cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyh0aGlzLl9yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVhY3RpdmF0ZXMgdGhlIGFjY2Vzc2liaWxpdHkgc3lzdGVtLiBSZW1vdmVzIGxpc3RlbmVycyBhbmQgYWNjZXNzaWJpbGl0eSBlbGVtZW50cy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kZWFjdGl2YXRlKCkge1xuICAgIGlmICghdGhpcy5faXNBY3RpdmUgfHwgdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG4gICAgZ2xvYmFsVGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uTW91c2VNb3ZlLCB0cnVlKTtcbiAgICBpZiAodGhpcy5fYWN0aXZhdGVPblRhYikge1xuICAgICAgZ2xvYmFsVGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9vbktleURvd24sIGZhbHNlKTtcbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyZXIucnVubmVycy5wb3N0cmVuZGVyLnJlbW92ZSh0aGlzKTtcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuX2NoaWxkcmVuKSB7XG4gICAgICBpZiAoY2hpbGQuX2FjY2Vzc2libGVEaXYgJiYgY2hpbGQuX2FjY2Vzc2libGVEaXYucGFyZW50Tm9kZSkge1xuICAgICAgICBjaGlsZC5fYWNjZXNzaWJsZURpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNoaWxkLl9hY2Nlc3NpYmxlRGl2KTtcbiAgICAgICAgY2hpbGQuX2FjY2Vzc2libGVEaXYgPSBudWxsO1xuICAgICAgfVxuICAgICAgY2hpbGQuX2FjY2Vzc2libGVBY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5fcG9vbC5mb3JFYWNoKChkaXYpID0+IHtcbiAgICAgIGlmIChkaXYucGFyZW50Tm9kZSkge1xuICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0aGlzLl9kaXYgJiYgdGhpcy5fZGl2LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuX2Rpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2Rpdik7XG4gICAgfVxuICAgIHRoaXMuX3Bvb2wgPSBbXTtcbiAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBUaGlzIHJlY3Vyc2l2ZSBmdW5jdGlvbiB3aWxsIHJ1biB0aHJvdWdoIHRoZSBzY2VuZSBncmFwaCBhbmQgYWRkIGFueSBuZXcgYWNjZXNzaWJsZSBvYmplY3RzIHRvIHRoZSBET00gbGF5ZXIuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q29udGFpbmVyfSBjb250YWluZXIgLSBUaGUgQ29udGFpbmVyIHRvIGNoZWNrLlxuICAgKi9cbiAgX3VwZGF0ZUFjY2Vzc2libGVPYmplY3RzKGNvbnRhaW5lcikge1xuICAgIGlmICghY29udGFpbmVyLnZpc2libGUgfHwgIWNvbnRhaW5lci5hY2Nlc3NpYmxlQ2hpbGRyZW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lci5hY2Nlc3NpYmxlKSB7XG4gICAgICBpZiAoIWNvbnRhaW5lci5fYWNjZXNzaWJsZUFjdGl2ZSkge1xuICAgICAgICB0aGlzLl9hZGRDaGlsZChjb250YWluZXIpO1xuICAgICAgfVxuICAgICAgY29udGFpbmVyLl9yZW5kZXJJZCA9IHRoaXMuX3JlbmRlcklkO1xuICAgIH1cbiAgICBjb25zdCBjaGlsZHJlbiA9IGNvbnRhaW5lci5jaGlsZHJlbjtcbiAgICBpZiAoY2hpbGRyZW4pIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlQWNjZXNzaWJsZU9iamVjdHMoY2hpbGRyZW5baV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogUnVubmVyIGluaXQgY2FsbGVkLCB2aWV3IGlzIGF2YWlsYWJsZSBhdCB0aGlzIHBvaW50LlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBpbml0KG9wdGlvbnMpIHtcbiAgICBjb25zdCBkZWZhdWx0T3B0cyA9IF9BY2Nlc3NpYmlsaXR5U3lzdGVtLmRlZmF1bHRPcHRpb25zO1xuICAgIGNvbnN0IG1lcmdlZE9wdGlvbnMgPSB7XG4gICAgICBhY2Nlc3NpYmlsaXR5T3B0aW9uczoge1xuICAgICAgICAuLi5kZWZhdWx0T3B0cyxcbiAgICAgICAgLi4ub3B0aW9ucz8uYWNjZXNzaWJpbGl0eU9wdGlvbnMgfHwge31cbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuZGVidWcgPSBtZXJnZWRPcHRpb25zLmFjY2Vzc2liaWxpdHlPcHRpb25zLmRlYnVnO1xuICAgIHRoaXMuX2FjdGl2YXRlT25UYWIgPSBtZXJnZWRPcHRpb25zLmFjY2Vzc2liaWxpdHlPcHRpb25zLmFjdGl2YXRlT25UYWI7XG4gICAgdGhpcy5fZGVhY3RpdmF0ZU9uTW91c2VNb3ZlID0gbWVyZ2VkT3B0aW9ucy5hY2Nlc3NpYmlsaXR5T3B0aW9ucy5kZWFjdGl2YXRlT25Nb3VzZU1vdmU7XG4gICAgaWYgKG1lcmdlZE9wdGlvbnMuYWNjZXNzaWJpbGl0eU9wdGlvbnMuZW5hYmxlZEJ5RGVmYXVsdCkge1xuICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdGl2YXRlT25UYWIpIHtcbiAgICAgIHRoaXMuX29uS2V5RG93biA9IHRoaXMuX29uS2V5RG93bi5iaW5kKHRoaXMpO1xuICAgICAgZ2xvYmFsVGhpcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9vbktleURvd24sIGZhbHNlKTtcbiAgICB9XG4gICAgdGhpcy5fcmVuZGVyZXIucnVubmVycy5wb3N0cmVuZGVyLnJlbW92ZSh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgYWNjZXNzaWJpbGl0eSBsYXllciBkdXJpbmcgcmVuZGVyaW5nLlxuICAgKiAtIFJlbW92ZXMgZGl2cyBmb3IgY29udGFpbmVycyBubyBsb25nZXIgaW4gdGhlIHNjZW5lXG4gICAqIC0gVXBkYXRlcyB0aGUgcG9zaXRpb24gYW5kIGRpbWVuc2lvbnMgb2YgdGhlIHJvb3QgZGl2XG4gICAqIC0gVXBkYXRlcyBwb3NpdGlvbnMgb2YgYWN0aXZlIGFjY2Vzc2liaWxpdHkgZGl2c1xuICAgKiBPbmx5IGZpcmVzIHdoaWxlIHRoZSBhY2Nlc3NpYmlsaXR5IHN5c3RlbSBpcyBhY3RpdmUuXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHBvc3RyZW5kZXIoKSB7XG4gICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgaWYgKHRoaXMuX21vYmlsZUluZm8uYW5kcm9pZC5kZXZpY2UgJiYgbm93IDwgdGhpcy5fYW5kcm9pZFVwZGF0ZUNvdW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2FuZHJvaWRVcGRhdGVDb3VudCA9IG5vdyArIHRoaXMuX2FuZHJvaWRVcGRhdGVGcmVxdWVuY3k7XG4gICAgaWYgKCF0aGlzLl9yZW5kZXJlci5yZW5kZXJpbmdUb1NjcmVlbiB8fCAhdGhpcy5fcmVuZGVyZXIudmlldy5jYW52YXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgICBpZiAodGhpcy5fcmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkKSB7XG4gICAgICB0aGlzLl91cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyh0aGlzLl9yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQpO1xuICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLl9jaGlsZHJlbikge1xuICAgICAgICBpZiAoY2hpbGQuX3JlbmRlcklkID09PSB0aGlzLl9yZW5kZXJJZCkge1xuICAgICAgICAgIGFjdGl2ZUlkcy5hZGQodGhpcy5fY2hpbGRyZW4uaW5kZXhPZihjaGlsZCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSB0aGlzLl9jaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgY29uc3QgY2hpbGQgPSB0aGlzLl9jaGlsZHJlbltpXTtcbiAgICAgIGlmICghYWN0aXZlSWRzLmhhcyhpKSkge1xuICAgICAgICBpZiAoY2hpbGQuX2FjY2Vzc2libGVEaXYgJiYgY2hpbGQuX2FjY2Vzc2libGVEaXYucGFyZW50Tm9kZSkge1xuICAgICAgICAgIGNoaWxkLl9hY2Nlc3NpYmxlRGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQuX2FjY2Vzc2libGVEaXYpO1xuICAgICAgICAgIHRoaXMuX3Bvb2wucHVzaChjaGlsZC5fYWNjZXNzaWJsZURpdik7XG4gICAgICAgICAgY2hpbGQuX2FjY2Vzc2libGVEaXYgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNoaWxkLl9hY2Nlc3NpYmxlQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHJlbW92ZUl0ZW1zKHRoaXMuX2NoaWxkcmVuLCBpLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX3JlbmRlcmVyLnJlbmRlcmluZ1RvU2NyZWVuKSB7XG4gICAgICB0aGlzLl9jYW52YXNPYnNlcnZlci5lbnN1cmVBdHRhY2hlZCgpO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX2NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGlsZCA9IHRoaXMuX2NoaWxkcmVuW2ldO1xuICAgICAgaWYgKCFjaGlsZC5fYWNjZXNzaWJsZUFjdGl2ZSB8fCAhY2hpbGQuX2FjY2Vzc2libGVEaXYpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBkaXYgPSBjaGlsZC5fYWNjZXNzaWJsZURpdjtcbiAgICAgIGNvbnN0IGhpdEFyZWEgPSBjaGlsZC5oaXRBcmVhIHx8IGNoaWxkLmdldEJvdW5kcygpLnJlY3RhbmdsZTtcbiAgICAgIGlmIChjaGlsZC5oaXRBcmVhKSB7XG4gICAgICAgIGNvbnN0IHd0ID0gY2hpbGQud29ybGRUcmFuc2Zvcm07XG4gICAgICAgIGRpdi5zdHlsZS5sZWZ0ID0gYCR7d3QudHggKyBoaXRBcmVhLnggKiB3dC5hfXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLnRvcCA9IGAke3d0LnR5ICsgaGl0QXJlYS55ICogd3QuZH1weGA7XG4gICAgICAgIGRpdi5zdHlsZS53aWR0aCA9IGAke2hpdEFyZWEud2lkdGggKiB3dC5hfXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLmhlaWdodCA9IGAke2hpdEFyZWEuaGVpZ2h0ICogd3QuZH1weGA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9jYXBIaXRBcmVhKGhpdEFyZWEpO1xuICAgICAgICBkaXYuc3R5bGUubGVmdCA9IGAke2hpdEFyZWEueH1weGA7XG4gICAgICAgIGRpdi5zdHlsZS50b3AgPSBgJHtoaXRBcmVhLnl9cHhgO1xuICAgICAgICBkaXYuc3R5bGUud2lkdGggPSBgJHtoaXRBcmVhLndpZHRofXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLmhlaWdodCA9IGAke2hpdEFyZWEuaGVpZ2h0fXB4YDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fcmVuZGVySWQrKztcbiAgfVxuICAvKipcbiAgICogcHJpdmF0ZSBmdW5jdGlvbiB0aGF0IHdpbGwgdmlzdWFsbHkgYWRkIHRoZSBpbmZvcm1hdGlvbiB0byB0aGVcbiAgICogYWNjZXNzaWJpbGl0eSBkaXZcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZGl2IC1cbiAgICovXG4gIF91cGRhdGVEZWJ1Z0hUTUwoZGl2KSB7XG4gICAgZGl2LmlubmVySFRNTCA9IGB0eXBlOiAke2Rpdi50eXBlfTwvYnI+IHRpdGxlIDogJHtkaXYudGl0bGV9PC9icj4gdGFiSW5kZXg6ICR7ZGl2LnRhYkluZGV4fWA7XG4gIH1cbiAgLyoqXG4gICAqIEFkanVzdCB0aGUgaGl0IGFyZWEgYmFzZWQgb24gdGhlIGJvdW5kcyBvZiBhIGRpc3BsYXkgb2JqZWN0XG4gICAqIEBwYXJhbSB7UmVjdGFuZ2xlfSBoaXRBcmVhIC0gQm91bmRzIG9mIHRoZSBjaGlsZFxuICAgKi9cbiAgX2NhcEhpdEFyZWEoaGl0QXJlYSkge1xuICAgIGlmIChoaXRBcmVhLnggPCAwKSB7XG4gICAgICBoaXRBcmVhLndpZHRoICs9IGhpdEFyZWEueDtcbiAgICAgIGhpdEFyZWEueCA9IDA7XG4gICAgfVxuICAgIGlmIChoaXRBcmVhLnkgPCAwKSB7XG4gICAgICBoaXRBcmVhLmhlaWdodCArPSBoaXRBcmVhLnk7XG4gICAgICBoaXRBcmVhLnkgPSAwO1xuICAgIH1cbiAgICBjb25zdCB7IHdpZHRoOiB2aWV3V2lkdGgsIGhlaWdodDogdmlld0hlaWdodCB9ID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgaWYgKGhpdEFyZWEueCArIGhpdEFyZWEud2lkdGggPiB2aWV3V2lkdGgpIHtcbiAgICAgIGhpdEFyZWEud2lkdGggPSB2aWV3V2lkdGggLSBoaXRBcmVhLng7XG4gICAgfVxuICAgIGlmIChoaXRBcmVhLnkgKyBoaXRBcmVhLmhlaWdodCA+IHZpZXdIZWlnaHQpIHtcbiAgICAgIGhpdEFyZWEuaGVpZ2h0ID0gdmlld0hlaWdodCAtIGhpdEFyZWEueTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgb3IgcmV1c2VzIGEgZGl2IGVsZW1lbnQgZm9yIGEgQ29udGFpbmVyIGFuZCBhZGRzIGl0IHRvIHRoZSBhY2Nlc3NpYmlsaXR5IGxheWVyLlxuICAgKiBTZXRzIHVwIEFSSUEgYXR0cmlidXRlcywgZXZlbnQgbGlzdGVuZXJzLCBhbmQgcG9zaXRpb25pbmcgYmFzZWQgb24gdGhlIGNvbnRhaW5lcidzIHByb3BlcnRpZXMuXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Q29udGFpbmVyfSBjb250YWluZXIgLSBUaGUgY2hpbGQgdG8gbWFrZSBhY2Nlc3NpYmxlLlxuICAgKi9cbiAgX2FkZENoaWxkKGNvbnRhaW5lcikge1xuICAgIGxldCBkaXYgPSB0aGlzLl9wb29sLnBvcCgpO1xuICAgIGlmICghZGl2KSB7XG4gICAgICBpZiAoY29udGFpbmVyLmFjY2Vzc2libGVUeXBlID09PSBcImJ1dHRvblwiKSB7XG4gICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGNvbnRhaW5lci5hY2Nlc3NpYmxlVHlwZSk7XG4gICAgICAgIGRpdi5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC1tb3otdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgIGlmIChjb250YWluZXIuYWNjZXNzaWJsZVRleHQpIHtcbiAgICAgICAgICBkaXYuaW5uZXJUZXh0ID0gY29udGFpbmVyLmFjY2Vzc2libGVUZXh0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkaXYuc3R5bGUud2lkdGggPSBgJHtESVZfVE9VQ0hfU0laRX1weGA7XG4gICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7RElWX1RPVUNIX1NJWkV9cHhgO1xuICAgICAgZGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuZGVidWcgPyBcInJnYmEoMjU1LDI1NSwyNTUsMC41KVwiIDogXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgZGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgICAgZGl2LnN0eWxlLnpJbmRleCA9IERJVl9UT1VDSF9aSU5ERVgudG9TdHJpbmcoKTtcbiAgICAgIGRpdi5zdHlsZS5ib3JkZXJTdHlsZSA9IFwibm9uZVwiO1xuICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImNocm9tZVwiKSkge1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwib2ZmXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiLCBcInBvbGl0ZVwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9ydjouKkdlY2tvXFwvLykpIHtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtcmVsZXZhbnRcIiwgXCJhZGRpdGlvbnNcIik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKFwiYXJpYS1yZWxldmFudFwiLCBcInRleHRcIik7XG4gICAgICB9XG4gICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX29uQ2xpY2suYmluZCh0aGlzKSk7XG4gICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuX29uRm9jdXMuYmluZCh0aGlzKSk7XG4gICAgICBkaXYuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIHRoaXMuX29uRm9jdXNPdXQuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIGRpdi5zdHlsZS5wb2ludGVyRXZlbnRzID0gY29udGFpbmVyLmFjY2Vzc2libGVQb2ludGVyRXZlbnRzO1xuICAgIGRpdi50eXBlID0gY29udGFpbmVyLmFjY2Vzc2libGVUeXBlO1xuICAgIGlmIChjb250YWluZXIuYWNjZXNzaWJsZVRpdGxlICYmIGNvbnRhaW5lci5hY2Nlc3NpYmxlVGl0bGUgIT09IG51bGwpIHtcbiAgICAgIGRpdi50aXRsZSA9IGNvbnRhaW5lci5hY2Nlc3NpYmxlVGl0bGU7XG4gICAgfSBlbHNlIGlmICghY29udGFpbmVyLmFjY2Vzc2libGVIaW50IHx8IGNvbnRhaW5lci5hY2Nlc3NpYmxlSGludCA9PT0gbnVsbCkge1xuICAgICAgZGl2LnRpdGxlID0gYGNvbnRhaW5lciAke2NvbnRhaW5lci50YWJJbmRleH1gO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyLmFjY2Vzc2libGVIaW50ICYmIGNvbnRhaW5lci5hY2Nlc3NpYmxlSGludCAhPT0gbnVsbCkge1xuICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgY29udGFpbmVyLmFjY2Vzc2libGVIaW50KTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZURlYnVnSFRNTChkaXYpO1xuICAgIH1cbiAgICBjb250YWluZXIuX2FjY2Vzc2libGVBY3RpdmUgPSB0cnVlO1xuICAgIGNvbnRhaW5lci5fYWNjZXNzaWJsZURpdiA9IGRpdjtcbiAgICBkaXYuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuX2NoaWxkcmVuLnB1c2goY29udGFpbmVyKTtcbiAgICB0aGlzLl9kaXYuYXBwZW5kQ2hpbGQoY29udGFpbmVyLl9hY2Nlc3NpYmxlRGl2KTtcbiAgICBpZiAoY29udGFpbmVyLmludGVyYWN0aXZlKSB7XG4gICAgICBjb250YWluZXIuX2FjY2Vzc2libGVEaXYudGFiSW5kZXggPSBjb250YWluZXIudGFiSW5kZXg7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBEaXNwYXRjaCBldmVudHMgd2l0aCB0aGUgRXZlbnRTeXN0ZW0uXG4gICAqIEBwYXJhbSBlXG4gICAqIEBwYXJhbSB0eXBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGlzcGF0Y2hFdmVudChlLCB0eXBlKSB7XG4gICAgY29uc3QgeyBjb250YWluZXI6IHRhcmdldCB9ID0gZS50YXJnZXQ7XG4gICAgY29uc3QgYm91bmRhcnkgPSB0aGlzLl9yZW5kZXJlci5ldmVudHMucm9vdEJvdW5kYXJ5O1xuICAgIGNvbnN0IGV2ZW50ID0gT2JqZWN0LmFzc2lnbihuZXcgRmVkZXJhdGVkRXZlbnQoYm91bmRhcnkpLCB7IHRhcmdldCB9KTtcbiAgICBib3VuZGFyeS5yb290VGFyZ2V0ID0gdGhpcy5fcmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkO1xuICAgIHR5cGUuZm9yRWFjaCgodHlwZTIpID0+IGJvdW5kYXJ5LmRpc3BhdGNoRXZlbnQoZXZlbnQsIHR5cGUyKSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIGRpdiBidXR0b24gcHJlc3MgdG8gcGl4aSdzIEV2ZW50U3lzdGVtIChjbGljaylcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlIC0gVGhlIGNsaWNrIGV2ZW50LlxuICAgKi9cbiAgX29uQ2xpY2soZSkge1xuICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZSwgW1wiY2xpY2tcIiwgXCJwb2ludGVydGFwXCIsIFwidGFwXCJdKTtcbiAgfVxuICAvKipcbiAgICogTWFwcyB0aGUgZGl2IGZvY3VzIGV2ZW50cyB0byBwaXhpJ3MgRXZlbnRTeXN0ZW0gKG1vdXNlb3ZlcilcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGb2N1c0V2ZW50fSBlIC0gVGhlIGZvY3VzIGV2ZW50LlxuICAgKi9cbiAgX29uRm9jdXMoZSkge1xuICAgIGlmICghZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIpKSB7XG4gICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJhc3NlcnRpdmVcIik7XG4gICAgfVxuICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZSwgW1wibW91c2VvdmVyXCJdKTtcbiAgfVxuICAvKipcbiAgICogTWFwcyB0aGUgZGl2IGZvY3VzIGV2ZW50cyB0byBwaXhpJ3MgRXZlbnRTeXN0ZW0gKG1vdXNlb3V0KVxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0ZvY3VzRXZlbnR9IGUgLSBUaGUgZm9jdXNvdXQgZXZlbnQuXG4gICAqL1xuICBfb25Gb2N1c091dChlKSB7XG4gICAgaWYgKCFlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIikpIHtcbiAgICAgIGUudGFyZ2V0LnNldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiLCBcInBvbGl0ZVwiKTtcbiAgICB9XG4gICAgdGhpcy5fZGlzcGF0Y2hFdmVudChlLCBbXCJtb3VzZW91dFwiXSk7XG4gIH1cbiAgLyoqXG4gICAqIElzIGNhbGxlZCB3aGVuIGEga2V5IGlzIHByZXNzZWRcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBlIC0gVGhlIGtleWRvd24gZXZlbnQuXG4gICAqL1xuICBfb25LZXlEb3duKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlICE9PSBLRVlfQ09ERV9UQUIgfHwgIXRoaXMuX2FjdGl2YXRlT25UYWIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fYWN0aXZhdGUoKTtcbiAgfVxuICAvKipcbiAgICogSXMgY2FsbGVkIHdoZW4gdGhlIG1vdXNlIG1vdmVzIGFjcm9zcyB0aGUgcmVuZGVyZXIgZWxlbWVudFxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGUgLSBUaGUgbW91c2UgZXZlbnQuXG4gICAqL1xuICBfb25Nb3VzZU1vdmUoZSkge1xuICAgIGlmIChlLm1vdmVtZW50WCA9PT0gMCAmJiBlLm1vdmVtZW50WSA9PT0gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIERlc3Ryb3lzIHRoZSBhY2Nlc3NpYmlsaXR5IHN5c3RlbS4gUmVtb3ZlcyBhbGwgZWxlbWVudHMgYW5kIGxpc3RlbmVycy5cbiAgICogPiBbIUlNUE9SVEFOVF0gVGhpcyBpcyB0eXBpY2FsbHkgY2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB0aGUge0BsaW5rIEFwcGxpY2F0aW9ufSBpcyBkZXN0cm95ZWQuXG4gICAqID4gQSB0eXBpY2FsbHkgdXNlciBzaG91bGQgbm90IG5lZWQgdG8gY2FsbCB0aGlzIG1ldGhvZCBkaXJlY3RseS5cbiAgICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICAgIHRoaXMuX2Rlc3Ryb3lUb3VjaEhvb2soKTtcbiAgICB0aGlzLl9jYW52YXNPYnNlcnZlcj8uZGVzdHJveSgpO1xuICAgIHRoaXMuX2NhbnZhc09ic2VydmVyID0gbnVsbDtcbiAgICB0aGlzLl9kaXYgPSBudWxsO1xuICAgIHRoaXMuX3Bvb2wgPSBudWxsO1xuICAgIHRoaXMuX2NoaWxkcmVuID0gbnVsbDtcbiAgICB0aGlzLl9yZW5kZXJlciA9IG51bGw7XG4gICAgaWYgKHRoaXMuX2FjdGl2YXRlT25UYWIpIHtcbiAgICAgIGdsb2JhbFRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fb25LZXlEb3duKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEVuYWJsZXMgb3IgZGlzYWJsZXMgdGhlIGFjY2Vzc2liaWxpdHkgc3lzdGVtLlxuICAgKiBAcGFyYW0gZW5hYmxlZCAtIFdoZXRoZXIgdG8gZW5hYmxlIG9yIGRpc2FibGUgYWNjZXNzaWJpbGl0eS5cbiAgICogQGV4YW1wbGVcbiAgICogYGBganNcbiAgICogYXBwLnJlbmRlcmVyLmFjY2Vzc2liaWxpdHkuc2V0QWNjZXNzaWJpbGl0eUVuYWJsZWQodHJ1ZSk7IC8vIEVuYWJsZSBhY2Nlc3NpYmlsaXR5XG4gICAqIGFwcC5yZW5kZXJlci5hY2Nlc3NpYmlsaXR5LnNldEFjY2Vzc2liaWxpdHlFbmFibGVkKGZhbHNlKTsgLy8gRGlzYWJsZSBhY2Nlc3NpYmlsaXR5XG4gICAqIGBgYFxuICAgKi9cbiAgc2V0QWNjZXNzaWJpbGl0eUVuYWJsZWQoZW5hYmxlZCkge1xuICAgIGlmIChlbmFibGVkKSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9kZWFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG59O1xuLyoqIEBpZ25vcmUgKi9cbl9BY2Nlc3NpYmlsaXR5U3lzdGVtLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xTeXN0ZW0sXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVTeXN0ZW1cbiAgXSxcbiAgbmFtZTogXCJhY2Nlc3NpYmlsaXR5XCJcbn07XG4vKipcbiAqIFRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgc3lzdGVtLlxuICogWW91IGNhbiBzZXQgdGhlc2UgYmVmb3JlIGluaXRpYWxpemluZyB0aGUge0BsaW5rIEFwcGxpY2F0aW9ufSB0byBjaGFuZ2UgdGhlIGRlZmF1bHQgYmVoYXZpb3IuXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIGltcG9ydCB7IEFjY2Vzc2liaWxpdHlTeXN0ZW0gfSBmcm9tICdwaXhpLmpzJztcbiAqXG4gKiBBY2Nlc3NpYmlsaXR5U3lzdGVtLmRlZmF1bHRPcHRpb25zLmVuYWJsZWRCeURlZmF1bHQgPSB0cnVlO1xuICpcbiAqIGNvbnN0IGFwcCA9IG5ldyBBcHBsaWNhdGlvbigpXG4gKiBhcHAuaW5pdCgpXG4gKiBgYGBcbiAqL1xuX0FjY2Vzc2liaWxpdHlTeXN0ZW0uZGVmYXVsdE9wdGlvbnMgPSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGVuYWJsZSBhY2Nlc3NpYmlsaXR5IGZlYXR1cmVzIG9uIGluaXRpYWxpemF0aW9uXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBlbmFibGVkQnlEZWZhdWx0OiBmYWxzZSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gdmlzdWFsbHkgc2hvdyB0aGUgYWNjZXNzaWJpbGl0eSBkaXZzIGZvciBkZWJ1Z2dpbmdcbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGRlYnVnOiBmYWxzZSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gYWN0aXZhdGUgYWNjZXNzaWJpbGl0eSB3aGVuIHRhYiBrZXkgaXMgcHJlc3NlZFxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBhY3RpdmF0ZU9uVGFiOiB0cnVlLFxuICAvKipcbiAgICogV2hldGhlciB0byBkZWFjdGl2YXRlIGFjY2Vzc2liaWxpdHkgd2hlbiBtb3VzZSBtb3Zlc1xuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuICBkZWFjdGl2YXRlT25Nb3VzZU1vdmU6IHRydWVcbn07XG5sZXQgQWNjZXNzaWJpbGl0eVN5c3RlbSA9IF9BY2Nlc3NpYmlsaXR5U3lzdGVtO1xuXG5leHBvcnQgeyBBY2Nlc3NpYmlsaXR5U3lzdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BY2Nlc3NpYmlsaXR5U3lzdGVtLm1qcy5tYXBcbiIsImltcG9ydCB7IGV4dGVuc2lvbnMgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4uL3NjZW5lL2NvbnRhaW5lci9Db250YWluZXIubWpzJztcbmltcG9ydCB7IEFjY2Vzc2liaWxpdHlTeXN0ZW0gfSBmcm9tICcuL0FjY2Vzc2liaWxpdHlTeXN0ZW0ubWpzJztcbmltcG9ydCB7IGFjY2Vzc2liaWxpdHlUYXJnZXQgfSBmcm9tICcuL2FjY2Vzc2liaWxpdHlUYXJnZXQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5leHRlbnNpb25zLmFkZChBY2Nlc3NpYmlsaXR5U3lzdGVtKTtcbmV4dGVuc2lvbnMubWl4aW4oQ29udGFpbmVyLCBhY2Nlc3NpYmlsaXR5VGFyZ2V0KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluaXQubWpzLm1hcFxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBhY2Nlc3NpYmlsaXR5VGFyZ2V0ID0ge1xuICBhY2Nlc3NpYmxlOiBmYWxzZSxcbiAgYWNjZXNzaWJsZVRpdGxlOiBudWxsLFxuICBhY2Nlc3NpYmxlSGludDogbnVsbCxcbiAgdGFiSW5kZXg6IDAsXG4gIGFjY2Vzc2libGVUeXBlOiBcImJ1dHRvblwiLFxuICBhY2Nlc3NpYmxlVGV4dDogbnVsbCxcbiAgYWNjZXNzaWJsZVBvaW50ZXJFdmVudHM6IFwiYXV0b1wiLFxuICBhY2Nlc3NpYmxlQ2hpbGRyZW46IHRydWUsXG4gIF9hY2Nlc3NpYmxlQWN0aXZlOiBmYWxzZSxcbiAgX2FjY2Vzc2libGVEaXY6IG51bGwsXG4gIF9yZW5kZXJJZDogLTFcbn07XG5cbmV4cG9ydCB7IGFjY2Vzc2liaWxpdHlUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFjY2Vzc2liaWxpdHlUYXJnZXQubWpzLm1hcFxuIiwiaW1wb3J0IHsgVVBEQVRFX1BSSU9SSVRZIH0gZnJvbSAnLi4vdGlja2VyL2NvbnN0Lm1qcyc7XG5pbXBvcnQgeyBUaWNrZXIgfSBmcm9tICcuLi90aWNrZXIvVGlja2VyLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY2xhc3MgRXZlbnRzVGlja2VyQ2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogVGhlIGZyZXF1ZW5jeSB0aGF0IGZha2UgZXZlbnRzIHdpbGwgYmUgZmlyZWQuICovXG4gICAgdGhpcy5pbnRlcmFjdGlvbkZyZXF1ZW5jeSA9IDEwO1xuICAgIHRoaXMuX2RlbHRhVGltZSA9IDA7XG4gICAgdGhpcy5fZGlkTW92ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3RpY2tlckFkZGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcGF1c2VVcGRhdGUgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgZXZlbnQgdGlja2VyLlxuICAgKiBAcGFyYW0gZXZlbnRzIC0gVGhlIGV2ZW50IHN5c3RlbS5cbiAgICovXG4gIGluaXQoZXZlbnRzKSB7XG4gICAgdGhpcy5yZW1vdmVUaWNrZXJMaXN0ZW5lcigpO1xuICAgIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xuICAgIHRoaXMuaW50ZXJhY3Rpb25GcmVxdWVuY3kgPSAxMDtcbiAgICB0aGlzLl9kZWx0YVRpbWUgPSAwO1xuICAgIHRoaXMuX2RpZE1vdmUgPSBmYWxzZTtcbiAgICB0aGlzLl90aWNrZXJBZGRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3BhdXNlVXBkYXRlID0gdHJ1ZTtcbiAgfVxuICAvKiogV2hldGhlciB0byBwYXVzZSB0aGUgdXBkYXRlIGNoZWNrcyBvciBub3QuICovXG4gIGdldCBwYXVzZVVwZGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fcGF1c2VVcGRhdGU7XG4gIH1cbiAgc2V0IHBhdXNlVXBkYXRlKHBhdXNlZCkge1xuICAgIHRoaXMuX3BhdXNlVXBkYXRlID0gcGF1c2VkO1xuICB9XG4gIC8qKiBBZGRzIHRoZSB0aWNrZXIgbGlzdGVuZXIuICovXG4gIGFkZFRpY2tlckxpc3RlbmVyKCkge1xuICAgIGlmICh0aGlzLl90aWNrZXJBZGRlZCB8fCAhdGhpcy5kb21FbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFRpY2tlci5zeXN0ZW0uYWRkKHRoaXMuX3RpY2tlclVwZGF0ZSwgdGhpcywgVVBEQVRFX1BSSU9SSVRZLklOVEVSQUNUSU9OKTtcbiAgICB0aGlzLl90aWNrZXJBZGRlZCA9IHRydWU7XG4gIH1cbiAgLyoqIFJlbW92ZXMgdGhlIHRpY2tlciBsaXN0ZW5lci4gKi9cbiAgcmVtb3ZlVGlja2VyTGlzdGVuZXIoKSB7XG4gICAgaWYgKCF0aGlzLl90aWNrZXJBZGRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBUaWNrZXIuc3lzdGVtLnJlbW92ZSh0aGlzLl90aWNrZXJVcGRhdGUsIHRoaXMpO1xuICAgIHRoaXMuX3RpY2tlckFkZGVkID0gZmFsc2U7XG4gIH1cbiAgLyoqIFNldHMgZmxhZyB0byBub3QgZmlyZSBleHRyYSBldmVudHMgd2hlbiB0aGUgdXNlciBoYXMgYWxyZWFkeSBtb3ZlZCB0aGVyZSBtb3VzZSAqL1xuICBwb2ludGVyTW92ZWQoKSB7XG4gICAgdGhpcy5fZGlkTW92ZSA9IHRydWU7XG4gIH1cbiAgLyoqIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIGludGVyYWN0aXZlIG9iamVjdHMuICovXG4gIF91cGRhdGUoKSB7XG4gICAgaWYgKCF0aGlzLmRvbUVsZW1lbnQgfHwgdGhpcy5fcGF1c2VVcGRhdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX2RpZE1vdmUpIHtcbiAgICAgIHRoaXMuX2RpZE1vdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgcm9vdFBvaW50ZXJFdmVudCA9IHRoaXMuZXZlbnRzW1wiX3Jvb3RQb2ludGVyRXZlbnRcIl07XG4gICAgaWYgKHRoaXMuZXZlbnRzLnN1cHBvcnRzVG91Y2hFdmVudHMgJiYgcm9vdFBvaW50ZXJFdmVudC5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQuZGlzcGF0Y2hFdmVudCh0aGlzLmV2ZW50cy5zdXBwb3J0c1BvaW50ZXJFdmVudHMgPyBuZXcgUG9pbnRlckV2ZW50KFwicG9pbnRlcm1vdmVcIiwge1xuICAgICAgY2xpZW50WDogcm9vdFBvaW50ZXJFdmVudC5jbGllbnRYLFxuICAgICAgY2xpZW50WTogcm9vdFBvaW50ZXJFdmVudC5jbGllbnRZLFxuICAgICAgcG9pbnRlclR5cGU6IHJvb3RQb2ludGVyRXZlbnQucG9pbnRlclR5cGUsXG4gICAgICBwb2ludGVySWQ6IHJvb3RQb2ludGVyRXZlbnQucG9pbnRlcklkXG4gICAgfSkgOiBuZXcgTW91c2VFdmVudChcIm1vdXNlbW92ZVwiLCB7XG4gICAgICBjbGllbnRYOiByb290UG9pbnRlckV2ZW50LmNsaWVudFgsXG4gICAgICBjbGllbnRZOiByb290UG9pbnRlckV2ZW50LmNsaWVudFlcbiAgICB9KSk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHN0YXRlIG9mIGludGVyYWN0aXZlIG9iamVjdHMgaWYgYXQgbGVhc3Qge0BsaW5rIGludGVyYWN0aW9uRnJlcXVlbmN5fVxuICAgKiBtaWxsaXNlY29uZHMgaGF2ZSBwYXNzZWQgc2luY2UgdGhlIGxhc3QgaW52b2NhdGlvbi5cbiAgICpcbiAgICogSW52b2tlZCBieSBhIHRocm90dGxlZCB0aWNrZXIgdXBkYXRlIGZyb20ge0BsaW5rIFRpY2tlci5zeXN0ZW19LlxuICAgKiBAcGFyYW0gdGlja2VyIC0gVGhlIHRocm90dGxlZCB0aWNrZXIuXG4gICAqL1xuICBfdGlja2VyVXBkYXRlKHRpY2tlcikge1xuICAgIHRoaXMuX2RlbHRhVGltZSArPSB0aWNrZXIuZGVsdGFUaW1lO1xuICAgIGlmICh0aGlzLl9kZWx0YVRpbWUgPCB0aGlzLmludGVyYWN0aW9uRnJlcXVlbmN5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2RlbHRhVGltZSA9IDA7XG4gICAgdGhpcy5fdXBkYXRlKCk7XG4gIH1cbn1cbmNvbnN0IEV2ZW50c1RpY2tlciA9IG5ldyBFdmVudHNUaWNrZXJDbGFzcygpO1xuXG5leHBvcnQgeyBFdmVudHNUaWNrZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50VGlja2VyLm1qcy5tYXBcbiIsImltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vbWF0aHMvcG9pbnQvUG9pbnQubWpzJztcbmltcG9ydCB7IEZlZGVyYXRlZEV2ZW50IH0gZnJvbSAnLi9GZWRlcmF0ZWRFdmVudC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIEZlZGVyYXRlZE1vdXNlRXZlbnQgZXh0ZW5kcyBGZWRlcmF0ZWRFdmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgLyoqIFRoZSBjb29yZGluYXRlcyBvZiB0aGUgbW91c2UgZXZlbnQgcmVsYXRpdmUgdG8gdGhlIGNhbnZhcy4gKi9cbiAgICB0aGlzLmNsaWVudCA9IG5ldyBQb2ludCgpO1xuICAgIC8qKiBUaGUgbW92ZW1lbnQgaW4gdGhpcyBwb2ludGVyIHJlbGF0aXZlIHRvIHRoZSBsYXN0IGBtb3VzZW1vdmVgIGV2ZW50LiAqL1xuICAgIHRoaXMubW92ZW1lbnQgPSBuZXcgUG9pbnQoKTtcbiAgICAvKiogVGhlIG9mZnNldCBvZiB0aGUgcG9pbnRlciBjb29yZGluYXRlcyB3LnIudC4gdGFyZ2V0IENvbnRhaW5lciBpbiB3b3JsZCBzcGFjZS4gVGhpcyBpcyBub3Qgc3VwcG9ydGVkIGF0IHRoZSBtb21lbnQuICovXG4gICAgdGhpcy5vZmZzZXQgPSBuZXcgUG9pbnQoKTtcbiAgICAvKiogVGhlIHBvaW50ZXIgY29vcmRpbmF0ZXMgaW4gd29ybGQgc3BhY2UuICovXG4gICAgdGhpcy5nbG9iYWwgPSBuZXcgUG9pbnQoKTtcbiAgICAvKipcbiAgICAgKiBUaGUgcG9pbnRlciBjb29yZGluYXRlcyBpbiB0aGUgcmVuZGVyZXIncyB7QGxpbmsgQWJzdHJhY3RSZW5kZXJlci5zY3JlZW4gc2NyZWVufS4gVGhpcyBoYXMgc2xpZ2h0bHlcbiAgICAgKiBkaWZmZXJlbnQgc2VtYW50aWNzIHRoYW4gbmF0aXZlIFBvaW50ZXJFdmVudCBzY3JlZW5YL3NjcmVlblkuXG4gICAgICovXG4gICAgdGhpcy5zY3JlZW4gPSBuZXcgUG9pbnQoKTtcbiAgfVxuICAvKiogQHJlYWRvbmx5ICovXG4gIGdldCBjbGllbnRYKCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudC54O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGNsaWVudFkoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50Lnk7XG4gIH1cbiAgLyoqXG4gICAqIEFsaWFzIGZvciB7QGxpbmsgRmVkZXJhdGVkTW91c2VFdmVudC5jbGllbnRYIHRoaXMuY2xpZW50WH0uXG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2V0IHgoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50WDtcbiAgfVxuICAvKipcbiAgICogQWxpYXMgZm9yIHtAbGluayBGZWRlcmF0ZWRNb3VzZUV2ZW50LmNsaWVudFkgdGhpcy5jbGllbnRZfS5cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgeSgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRZO1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IG1vdmVtZW50WCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3ZlbWVudC54O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IG1vdmVtZW50WSgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3ZlbWVudC55O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IG9mZnNldFgoKSB7XG4gICAgcmV0dXJuIHRoaXMub2Zmc2V0Lng7XG4gIH1cbiAgLyoqIEByZWFkb25seSAqL1xuICBnZXQgb2Zmc2V0WSgpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXQueTtcbiAgfVxuICAvKiogQHJlYWRvbmx5ICovXG4gIGdldCBnbG9iYWxYKCkge1xuICAgIHJldHVybiB0aGlzLmdsb2JhbC54O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGdsb2JhbFkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2xvYmFsLnk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBwb2ludGVyIGNvb3JkaW5hdGVzIGluIHRoZSByZW5kZXJlcidzIHNjcmVlbi4gQWxpYXMgZm9yIGBzY3JlZW4ueGAuXG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2V0IHNjcmVlblgoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NyZWVuLng7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBwb2ludGVyIGNvb3JkaW5hdGVzIGluIHRoZSByZW5kZXJlcidzIHNjcmVlbi4gQWxpYXMgZm9yIGBzY3JlZW4ueWAuXG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2V0IHNjcmVlblkoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2NyZWVuLnk7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnRzIGdsb2JhbCBjb29yZGluYXRlcyBpbnRvIGNvbnRhaW5lci1sb2NhbCBjb29yZGluYXRlcy5cbiAgICpcbiAgICogVGhpcyBtZXRob2QgdHJhbnNmb3JtcyBjb29yZGluYXRlcyBmcm9tIHdvcmxkIHNwYWNlIHRvIGEgY29udGFpbmVyJ3MgbG9jYWwgc3BhY2UsXG4gICAqIHVzZWZ1bCBmb3IgcHJlY2lzZSBwb3NpdGlvbmluZyBhbmQgaGl0IHRlc3RpbmcuXG4gICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgQ29udGFpbmVyIHRvIGdldCBsb2NhbCBjb29yZGluYXRlcyBmb3JcbiAgICogQHBhcmFtIHBvaW50IC0gT3B0aW9uYWwgUG9pbnQgb2JqZWN0IHRvIHN0b3JlIHRoZSByZXN1bHQuIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgUG9pbnQgd2lsbCBiZSBjcmVhdGVkXG4gICAqIEBwYXJhbSBnbG9iYWxQb3MgLSBPcHRpb25hbCBjdXN0b20gZ2xvYmFsIGNvb3JkaW5hdGVzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBldmVudCdzIGdsb2JhbCBwb3NpdGlvbiBpcyB1c2VkXG4gICAqIEByZXR1cm5zIFRoZSBsb2NhbCBjb29yZGluYXRlcyBhcyBhIFBvaW50IG9iamVjdFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiAvLyBCYXNpYyB1c2FnZSAtIGdldCBsb2NhbCBjb29yZGluYXRlcyByZWxhdGl2ZSB0byBhIGNvbnRhaW5lclxuICAgKiBzcHJpdGUub24oJ3BvaW50ZXJtb3ZlJywgKGV2ZW50OiBGZWRlcmF0ZWRNb3VzZUV2ZW50KSA9PiB7XG4gICAqICAgICAvLyBHZXQgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIHNwcml0ZVxuICAgKiAgICAgY29uc3QgbG9jYWxQb3MgPSBldmVudC5nZXRMb2NhbFBvc2l0aW9uKHNwcml0ZSk7XG4gICAqICAgICBjb25zb2xlLmxvZygnTG9jYWwgcG9zaXRpb246JywgbG9jYWxQb3MueCwgbG9jYWxQb3MueSk7XG4gICAqIH0pO1xuICAgKiAvLyBVc2luZyBjdXN0b20gZ2xvYmFsIGNvb3JkaW5hdGVzXG4gICAqIGNvbnN0IGN1c3RvbUdsb2JhbCA9IG5ldyBQb2ludCgxMDAsIDEwMCk7XG4gICAqIHNwcml0ZS5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQ6IEZlZGVyYXRlZE1vdXNlRXZlbnQpID0+IHtcbiAgICogICAgIC8vIFRyYW5zZm9ybSBjdXN0b20gY29vcmRpbmF0ZXNcbiAgICogICAgIGNvbnN0IGxvY2FsUG9zID0gZXZlbnQuZ2V0TG9jYWxQb3NpdGlvbihzcHJpdGUsIHVuZGVmaW5lZCwgY3VzdG9tR2xvYmFsKTtcbiAgICogICAgIGNvbnNvbGUubG9nKCdDdXN0b20gbG9jYWwgcG9zaXRpb246JywgbG9jYWxQb3MueCwgbG9jYWxQb3MueSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICogQHNlZSB7QGxpbmsgQ29udGFpbmVyLndvcmxkVHJhbnNmb3JtfSBGb3IgdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuICAgKiBAc2VlIHtAbGluayBQb2ludH0gRm9yIHRoZSBwb2ludCBjbGFzcyB1c2VkIHRvIHN0b3JlIGNvb3JkaW5hdGVzXG4gICAqL1xuICBnZXRMb2NhbFBvc2l0aW9uKGNvbnRhaW5lciwgcG9pbnQsIGdsb2JhbFBvcykge1xuICAgIHJldHVybiBjb250YWluZXIud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKGdsb2JhbFBvcyB8fCB0aGlzLmdsb2JhbCwgcG9pbnQpO1xuICB9XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBtb2RpZmllciBrZXkgd2FzIHByZXNzZWQgd2hlbiB0aGlzIGV2ZW50IG5hdGl2ZWx5IG9jY3VycmVkLlxuICAgKiBAcGFyYW0ga2V5IC0gVGhlIG1vZGlmaWVyIGtleS5cbiAgICovXG4gIGdldE1vZGlmaWVyU3RhdGUoa2V5KSB7XG4gICAgcmV0dXJuIFwiZ2V0TW9kaWZpZXJTdGF0ZVwiIGluIHRoaXMubmF0aXZlRXZlbnQgJiYgdGhpcy5uYXRpdmVFdmVudC5nZXRNb2RpZmllclN0YXRlKGtleSk7XG4gIH1cbiAgLyoqXG4gICAqIE5vdCBzdXBwb3J0ZWQuXG4gICAqIEBwYXJhbSBfdHlwZUFyZ1xuICAgKiBAcGFyYW0gX2NhbkJ1YmJsZUFyZ1xuICAgKiBAcGFyYW0gX2NhbmNlbGFibGVBcmdcbiAgICogQHBhcmFtIF92aWV3QXJnXG4gICAqIEBwYXJhbSBfZGV0YWlsQXJnXG4gICAqIEBwYXJhbSBfc2NyZWVuWEFyZ1xuICAgKiBAcGFyYW0gX3NjcmVlbllBcmdcbiAgICogQHBhcmFtIF9jbGllbnRYQXJnXG4gICAqIEBwYXJhbSBfY2xpZW50WUFyZ1xuICAgKiBAcGFyYW0gX2N0cmxLZXlBcmdcbiAgICogQHBhcmFtIF9hbHRLZXlBcmdcbiAgICogQHBhcmFtIF9zaGlmdEtleUFyZ1xuICAgKiBAcGFyYW0gX21ldGFLZXlBcmdcbiAgICogQHBhcmFtIF9idXR0b25BcmdcbiAgICogQHBhcmFtIF9yZWxhdGVkVGFyZ2V0QXJnXG4gICAqIEBkZXByZWNhdGVkIHNpbmNlIDcuMC4wXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtcGFyYW1zXG4gIGluaXRNb3VzZUV2ZW50KF90eXBlQXJnLCBfY2FuQnViYmxlQXJnLCBfY2FuY2VsYWJsZUFyZywgX3ZpZXdBcmcsIF9kZXRhaWxBcmcsIF9zY3JlZW5YQXJnLCBfc2NyZWVuWUFyZywgX2NsaWVudFhBcmcsIF9jbGllbnRZQXJnLCBfY3RybEtleUFyZywgX2FsdEtleUFyZywgX3NoaWZ0S2V5QXJnLCBfbWV0YUtleUFyZywgX2J1dHRvbkFyZywgX3JlbGF0ZWRUYXJnZXRBcmcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgfVxufVxuXG5leHBvcnQgeyBGZWRlcmF0ZWRNb3VzZUV2ZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GZWRlcmF0ZWRNb3VzZUV2ZW50Lm1qcy5tYXBcbiIsImltcG9ydCB7IEZlZGVyYXRlZE1vdXNlRXZlbnQgfSBmcm9tICcuL0ZlZGVyYXRlZE1vdXNlRXZlbnQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBGZWRlcmF0ZWRQb2ludGVyRXZlbnQgZXh0ZW5kcyBGZWRlcmF0ZWRNb3VzZUV2ZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAvKipcbiAgICAgKiBUaGUgd2lkdGggb2YgdGhlIHBvaW50ZXIncyBjb250YWN0IGFsb25nIHRoZSB4LWF4aXMsIG1lYXN1cmVkIGluIENTUyBwaXhlbHMuXG4gICAgICogcmFkaXVzWCBvZiBUb3VjaEV2ZW50cyB3aWxsIGJlIHJlcHJlc2VudGVkIGJ5IHRoaXMgdmFsdWUuXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUG9pbnRlckV2ZW50L3dpZHRoXG4gICAgICovXG4gICAgdGhpcy53aWR0aCA9IDA7XG4gICAgLyoqXG4gICAgICogVGhlIGhlaWdodCBvZiB0aGUgcG9pbnRlcidzIGNvbnRhY3QgYWxvbmcgdGhlIHktYXhpcywgbWVhc3VyZWQgaW4gQ1NTIHBpeGVscy5cbiAgICAgKiByYWRpdXNZIG9mIFRvdWNoRXZlbnRzIHdpbGwgYmUgcmVwcmVzZW50ZWQgYnkgdGhpcyB2YWx1ZS5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyRXZlbnQvaGVpZ2h0XG4gICAgICovXG4gICAgdGhpcy5oZWlnaHQgPSAwO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIG9yIG5vdCB0aGUgcG9pbnRlciBkZXZpY2UgdGhhdCBjcmVhdGVkIHRoZSBldmVudCBpcyB0aGUgcHJpbWFyeSBwb2ludGVyLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BvaW50ZXJFdmVudC9pc1ByaW1hcnlcbiAgICAgKi9cbiAgICB0aGlzLmlzUHJpbWFyeSA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBPbmx5IGluY2x1ZGVkIGZvciBjb21wbGV0ZW5lc3MgZm9yIG5vd1xuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXRDb2FsZXNjZWRFdmVudHMoKSB7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gXCJwb2ludGVybW92ZVwiIHx8IHRoaXMudHlwZSA9PT0gXCJtb3VzZW1vdmVcIiB8fCB0aGlzLnR5cGUgPT09IFwidG91Y2htb3ZlXCIpIHtcbiAgICAgIHJldHVybiBbdGhpc107XG4gICAgfVxuICAgIHJldHVybiBbXTtcbiAgfVxuICAvKipcbiAgICogT25seSBpbmNsdWRlZCBmb3IgY29tcGxldGVuZXNzIGZvciBub3dcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgZ2V0UHJlZGljdGVkRXZlbnRzKCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImdldFByZWRpY3RlZEV2ZW50cyBpcyBub3Qgc3VwcG9ydGVkIVwiKTtcbiAgfVxufVxuXG5leHBvcnQgeyBGZWRlcmF0ZWRQb2ludGVyRXZlbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlZGVyYXRlZFBvaW50ZXJFdmVudC5tanMubWFwXG4iLCJpbXBvcnQgeyBGZWRlcmF0ZWRNb3VzZUV2ZW50IH0gZnJvbSAnLi9GZWRlcmF0ZWRNb3VzZUV2ZW50Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY2xhc3MgRmVkZXJhdGVkV2hlZWxFdmVudCBleHRlbmRzIEZlZGVyYXRlZE1vdXNlRXZlbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIC8qKlxuICAgICAqIFVuaXRzIHNwZWNpZmllZCBpbiBwaXhlbHMuXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHRoaXMuRE9NX0RFTFRBX1BJWEVMID0gMDtcbiAgICAvKipcbiAgICAgKiBVbml0cyBzcGVjaWZpZWQgaW4gbGluZXMuXG4gICAgICogQGlnbm9yZVxuICAgICAqL1xuICAgIHRoaXMuRE9NX0RFTFRBX0xJTkUgPSAxO1xuICAgIC8qKlxuICAgICAqIFVuaXRzIHNwZWNpZmllZCBpbiBwYWdlcy5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdGhpcy5ET01fREVMVEFfUEFHRSA9IDI7XG4gIH1cbn1cbi8qKlxuICogVW5pdHMgc3BlY2lmaWVkIGluIHBpeGVscy5cbiAqIEBpZ25vcmVcbiAqL1xuRmVkZXJhdGVkV2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwgPSAwO1xuLyoqXG4gKiBVbml0cyBzcGVjaWZpZWQgaW4gbGluZXMuXG4gKiBAaWdub3JlXG4gKi9cbkZlZGVyYXRlZFdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkUgPSAxO1xuLyoqXG4gKiBVbml0cyBzcGVjaWZpZWQgaW4gcGFnZXMuXG4gKiBAaWdub3JlXG4gKi9cbkZlZGVyYXRlZFdoZWVsRXZlbnQuRE9NX0RFTFRBX1BBR0UgPSAyO1xuXG5leHBvcnQgeyBGZWRlcmF0ZWRXaGVlbEV2ZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GZWRlcmF0ZWRXaGVlbEV2ZW50Lm1qcy5tYXBcbiIsImltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7XG5pbXBvcnQgeyBQb2ludCB9IGZyb20gJy4uL21hdGhzL3BvaW50L1BvaW50Lm1qcyc7XG5pbXBvcnQgeyB3YXJuIH0gZnJvbSAnLi4vdXRpbHMvbG9nZ2luZy93YXJuLm1qcyc7XG5pbXBvcnQgeyBFdmVudHNUaWNrZXIgfSBmcm9tICcuL0V2ZW50VGlja2VyLm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRNb3VzZUV2ZW50IH0gZnJvbSAnLi9GZWRlcmF0ZWRNb3VzZUV2ZW50Lm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRQb2ludGVyRXZlbnQgfSBmcm9tICcuL0ZlZGVyYXRlZFBvaW50ZXJFdmVudC5tanMnO1xuaW1wb3J0IHsgRmVkZXJhdGVkV2hlZWxFdmVudCB9IGZyb20gJy4vRmVkZXJhdGVkV2hlZWxFdmVudC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IFBST1BBR0FUSU9OX0xJTUlUID0gMjA0ODtcbmNvbnN0IHRlbXBIaXRMb2NhdGlvbiA9IG5ldyBQb2ludCgpO1xuY29uc3QgdGVtcExvY2FsTWFwcGluZyA9IG5ldyBQb2ludCgpO1xuY2xhc3MgRXZlbnRCb3VuZGFyeSB7XG4gIC8qKlxuICAgKiBAcGFyYW0gcm9vdFRhcmdldCAtIFRoZSBob2xkZXIgb2YgdGhlIGV2ZW50IGJvdW5kYXJ5LlxuICAgKi9cbiAgY29uc3RydWN0b3Iocm9vdFRhcmdldCkge1xuICAgIC8qKlxuICAgICAqIEVtaXRzIGV2ZW50cyBhZnRlciB0aGV5IHdlcmUgZGlzcGF0Y2hlZCBpbnRvIHRoZSBzY2VuZSBncmFwaC5cbiAgICAgKlxuICAgICAqIFRoaXMgY2FuIGJlIHVzZWQgZm9yIGdsb2JhbCBldmVudHMgbGlzdGVuaW5nLCByZWdhcmRsZXNzIG9mIHRoZSBzY2VuZSBncmFwaCBiZWluZyB1c2VkLiBJdCBzaG91bGRcbiAgICAgKiBub3QgYmUgdXNlZCBieSBpbnRlcmFjdGl2ZSBsaWJyYXJpZXMgZm9yIG5vcm1hbCB1c2UuXG4gICAgICpcbiAgICAgKiBTcGVjaWFsIGV2ZW50cyB0aGF0IGRvIG5vdCBidWJibGUgYWxsIHRoZSB3YXkgdG8gdGhlIHJvb3QgdGFyZ2V0IGFyZSBub3QgZW1pdHRlZCBmcm9tIGhlcmUsXG4gICAgICogZS5nLiBwb2ludGVyZW50ZXIsIHBvaW50ZXJsZWF2ZSwgY2xpY2suXG4gICAgICovXG4gICAgdGhpcy5kaXNwYXRjaCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAvKipcbiAgICAgKiBUaGlzIGZsYWcgd291bGQgZW1pdCBgcG9pbnRlcm1vdmVgLCBgdG91Y2htb3ZlYCwgYW5kIGBtb3VzZW1vdmVgIGV2ZW50cyBvbiBhbGwgQ29udGFpbmVycy5cbiAgICAgKlxuICAgICAqIFRoZSBgbW92ZU9uQWxsYCBzZW1hbnRpY3MgbWlycm9yIHRob3NlIG9mIGVhcmxpZXIgdmVyc2lvbnMgb2YgUGl4aUpTLiBUaGlzIHdhcyBkaXNhYmxlZCBpbiBmYXZvciBvZlxuICAgICAqIHRoZSBQb2ludGVyIEV2ZW50IEFQSSdzIGFwcHJvYWNoLlxuICAgICAqL1xuICAgIHRoaXMubW92ZU9uQWxsID0gZmFsc2U7XG4gICAgLyoqIEVuYWJsZXMgdGhlIGdsb2JhbCBtb3ZlIGV2ZW50cy4gYGdsb2JhbHBvaW50ZXJtb3ZlYCwgYGdsb2JhbHRvdWNobW92ZWAsIGFuZCBgZ2xvYmFsbW91c2Vtb3ZlYCAqL1xuICAgIHRoaXMuZW5hYmxlR2xvYmFsTW92ZUV2ZW50cyA9IHRydWU7XG4gICAgLyoqXG4gICAgICogU3RhdGUgb2JqZWN0IGZvciBtYXBwaW5nIG1ldGhvZHMuXG4gICAgICogQHNlZSBFdmVudEJvdW5kYXJ5I3RyYWNraW5nRGF0YVxuICAgICAqL1xuICAgIHRoaXMubWFwcGluZ1N0YXRlID0ge1xuICAgICAgdHJhY2tpbmdEYXRhOiB7fVxuICAgIH07XG4gICAgLyoqXG4gICAgICogVGhlIGV2ZW50IHBvb2wgbWFwcyBldmVudCBjb25zdHJ1Y3RvcnMgdG8gYW4gZnJlZSBwb29sIG9mIGluc3RhbmNlcyBvZiB0aG9zZSBzcGVjaWZpYyBldmVudHMuXG4gICAgICogQHNlZSBFdmVudEJvdW5kYXJ5I2FsbG9jYXRlRXZlbnRcbiAgICAgKiBAc2VlIEV2ZW50Qm91bmRhcnkjZnJlZUV2ZW50XG4gICAgICovXG4gICAgdGhpcy5ldmVudFBvb2wgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIC8qKiBFdmVyeSBpbnRlcmFjdGl2ZSBlbGVtZW50IGdhdGhlcmVkIGZyb20gdGhlIHNjZW5lLiBPbmx5IHVzZWQgaW4gYHBvaW50ZXJtb3ZlYCAqL1xuICAgIHRoaXMuX2FsbEludGVyYWN0aXZlRWxlbWVudHMgPSBbXTtcbiAgICAvKiogRXZlcnkgZWxlbWVudCB0aGF0IHBhc3NlZCB0aGUgaGl0IHRlc3QuIE9ubHkgdXNlZCBpbiBgcG9pbnRlcm1vdmVgICovXG4gICAgdGhpcy5faGl0RWxlbWVudHMgPSBbXTtcbiAgICAvKiogV2hldGhlciBvciBub3QgdG8gY29sbGVjdCBhbGwgdGhlIGludGVyYWN0aXZlIGVsZW1lbnRzIGZyb20gdGhlIHNjZW5lLiBFbmFibGVkIGluIGBwb2ludGVybW92ZWAgKi9cbiAgICB0aGlzLl9pc1BvaW50ZXJNb3ZlRXZlbnQgPSBmYWxzZTtcbiAgICB0aGlzLnJvb3RUYXJnZXQgPSByb290VGFyZ2V0O1xuICAgIHRoaXMuaGl0UHJ1bmVGbiA9IHRoaXMuaGl0UHJ1bmVGbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGl0VGVzdEZuID0gdGhpcy5oaXRUZXN0Rm4uYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcFBvaW50ZXJEb3duID0gdGhpcy5tYXBQb2ludGVyRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMubWFwUG9pbnRlck1vdmUgPSB0aGlzLm1hcFBvaW50ZXJNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYXBQb2ludGVyT3V0ID0gdGhpcy5tYXBQb2ludGVyT3V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYXBQb2ludGVyT3ZlciA9IHRoaXMubWFwUG9pbnRlck92ZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcFBvaW50ZXJVcCA9IHRoaXMubWFwUG9pbnRlclVwLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYXBQb2ludGVyVXBPdXRzaWRlID0gdGhpcy5tYXBQb2ludGVyVXBPdXRzaWRlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYXBXaGVlbCA9IHRoaXMubWFwV2hlZWwuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcHBpbmdUYWJsZSA9IHt9O1xuICAgIHRoaXMuYWRkRXZlbnRNYXBwaW5nKFwicG9pbnRlcmRvd25cIiwgdGhpcy5tYXBQb2ludGVyRG93bik7XG4gICAgdGhpcy5hZGRFdmVudE1hcHBpbmcoXCJwb2ludGVybW92ZVwiLCB0aGlzLm1hcFBvaW50ZXJNb3ZlKTtcbiAgICB0aGlzLmFkZEV2ZW50TWFwcGluZyhcInBvaW50ZXJvdXRcIiwgdGhpcy5tYXBQb2ludGVyT3V0KTtcbiAgICB0aGlzLmFkZEV2ZW50TWFwcGluZyhcInBvaW50ZXJsZWF2ZVwiLCB0aGlzLm1hcFBvaW50ZXJPdXQpO1xuICAgIHRoaXMuYWRkRXZlbnRNYXBwaW5nKFwicG9pbnRlcm92ZXJcIiwgdGhpcy5tYXBQb2ludGVyT3Zlcik7XG4gICAgdGhpcy5hZGRFdmVudE1hcHBpbmcoXCJwb2ludGVydXBcIiwgdGhpcy5tYXBQb2ludGVyVXApO1xuICAgIHRoaXMuYWRkRXZlbnRNYXBwaW5nKFwicG9pbnRlcnVwb3V0c2lkZVwiLCB0aGlzLm1hcFBvaW50ZXJVcE91dHNpZGUpO1xuICAgIHRoaXMuYWRkRXZlbnRNYXBwaW5nKFwid2hlZWxcIiwgdGhpcy5tYXBXaGVlbCk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYW4gZXZlbnQgbWFwcGluZyBmb3IgdGhlIGV2ZW50IGB0eXBlYCBoYW5kbGVkIGJ5IGBmbmAuXG4gICAqXG4gICAqIEV2ZW50IG1hcHBpbmdzIGNhbiBiZSB1c2VkIHRvIGltcGxlbWVudCBhZGRpdGlvbmFsIG9yIGN1c3RvbSBldmVudHMuIFRoZXkgdGFrZSBhbiBldmVudFxuICAgKiBjb21pbmcgZnJvbSB0aGUgdXBzdHJlYW0gc2NlbmUgKG9yIGRpcmVjdGx5IGZyb20gdGhlIHtAbGluayBFdmVudFN5c3RlbX0pIGFuZCBkaXNwYXRjaCBuZXcgZG93bnN0cmVhbSBldmVudHNcbiAgICogZ2VuZXJhbGx5IHRyaWNrbGluZyBkb3duIGFuZCBidWJibGluZyB1cCB0byB7QGxpbmsgRXZlbnRCb3VuZGFyeS5yb290VGFyZ2V0IHRoaXMucm9vdFRhcmdldH0uXG4gICAqXG4gICAqIFRvIG1vZGlmeSB0aGUgc2VtYW50aWNzIG9mIGV4aXN0aW5nIGV2ZW50cywgdGhlIGJ1aWx0LWluIG1hcHBpbmcgbWV0aG9kcyBvZiBFdmVudEJvdW5kYXJ5IHNob3VsZCBiZSBvdmVycmlkZGVuXG4gICAqIGluc3RlYWQuXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2YgdXBzdHJlYW0gZXZlbnQgdG8gbWFwLlxuICAgKiBAcGFyYW0gZm4gLSBUaGUgbWFwcGluZyBtZXRob2QuIFRoZSBjb250ZXh0IG9mIHRoaXMgZnVuY3Rpb24gbXVzdCBiZSBib3VuZCBtYW51YWxseSwgaWYgZGVzaXJlZC5cbiAgICovXG4gIGFkZEV2ZW50TWFwcGluZyh0eXBlLCBmbikge1xuICAgIGlmICghdGhpcy5tYXBwaW5nVGFibGVbdHlwZV0pIHtcbiAgICAgIHRoaXMubWFwcGluZ1RhYmxlW3R5cGVdID0gW107XG4gICAgfVxuICAgIHRoaXMubWFwcGluZ1RhYmxlW3R5cGVdLnB1c2goe1xuICAgICAgZm4sXG4gICAgICBwcmlvcml0eTogMFxuICAgIH0pO1xuICAgIHRoaXMubWFwcGluZ1RhYmxlW3R5cGVdLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KTtcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2hlcyB0aGUgZ2l2ZW4gZXZlbnRcbiAgICogQHBhcmFtIGUgLSBUaGUgZXZlbnQgdG8gZGlzcGF0Y2guXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2YgZXZlbnQgdG8gZGlzcGF0Y2guIERlZmF1bHRzIHRvIGBlLnR5cGVgLlxuICAgKi9cbiAgZGlzcGF0Y2hFdmVudChlLCB0eXBlKSB7XG4gICAgZS5wcm9wYWdhdGlvblN0b3BwZWQgPSBmYWxzZTtcbiAgICBlLnByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkID0gZmFsc2U7XG4gICAgdGhpcy5wcm9wYWdhdGUoZSwgdHlwZSk7XG4gICAgdGhpcy5kaXNwYXRjaC5lbWl0KHR5cGUgfHwgZS50eXBlLCBlKTtcbiAgfVxuICAvKipcbiAgICogTWFwcyB0aGUgZ2l2ZW4gdXBzdHJlYW0gZXZlbnQgdGhyb3VnaCB0aGUgZXZlbnQgYm91bmRhcnkgYW5kIHByb3BhZ2F0ZXMgaXQgZG93bnN0cmVhbS5cbiAgICogQHBhcmFtIGUgLSBUaGUgZXZlbnQgdG8gbWFwLlxuICAgKi9cbiAgbWFwRXZlbnQoZSkge1xuICAgIGlmICghdGhpcy5yb290VGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG1hcHBlcnMgPSB0aGlzLm1hcHBpbmdUYWJsZVtlLnR5cGVdO1xuICAgIGlmIChtYXBwZXJzKSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaiA9IG1hcHBlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgIG1hcHBlcnNbaV0uZm4oZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdhcm4oYFtFdmVudEJvdW5kYXJ5XTogRXZlbnQgbWFwcGluZyBub3QgZGVmaW5lZCBmb3IgJHtlLnR5cGV9YCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgQ29udGFpbmVyIHRoYXQgaXMgdGhlIHRhcmdldCBvZiBhIGV2ZW50IGF0IHRoZSBnaXZlbiBjb29yZGluYXRlcy5cbiAgICpcbiAgICogVGhlIHBhc3NlZCAoeCx5KSBjb29yZGluYXRlcyBhcmUgaW4gdGhlIHdvcmxkIHNwYWNlIGFib3ZlIHRoaXMgZXZlbnQgYm91bmRhcnkuXG4gICAqIEBwYXJhbSB4IC0gVGhlIHggY29vcmRpbmF0ZSBvZiB0aGUgZXZlbnQuXG4gICAqIEBwYXJhbSB5IC0gVGhlIHkgY29vcmRpbmF0ZSBvZiB0aGUgZXZlbnQuXG4gICAqL1xuICBoaXRUZXN0KHgsIHkpIHtcbiAgICBFdmVudHNUaWNrZXIucGF1c2VVcGRhdGUgPSB0cnVlO1xuICAgIGNvbnN0IHVzZU1vdmUgPSB0aGlzLl9pc1BvaW50ZXJNb3ZlRXZlbnQgJiYgdGhpcy5lbmFibGVHbG9iYWxNb3ZlRXZlbnRzO1xuICAgIGNvbnN0IGZuID0gdXNlTW92ZSA/IFwiaGl0VGVzdE1vdmVSZWN1cnNpdmVcIiA6IFwiaGl0VGVzdFJlY3Vyc2l2ZVwiO1xuICAgIGNvbnN0IGludmVydGVkUGF0aCA9IHRoaXNbZm5dKFxuICAgICAgdGhpcy5yb290VGFyZ2V0LFxuICAgICAgdGhpcy5yb290VGFyZ2V0LmV2ZW50TW9kZSxcbiAgICAgIHRlbXBIaXRMb2NhdGlvbi5zZXQoeCwgeSksXG4gICAgICB0aGlzLmhpdFRlc3RGbixcbiAgICAgIHRoaXMuaGl0UHJ1bmVGblxuICAgICk7XG4gICAgcmV0dXJuIGludmVydGVkUGF0aCAmJiBpbnZlcnRlZFBhdGhbMF07XG4gIH1cbiAgLyoqXG4gICAqIFByb3BhZ2F0ZSB0aGUgcGFzc2VkIGV2ZW50IGZyb20gZnJvbSB7QGxpbmsgRXZlbnRCb3VuZGFyeS5yb290VGFyZ2V0IHRoaXMucm9vdFRhcmdldH0gdG8gaXRzXG4gICAqIHRhcmdldCBgZS50YXJnZXRgLlxuICAgKiBAcGFyYW0gZSAtIFRoZSBldmVudCB0byBwcm9wYWdhdGUuXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2YgZXZlbnQgdG8gcHJvcGFnYXRlLiBEZWZhdWx0cyB0byBgZS50eXBlYC5cbiAgICovXG4gIHByb3BhZ2F0ZShlLCB0eXBlKSB7XG4gICAgaWYgKCFlLnRhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjb21wb3NlZFBhdGggPSBlLmNvbXBvc2VkUGF0aCgpO1xuICAgIGUuZXZlbnRQaGFzZSA9IGUuQ0FQVFVSSU5HX1BIQVNFO1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gY29tcG9zZWRQYXRoLmxlbmd0aCAtIDE7IGkgPCBqOyBpKyspIHtcbiAgICAgIGUuY3VycmVudFRhcmdldCA9IGNvbXBvc2VkUGF0aFtpXTtcbiAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIHR5cGUpO1xuICAgICAgaWYgKGUucHJvcGFnYXRpb25TdG9wcGVkIHx8IGUucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQpXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5ldmVudFBoYXNlID0gZS5BVF9UQVJHRVQ7XG4gICAgZS5jdXJyZW50VGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgdHlwZSk7XG4gICAgaWYgKGUucHJvcGFnYXRpb25TdG9wcGVkIHx8IGUucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQpXG4gICAgICByZXR1cm47XG4gICAgZS5ldmVudFBoYXNlID0gZS5CVUJCTElOR19QSEFTRTtcbiAgICBmb3IgKGxldCBpID0gY29tcG9zZWRQYXRoLmxlbmd0aCAtIDI7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBlLmN1cnJlbnRUYXJnZXQgPSBjb21wb3NlZFBhdGhbaV07XG4gICAgICB0aGlzLm5vdGlmeVRhcmdldChlLCB0eXBlKTtcbiAgICAgIGlmIChlLnByb3BhZ2F0aW9uU3RvcHBlZCB8fCBlLnByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkKVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbWl0cyB0aGUgZXZlbnQgYGVgIHRvIGFsbCBpbnRlcmFjdGl2ZSBjb250YWluZXJzLiBUaGUgZXZlbnQgaXMgcHJvcGFnYXRlZCBpbiB0aGUgYnViYmxpbmcgcGhhc2UgYWx3YXlzLlxuICAgKlxuICAgKiBUaGlzIGlzIHVzZWQgaW4gdGhlIGBnbG9iYWxwb2ludGVybW92ZWAgZXZlbnQuXG4gICAqIEBwYXJhbSBlIC0gVGhlIGVtaXR0ZWQgZXZlbnQuXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIGxpc3RlbmVycyB0byBub3RpZnkuXG4gICAqIEBwYXJhbSB0YXJnZXRzIC0gVGhlIHRhcmdldHMgdG8gbm90aWZ5LlxuICAgKi9cbiAgYWxsKGUsIHR5cGUsIHRhcmdldHMgPSB0aGlzLl9hbGxJbnRlcmFjdGl2ZUVsZW1lbnRzKSB7XG4gICAgaWYgKHRhcmdldHMubGVuZ3RoID09PSAwKVxuICAgICAgcmV0dXJuO1xuICAgIGUuZXZlbnRQaGFzZSA9IGUuQlVCQkxJTkdfUEhBU0U7XG4gICAgY29uc3QgZXZlbnRzID0gQXJyYXkuaXNBcnJheSh0eXBlKSA/IHR5cGUgOiBbdHlwZV07XG4gICAgZm9yIChsZXQgaSA9IHRhcmdldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGV2ZW50cy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICBlLmN1cnJlbnRUYXJnZXQgPSB0YXJnZXRzW2ldO1xuICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChlLCBldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBwcm9wYWdhdGlvbiBwYXRoIGZyb20ge0BsaW5rIEV2ZW50Qm91bmRhcnkucm9vdFRhcmdldCByb290VGFyZ2V0fSB0byB0aGUgcGFzc2VkXG4gICAqIGB0YXJnZXRgLiBUaGUgbGFzdCBlbGVtZW50IGluIHRoZSBwYXRoIGlzIGB0YXJnZXRgLlxuICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHRhcmdldCB0byBmaW5kIHRoZSBwcm9wYWdhdGlvbiBwYXRoIHRvLlxuICAgKi9cbiAgcHJvcGFnYXRpb25QYXRoKHRhcmdldCkge1xuICAgIGNvbnN0IHByb3BhZ2F0aW9uUGF0aCA9IFt0YXJnZXRdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgUFJPUEFHQVRJT05fTElNSVQgJiYgKHRhcmdldCAhPT0gdGhpcy5yb290VGFyZ2V0ICYmIHRhcmdldC5wYXJlbnQpOyBpKyspIHtcbiAgICAgIGlmICghdGFyZ2V0LnBhcmVudCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBwcm9wYWdhdGlvbiBwYXRoIHRvIGRpc2Nvbm5lY3RlZCB0YXJnZXRcIik7XG4gICAgICB9XG4gICAgICBwcm9wYWdhdGlvblBhdGgucHVzaCh0YXJnZXQucGFyZW50KTtcbiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnQ7XG4gICAgfVxuICAgIHByb3BhZ2F0aW9uUGF0aC5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIHByb3BhZ2F0aW9uUGF0aDtcbiAgfVxuICBoaXRUZXN0TW92ZVJlY3Vyc2l2ZShjdXJyZW50VGFyZ2V0LCBldmVudE1vZGUsIGxvY2F0aW9uLCB0ZXN0Rm4sIHBydW5lRm4sIGlnbm9yZSA9IGZhbHNlKSB7XG4gICAgbGV0IHNob3VsZFJldHVybiA9IGZhbHNlO1xuICAgIGlmICh0aGlzLl9pbnRlcmFjdGl2ZVBydW5lKGN1cnJlbnRUYXJnZXQpKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKGN1cnJlbnRUYXJnZXQuZXZlbnRNb2RlID09PSBcImR5bmFtaWNcIiB8fCBldmVudE1vZGUgPT09IFwiZHluYW1pY1wiKSB7XG4gICAgICBFdmVudHNUaWNrZXIucGF1c2VVcGRhdGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRUYXJnZXQuaW50ZXJhY3RpdmVDaGlsZHJlbiAmJiBjdXJyZW50VGFyZ2V0LmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IGN1cnJlbnRUYXJnZXQuY2hpbGRyZW47XG4gICAgICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgY29uc3QgbmVzdGVkSGl0ID0gdGhpcy5oaXRUZXN0TW92ZVJlY3Vyc2l2ZShcbiAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICB0aGlzLl9pc0ludGVyYWN0aXZlKGV2ZW50TW9kZSkgPyBldmVudE1vZGUgOiBjaGlsZC5ldmVudE1vZGUsXG4gICAgICAgICAgbG9jYXRpb24sXG4gICAgICAgICAgdGVzdEZuLFxuICAgICAgICAgIHBydW5lRm4sXG4gICAgICAgICAgaWdub3JlIHx8IHBydW5lRm4oY3VycmVudFRhcmdldCwgbG9jYXRpb24pXG4gICAgICAgICk7XG4gICAgICAgIGlmIChuZXN0ZWRIaXQpIHtcbiAgICAgICAgICBpZiAobmVzdGVkSGl0Lmxlbmd0aCA+IDAgJiYgIW5lc3RlZEhpdFtuZXN0ZWRIaXQubGVuZ3RoIC0gMV0ucGFyZW50KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgaXNJbnRlcmFjdGl2ZSA9IGN1cnJlbnRUYXJnZXQuaXNJbnRlcmFjdGl2ZSgpO1xuICAgICAgICAgIGlmIChuZXN0ZWRIaXQubGVuZ3RoID4gMCB8fCBpc0ludGVyYWN0aXZlKSB7XG4gICAgICAgICAgICBpZiAoaXNJbnRlcmFjdGl2ZSlcbiAgICAgICAgICAgICAgdGhpcy5fYWxsSW50ZXJhY3RpdmVFbGVtZW50cy5wdXNoKGN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgbmVzdGVkSGl0LnB1c2goY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLl9oaXRFbGVtZW50cy5sZW5ndGggPT09IDApXG4gICAgICAgICAgICB0aGlzLl9oaXRFbGVtZW50cyA9IG5lc3RlZEhpdDtcbiAgICAgICAgICBzaG91bGRSZXR1cm4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGlzSW50ZXJhY3RpdmVNb2RlID0gdGhpcy5faXNJbnRlcmFjdGl2ZShldmVudE1vZGUpO1xuICAgIGNvbnN0IGlzSW50ZXJhY3RpdmVUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LmlzSW50ZXJhY3RpdmUoKTtcbiAgICBpZiAoaXNJbnRlcmFjdGl2ZVRhcmdldCAmJiBpc0ludGVyYWN0aXZlVGFyZ2V0KVxuICAgICAgdGhpcy5fYWxsSW50ZXJhY3RpdmVFbGVtZW50cy5wdXNoKGN1cnJlbnRUYXJnZXQpO1xuICAgIGlmIChpZ25vcmUgfHwgdGhpcy5faGl0RWxlbWVudHMubGVuZ3RoID4gMClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGlmIChzaG91bGRSZXR1cm4pXG4gICAgICByZXR1cm4gdGhpcy5faGl0RWxlbWVudHM7XG4gICAgaWYgKGlzSW50ZXJhY3RpdmVNb2RlICYmICghcHJ1bmVGbihjdXJyZW50VGFyZ2V0LCBsb2NhdGlvbikgJiYgdGVzdEZuKGN1cnJlbnRUYXJnZXQsIGxvY2F0aW9uKSkpIHtcbiAgICAgIHJldHVybiBpc0ludGVyYWN0aXZlVGFyZ2V0ID8gW2N1cnJlbnRUYXJnZXRdIDogW107XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBSZWN1cnNpdmUgaW1wbGVtZW50YXRpb24gZm9yIHtAbGluayBFdmVudEJvdW5kYXJ5LmhpdFRlc3QgaGl0VGVzdH0uXG4gICAqIEBwYXJhbSBjdXJyZW50VGFyZ2V0IC0gVGhlIENvbnRhaW5lciB0aGF0IGlzIHRvIGJlIGhpdCB0ZXN0ZWQuXG4gICAqIEBwYXJhbSBldmVudE1vZGUgLSBUaGUgZXZlbnQgbW9kZSBmb3IgdGhlIGBjdXJyZW50VGFyZ2V0YCBvciBvbmUgb2YgaXRzIHBhcmVudHMuXG4gICAqIEBwYXJhbSBsb2NhdGlvbiAtIFRoZSBsb2NhdGlvbiB0aGF0IGlzIGJlaW5nIHRlc3RlZCBmb3Igb3ZlcmxhcC5cbiAgICogQHBhcmFtIHRlc3RGbiAtIENhbGxiYWNrIHRoYXQgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSB0YXJnZXQgcGFzc2VzIGhpdCB0ZXN0aW5nLiBUaGlzIGNhbGxiYWNrXG4gICAqICBjYW4gYXNzdW1lIHRoYXQgYHBydW5lRm5gIGZhaWxlZCB0byBwcnVuZSB0aGUgY29udGFpbmVyLlxuICAgKiBAcGFyYW0gcHJ1bmVGbiAtIENhbGxiYWNrIHRoYXQgZGV0ZXJtaW5lc3Mgd2hldGhlciB0aGUgdGFyZ2V0IGFuZCBhbGwgb2YgaXRzIGNoaWxkcmVuXG4gICAqICBjYW5ub3QgcGFzcyB0aGUgaGl0IHRlc3QuIEl0IGlzIHVzZWQgYXMgYSBwcmVsaW1pbmFyeSBvcHRpbWl6YXRpb24gdG8gcHJ1bmUgZW50aXJlIHN1YnRyZWVzXG4gICAqICBvZiB0aGUgc2NlbmUgZ3JhcGguXG4gICAqIEByZXR1cm5zIEFuIGFycmF5IGhvbGRpbmcgdGhlIGhpdCB0ZXN0aW5nIHRhcmdldCBhbmQgYWxsIGl0cyBhbmNlc3RvcnMgaW4gb3JkZXIuIFRoZSBmaXJzdCBlbGVtZW50XG4gICAqICBpcyB0aGUgdGFyZ2V0IGl0c2VsZiBhbmQgdGhlIGxhc3QgaXMge0BsaW5rIEV2ZW50Qm91bmRhcnkucm9vdFRhcmdldCByb290VGFyZ2V0fS4gVGhpcyBpcyB0aGUgb3Bwb3NpdGVcbiAgICogIG9yZGVyIHcuci50LiB0aGUgcHJvcGFnYXRpb24gcGF0aC4gSWYgbm8gaGl0IHRlc3RpbmcgdGFyZ2V0IGlzIGZvdW5kLCBudWxsIGlzIHJldHVybmVkLlxuICAgKi9cbiAgaGl0VGVzdFJlY3Vyc2l2ZShjdXJyZW50VGFyZ2V0LCBldmVudE1vZGUsIGxvY2F0aW9uLCB0ZXN0Rm4sIHBydW5lRm4pIHtcbiAgICBpZiAodGhpcy5faW50ZXJhY3RpdmVQcnVuZShjdXJyZW50VGFyZ2V0KSB8fCBwcnVuZUZuKGN1cnJlbnRUYXJnZXQsIGxvY2F0aW9uKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChjdXJyZW50VGFyZ2V0LmV2ZW50TW9kZSA9PT0gXCJkeW5hbWljXCIgfHwgZXZlbnRNb2RlID09PSBcImR5bmFtaWNcIikge1xuICAgICAgRXZlbnRzVGlja2VyLnBhdXNlVXBkYXRlID0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChjdXJyZW50VGFyZ2V0LmludGVyYWN0aXZlQ2hpbGRyZW4gJiYgY3VycmVudFRhcmdldC5jaGlsZHJlbikge1xuICAgICAgY29uc3QgY2hpbGRyZW4gPSBjdXJyZW50VGFyZ2V0LmNoaWxkcmVuO1xuICAgICAgY29uc3QgcmVsYXRpdmVMb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgICAgZm9yIChsZXQgaSA9IGNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAgIGNvbnN0IG5lc3RlZEhpdCA9IHRoaXMuaGl0VGVzdFJlY3Vyc2l2ZShcbiAgICAgICAgICBjaGlsZCxcbiAgICAgICAgICB0aGlzLl9pc0ludGVyYWN0aXZlKGV2ZW50TW9kZSkgPyBldmVudE1vZGUgOiBjaGlsZC5ldmVudE1vZGUsXG4gICAgICAgICAgcmVsYXRpdmVMb2NhdGlvbixcbiAgICAgICAgICB0ZXN0Rm4sXG4gICAgICAgICAgcHJ1bmVGblxuICAgICAgICApO1xuICAgICAgICBpZiAobmVzdGVkSGl0KSB7XG4gICAgICAgICAgaWYgKG5lc3RlZEhpdC5sZW5ndGggPiAwICYmICFuZXN0ZWRIaXRbbmVzdGVkSGl0Lmxlbmd0aCAtIDFdLnBhcmVudCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGlzSW50ZXJhY3RpdmUgPSBjdXJyZW50VGFyZ2V0LmlzSW50ZXJhY3RpdmUoKTtcbiAgICAgICAgICBpZiAobmVzdGVkSGl0Lmxlbmd0aCA+IDAgfHwgaXNJbnRlcmFjdGl2ZSlcbiAgICAgICAgICAgIG5lc3RlZEhpdC5wdXNoKGN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgIHJldHVybiBuZXN0ZWRIaXQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaXNJbnRlcmFjdGl2ZU1vZGUgPSB0aGlzLl9pc0ludGVyYWN0aXZlKGV2ZW50TW9kZSk7XG4gICAgY29uc3QgaXNJbnRlcmFjdGl2ZVRhcmdldCA9IGN1cnJlbnRUYXJnZXQuaXNJbnRlcmFjdGl2ZSgpO1xuICAgIGlmIChpc0ludGVyYWN0aXZlTW9kZSAmJiB0ZXN0Rm4oY3VycmVudFRhcmdldCwgbG9jYXRpb24pKSB7XG4gICAgICByZXR1cm4gaXNJbnRlcmFjdGl2ZVRhcmdldCA/IFtjdXJyZW50VGFyZ2V0XSA6IFtdO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBfaXNJbnRlcmFjdGl2ZShpbnQpIHtcbiAgICByZXR1cm4gaW50ID09PSBcInN0YXRpY1wiIHx8IGludCA9PT0gXCJkeW5hbWljXCI7XG4gIH1cbiAgX2ludGVyYWN0aXZlUHJ1bmUoY29udGFpbmVyKSB7XG4gICAgaWYgKCFjb250YWluZXIgfHwgIWNvbnRhaW5lci52aXNpYmxlIHx8ICFjb250YWluZXIucmVuZGVyYWJsZSB8fCAhY29udGFpbmVyLm1lYXN1cmFibGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyLmV2ZW50TW9kZSA9PT0gXCJub25lXCIpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyLmV2ZW50TW9kZSA9PT0gXCJwYXNzaXZlXCIgJiYgIWNvbnRhaW5lci5pbnRlcmFjdGl2ZUNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgY29udGFpbmVyIG9yIGFueSBvZiBpdHMgY2hpbGRyZW4gY2Fubm90IHBhc3MgdGhlIGhpdCB0ZXN0IGF0IGFsbC5cbiAgICpcbiAgICoge0BsaW5rIEV2ZW50Qm91bmRhcnl9J3MgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUge0BsaW5rIENvbnRhaW5lci5oaXRBcmVhIGhpdEFyZWF9XG4gICAqIGFuZCB7QGxpbmsgQ29udGFpbmVyLl9tYXNrRWZmZWN0fSBmb3IgcHJ1bmluZy5cbiAgICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgdG8gcHJ1bmUuXG4gICAqIEBwYXJhbSBsb2NhdGlvbiAtIFRoZSBsb2NhdGlvbiB0byB0ZXN0IGZvciBvdmVybGFwLlxuICAgKi9cbiAgaGl0UHJ1bmVGbihjb250YWluZXIsIGxvY2F0aW9uKSB7XG4gICAgaWYgKGNvbnRhaW5lci5oaXRBcmVhKSB7XG4gICAgICBjb250YWluZXIud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKGxvY2F0aW9uLCB0ZW1wTG9jYWxNYXBwaW5nKTtcbiAgICAgIGlmICghY29udGFpbmVyLmhpdEFyZWEuY29udGFpbnModGVtcExvY2FsTWFwcGluZy54LCB0ZW1wTG9jYWxNYXBwaW5nLnkpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY29udGFpbmVyLmVmZmVjdHMgJiYgY29udGFpbmVyLmVmZmVjdHMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRhaW5lci5lZmZlY3RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVmZmVjdCA9IGNvbnRhaW5lci5lZmZlY3RzW2ldO1xuICAgICAgICBpZiAoZWZmZWN0LmNvbnRhaW5zUG9pbnQpIHtcbiAgICAgICAgICBjb25zdCBlZmZlY3RDb250YWluc1BvaW50ID0gZWZmZWN0LmNvbnRhaW5zUG9pbnQobG9jYXRpb24sIHRoaXMuaGl0VGVzdEZuKTtcbiAgICAgICAgICBpZiAoIWVmZmVjdENvbnRhaW5zUG9pbnQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSBjb250YWluZXIgcGFzc2VzIGhpdCB0ZXN0aW5nIGZvciB0aGUgZ2l2ZW4gbG9jYXRpb24uXG4gICAqIEBwYXJhbSBjb250YWluZXIgLSBUaGUgY29udGFpbmVyIHRvIHRlc3QuXG4gICAqIEBwYXJhbSBsb2NhdGlvbiAtIFRoZSBsb2NhdGlvbiB0byB0ZXN0IGZvciBvdmVybGFwLlxuICAgKiBAcmV0dXJucyAtIFdoZXRoZXIgYGNvbnRhaW5lcmAgcGFzc2VzIGhpdCB0ZXN0aW5nIGZvciBgbG9jYXRpb25gLlxuICAgKi9cbiAgaGl0VGVzdEZuKGNvbnRhaW5lciwgbG9jYXRpb24pIHtcbiAgICBpZiAoY29udGFpbmVyLmhpdEFyZWEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoY29udGFpbmVyPy5jb250YWluc1BvaW50KSB7XG4gICAgICBjb250YWluZXIud29ybGRUcmFuc2Zvcm0uYXBwbHlJbnZlcnNlKGxvY2F0aW9uLCB0ZW1wTG9jYWxNYXBwaW5nKTtcbiAgICAgIHJldHVybiBjb250YWluZXIuY29udGFpbnNQb2ludCh0ZW1wTG9jYWxNYXBwaW5nKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBOb3RpZnkgYWxsIHRoZSBsaXN0ZW5lcnMgdG8gdGhlIGV2ZW50J3MgYGN1cnJlbnRUYXJnZXRgLlxuICAgKlxuICAgKiBJZiB0aGUgYGN1cnJlbnRUYXJnZXRgIGNvbnRhaW5zIHRoZSBwcm9wZXJ0eSBgb248dHlwZT5gLCB0aGVuIGl0IGlzIGNhbGxlZCBoZXJlLFxuICAgKiBzaW11bGF0aW5nIHRoZSBiZWhhdmlvciBmcm9tIHZlcnNpb24gNi54IGFuZCBwcmlvci5cbiAgICogQHBhcmFtIGUgLSBUaGUgZXZlbnQgcGFzc2VkIHRvIHRoZSB0YXJnZXQuXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIHR5cGUgb2YgZXZlbnQgdG8gbm90aWZ5LiBEZWZhdWx0cyB0byBgZS50eXBlYC5cbiAgICovXG4gIG5vdGlmeVRhcmdldChlLCB0eXBlKSB7XG4gICAgaWYgKCFlLmN1cnJlbnRUYXJnZXQuaXNJbnRlcmFjdGl2ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHR5cGUgPz8gKHR5cGUgPSBlLnR5cGUpO1xuICAgIGNvbnN0IGhhbmRsZXJLZXkgPSBgb24ke3R5cGV9YDtcbiAgICBlLmN1cnJlbnRUYXJnZXRbaGFuZGxlcktleV0/LihlKTtcbiAgICBjb25zdCBrZXkgPSBlLmV2ZW50UGhhc2UgPT09IGUuQ0FQVFVSSU5HX1BIQVNFIHx8IGUuZXZlbnRQaGFzZSA9PT0gZS5BVF9UQVJHRVQgPyBgJHt0eXBlfWNhcHR1cmVgIDogdHlwZTtcbiAgICB0aGlzLl9ub3RpZnlMaXN0ZW5lcnMoZSwga2V5KTtcbiAgICBpZiAoZS5ldmVudFBoYXNlID09PSBlLkFUX1RBUkdFVCkge1xuICAgICAgdGhpcy5fbm90aWZ5TGlzdGVuZXJzKGUsIHR5cGUpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWFwcyB0aGUgdXBzdHJlYW0gYHBvaW50ZXJkb3duYCBldmVudHMgdG8gYSBkb3duc3RyZWFtIGBwb2ludGVyZG93bmAgZXZlbnQuXG4gICAqXG4gICAqIGB0b3VjaHN0YXJ0YCwgYHJpZ2h0ZG93bmAsIGBtb3VzZWRvd25gIGV2ZW50cyBhcmUgYWxzbyBkaXNwYXRjaGVkIGZvciBzcGVjaWZpYyBwb2ludGVyIHR5cGVzLlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSB1cHN0cmVhbSBgcG9pbnRlcmRvd25gIGV2ZW50LlxuICAgKi9cbiAgbWFwUG9pbnRlckRvd24oZnJvbSkge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQpKSB7XG4gICAgICB3YXJuKFwiRXZlbnRCb3VuZGFyeSBjYW5ub3QgbWFwIGEgbm9uLXBvaW50ZXIgZXZlbnQgYXMgYSBwb2ludGVyIGV2ZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBlID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwicG9pbnRlcmRvd25cIik7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwidG91Y2hzdGFydFwiKTtcbiAgICB9IGVsc2UgaWYgKGUucG9pbnRlclR5cGUgPT09IFwibW91c2VcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiKSB7XG4gICAgICBjb25zdCBpc1JpZ2h0QnV0dG9uID0gZS5idXR0b24gPT09IDI7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgaXNSaWdodEJ1dHRvbiA/IFwicmlnaHRkb3duXCIgOiBcIm1vdXNlZG93blwiKTtcbiAgICB9XG4gICAgY29uc3QgdHJhY2tpbmdEYXRhID0gdGhpcy50cmFja2luZ0RhdGEoZnJvbS5wb2ludGVySWQpO1xuICAgIHRyYWNraW5nRGF0YS5wcmVzc1RhcmdldHNCeUJ1dHRvbltmcm9tLmJ1dHRvbl0gPSBlLmNvbXBvc2VkUGF0aCgpO1xuICAgIHRoaXMuZnJlZUV2ZW50KGUpO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSB1cHN0cmVhbSBgcG9pbnRlcm1vdmVgIHRvIGRvd25zdHJlYW0gYHBvaW50ZXJvdXRgLCBgcG9pbnRlcm92ZXJgLCBhbmQgYHBvaW50ZXJtb3ZlYCBldmVudHMsIGluIHRoYXQgb3JkZXIuXG4gICAqXG4gICAqIFRoZSB0cmFja2luZyBkYXRhIGZvciB0aGUgc3BlY2lmaWMgcG9pbnRlciBoYXMgYW4gdXBkYXRlZCBgb3ZlclRhcmdldGAuIGBtb3VzZW91dGAsIGBtb3VzZW92ZXJgLFxuICAgKiBgbW91c2Vtb3ZlYCwgYW5kIGB0b3VjaG1vdmVgIGV2ZW50cyBhcmUgZmlyZWQgYXMgd2VsbCBmb3Igc3BlY2lmaWMgcG9pbnRlciB0eXBlcy5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgdXBzdHJlYW0gYHBvaW50ZXJtb3ZlYCBldmVudC5cbiAgICovXG4gIG1hcFBvaW50ZXJNb3ZlKGZyb20pIHtcbiAgICBpZiAoIShmcm9tIGluc3RhbmNlb2YgRmVkZXJhdGVkUG9pbnRlckV2ZW50KSkge1xuICAgICAgd2FybihcIkV2ZW50Qm91bmRhcnkgY2Fubm90IG1hcCBhIG5vbi1wb2ludGVyIGV2ZW50IGFzIGEgcG9pbnRlciBldmVudFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fYWxsSW50ZXJhY3RpdmVFbGVtZW50cy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2hpdEVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5faXNQb2ludGVyTW92ZUV2ZW50ID0gdHJ1ZTtcbiAgICBjb25zdCBlID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSk7XG4gICAgdGhpcy5faXNQb2ludGVyTW92ZUV2ZW50ID0gZmFsc2U7XG4gICAgY29uc3QgaXNNb3VzZSA9IGUucG9pbnRlclR5cGUgPT09IFwibW91c2VcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiO1xuICAgIGNvbnN0IHRyYWNraW5nRGF0YSA9IHRoaXMudHJhY2tpbmdEYXRhKGZyb20ucG9pbnRlcklkKTtcbiAgICBjb25zdCBvdXRUYXJnZXQgPSB0aGlzLmZpbmRNb3VudGVkVGFyZ2V0KHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cyk7XG4gICAgaWYgKHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cz8ubGVuZ3RoID4gMCAmJiBvdXRUYXJnZXQgIT09IGUudGFyZ2V0KSB7XG4gICAgICBjb25zdCBvdXRUeXBlID0gZnJvbS50eXBlID09PSBcIm1vdXNlbW92ZVwiID8gXCJtb3VzZW91dFwiIDogXCJwb2ludGVyb3V0XCI7XG4gICAgICBjb25zdCBvdXRFdmVudCA9IHRoaXMuY3JlYXRlUG9pbnRlckV2ZW50KGZyb20sIG91dFR5cGUsIG91dFRhcmdldCk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQob3V0RXZlbnQsIFwicG9pbnRlcm91dFwiKTtcbiAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQob3V0RXZlbnQsIFwibW91c2VvdXRcIik7XG4gICAgICBpZiAoIWUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXMob3V0VGFyZ2V0KSkge1xuICAgICAgICBjb25zdCBsZWF2ZUV2ZW50ID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSwgXCJwb2ludGVybGVhdmVcIiwgb3V0VGFyZ2V0KTtcbiAgICAgICAgbGVhdmVFdmVudC5ldmVudFBoYXNlID0gbGVhdmVFdmVudC5BVF9UQVJHRVQ7XG4gICAgICAgIHdoaWxlIChsZWF2ZUV2ZW50LnRhcmdldCAmJiAhZS5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyhsZWF2ZUV2ZW50LnRhcmdldCkpIHtcbiAgICAgICAgICBsZWF2ZUV2ZW50LmN1cnJlbnRUYXJnZXQgPSBsZWF2ZUV2ZW50LnRhcmdldDtcbiAgICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChsZWF2ZUV2ZW50KTtcbiAgICAgICAgICBpZiAoaXNNb3VzZSlcbiAgICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGxlYXZlRXZlbnQsIFwibW91c2VsZWF2ZVwiKTtcbiAgICAgICAgICBsZWF2ZUV2ZW50LnRhcmdldCA9IGxlYXZlRXZlbnQudGFyZ2V0LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyZWVFdmVudChsZWF2ZUV2ZW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZnJlZUV2ZW50KG91dEV2ZW50KTtcbiAgICB9XG4gICAgaWYgKG91dFRhcmdldCAhPT0gZS50YXJnZXQpIHtcbiAgICAgIGNvbnN0IG92ZXJUeXBlID0gZnJvbS50eXBlID09PSBcIm1vdXNlbW92ZVwiID8gXCJtb3VzZW92ZXJcIiA6IFwicG9pbnRlcm92ZXJcIjtcbiAgICAgIGNvbnN0IG92ZXJFdmVudCA9IHRoaXMuY2xvbmVQb2ludGVyRXZlbnQoZSwgb3ZlclR5cGUpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG92ZXJFdmVudCwgXCJwb2ludGVyb3ZlclwiKTtcbiAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQob3ZlckV2ZW50LCBcIm1vdXNlb3ZlclwiKTtcbiAgICAgIGxldCBvdmVyVGFyZ2V0QW5jZXN0b3IgPSBvdXRUYXJnZXQ/LnBhcmVudDtcbiAgICAgIHdoaWxlIChvdmVyVGFyZ2V0QW5jZXN0b3IgJiYgb3ZlclRhcmdldEFuY2VzdG9yICE9PSB0aGlzLnJvb3RUYXJnZXQucGFyZW50KSB7XG4gICAgICAgIGlmIChvdmVyVGFyZ2V0QW5jZXN0b3IgPT09IGUudGFyZ2V0KVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBvdmVyVGFyZ2V0QW5jZXN0b3IgPSBvdmVyVGFyZ2V0QW5jZXN0b3IucGFyZW50O1xuICAgICAgfVxuICAgICAgY29uc3QgZGlkUG9pbnRlckVudGVyID0gIW92ZXJUYXJnZXRBbmNlc3RvciB8fCBvdmVyVGFyZ2V0QW5jZXN0b3IgPT09IHRoaXMucm9vdFRhcmdldC5wYXJlbnQ7XG4gICAgICBpZiAoZGlkUG9pbnRlckVudGVyKSB7XG4gICAgICAgIGNvbnN0IGVudGVyRXZlbnQgPSB0aGlzLmNsb25lUG9pbnRlckV2ZW50KGUsIFwicG9pbnRlcmVudGVyXCIpO1xuICAgICAgICBlbnRlckV2ZW50LmV2ZW50UGhhc2UgPSBlbnRlckV2ZW50LkFUX1RBUkdFVDtcbiAgICAgICAgd2hpbGUgKGVudGVyRXZlbnQudGFyZ2V0ICYmIGVudGVyRXZlbnQudGFyZ2V0ICE9PSBvdXRUYXJnZXQgJiYgZW50ZXJFdmVudC50YXJnZXQgIT09IHRoaXMucm9vdFRhcmdldC5wYXJlbnQpIHtcbiAgICAgICAgICBlbnRlckV2ZW50LmN1cnJlbnRUYXJnZXQgPSBlbnRlckV2ZW50LnRhcmdldDtcbiAgICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChlbnRlckV2ZW50KTtcbiAgICAgICAgICBpZiAoaXNNb3VzZSlcbiAgICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGVudGVyRXZlbnQsIFwibW91c2VlbnRlclwiKTtcbiAgICAgICAgICBlbnRlckV2ZW50LnRhcmdldCA9IGVudGVyRXZlbnQudGFyZ2V0LnBhcmVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZyZWVFdmVudChlbnRlckV2ZW50KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZnJlZUV2ZW50KG92ZXJFdmVudCk7XG4gICAgfVxuICAgIGNvbnN0IGFsbE1ldGhvZHMgPSBbXTtcbiAgICBjb25zdCBhbGxvd0dsb2JhbFBvaW50ZXJFdmVudHMgPSB0aGlzLmVuYWJsZUdsb2JhbE1vdmVFdmVudHMgPz8gdHJ1ZTtcbiAgICB0aGlzLm1vdmVPbkFsbCA/IGFsbE1ldGhvZHMucHVzaChcInBvaW50ZXJtb3ZlXCIpIDogdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwicG9pbnRlcm1vdmVcIik7XG4gICAgYWxsb3dHbG9iYWxQb2ludGVyRXZlbnRzICYmIGFsbE1ldGhvZHMucHVzaChcImdsb2JhbHBvaW50ZXJtb3ZlXCIpO1xuICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgIHRoaXMubW92ZU9uQWxsID8gYWxsTWV0aG9kcy5zcGxpY2UoMSwgMCwgXCJ0b3VjaG1vdmVcIikgOiB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgXCJ0b3VjaG1vdmVcIik7XG4gICAgICBhbGxvd0dsb2JhbFBvaW50ZXJFdmVudHMgJiYgYWxsTWV0aG9kcy5wdXNoKFwiZ2xvYmFsdG91Y2htb3ZlXCIpO1xuICAgIH1cbiAgICBpZiAoaXNNb3VzZSkge1xuICAgICAgdGhpcy5tb3ZlT25BbGwgPyBhbGxNZXRob2RzLnNwbGljZSgxLCAwLCBcIm1vdXNlbW92ZVwiKSA6IHRoaXMuZGlzcGF0Y2hFdmVudChlLCBcIm1vdXNlbW92ZVwiKTtcbiAgICAgIGFsbG93R2xvYmFsUG9pbnRlckV2ZW50cyAmJiBhbGxNZXRob2RzLnB1c2goXCJnbG9iYWxtb3VzZW1vdmVcIik7XG4gICAgICB0aGlzLmN1cnNvciA9IGUudGFyZ2V0Py5jdXJzb3I7XG4gICAgfVxuICAgIGlmIChhbGxNZXRob2RzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYWxsKGUsIGFsbE1ldGhvZHMpO1xuICAgIH1cbiAgICB0aGlzLl9hbGxJbnRlcmFjdGl2ZUVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5faGl0RWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICB0cmFja2luZ0RhdGEub3ZlclRhcmdldHMgPSBlLmNvbXBvc2VkUGF0aCgpO1xuICAgIHRoaXMuZnJlZUV2ZW50KGUpO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSB1cHN0cmVhbSBgcG9pbnRlcm92ZXJgIHRvIGRvd25zdHJlYW0gYHBvaW50ZXJvdmVyYCBhbmQgYHBvaW50ZXJlbnRlcmAgZXZlbnRzLCBpbiB0aGF0IG9yZGVyLlxuICAgKlxuICAgKiBUaGUgdHJhY2tpbmcgZGF0YSBmb3IgdGhlIHNwZWNpZmljIHBvaW50ZXIgZ2V0cyBhIG5ldyBgb3ZlclRhcmdldGAuXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIHVwc3RyZWFtIGBwb2ludGVyb3ZlcmAgZXZlbnQuXG4gICAqL1xuICBtYXBQb2ludGVyT3Zlcihmcm9tKSB7XG4gICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEZlZGVyYXRlZFBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHdhcm4oXCJFdmVudEJvdW5kYXJ5IGNhbm5vdCBtYXAgYSBub24tcG9pbnRlciBldmVudCBhcyBhIHBvaW50ZXIgZXZlbnRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRyYWNraW5nRGF0YSA9IHRoaXMudHJhY2tpbmdEYXRhKGZyb20ucG9pbnRlcklkKTtcbiAgICBjb25zdCBlID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSk7XG4gICAgY29uc3QgaXNNb3VzZSA9IGUucG9pbnRlclR5cGUgPT09IFwibW91c2VcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlLCBcInBvaW50ZXJvdmVyXCIpO1xuICAgIGlmIChpc01vdXNlKVxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwibW91c2VvdmVyXCIpO1xuICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcIm1vdXNlXCIpXG4gICAgICB0aGlzLmN1cnNvciA9IGUudGFyZ2V0Py5jdXJzb3I7XG4gICAgY29uc3QgZW50ZXJFdmVudCA9IHRoaXMuY2xvbmVQb2ludGVyRXZlbnQoZSwgXCJwb2ludGVyZW50ZXJcIik7XG4gICAgZW50ZXJFdmVudC5ldmVudFBoYXNlID0gZW50ZXJFdmVudC5BVF9UQVJHRVQ7XG4gICAgd2hpbGUgKGVudGVyRXZlbnQudGFyZ2V0ICYmIGVudGVyRXZlbnQudGFyZ2V0ICE9PSB0aGlzLnJvb3RUYXJnZXQucGFyZW50KSB7XG4gICAgICBlbnRlckV2ZW50LmN1cnJlbnRUYXJnZXQgPSBlbnRlckV2ZW50LnRhcmdldDtcbiAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGVudGVyRXZlbnQpO1xuICAgICAgaWYgKGlzTW91c2UpXG4gICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGVudGVyRXZlbnQsIFwibW91c2VlbnRlclwiKTtcbiAgICAgIGVudGVyRXZlbnQudGFyZ2V0ID0gZW50ZXJFdmVudC50YXJnZXQucGFyZW50O1xuICAgIH1cbiAgICB0cmFja2luZ0RhdGEub3ZlclRhcmdldHMgPSBlLmNvbXBvc2VkUGF0aCgpO1xuICAgIHRoaXMuZnJlZUV2ZW50KGUpO1xuICAgIHRoaXMuZnJlZUV2ZW50KGVudGVyRXZlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSB1cHN0cmVhbSBgcG9pbnRlcm91dGAgdG8gZG93bnN0cmVhbSBgcG9pbnRlcm91dGAsIGBwb2ludGVybGVhdmVgIGV2ZW50cywgaW4gdGhhdCBvcmRlci5cbiAgICpcbiAgICogVGhlIHRyYWNraW5nIGRhdGEgZm9yIHRoZSBzcGVjaWZpYyBwb2ludGVyIGlzIGNsZWFyZWQgb2YgYSBgb3ZlclRhcmdldGAuXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIHVwc3RyZWFtIGBwb2ludGVyb3V0YCBldmVudC5cbiAgICovXG4gIG1hcFBvaW50ZXJPdXQoZnJvbSkge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQpKSB7XG4gICAgICB3YXJuKFwiRXZlbnRCb3VuZGFyeSBjYW5ub3QgbWFwIGEgbm9uLXBvaW50ZXIgZXZlbnQgYXMgYSBwb2ludGVyIGV2ZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0cmFja2luZ0RhdGEgPSB0aGlzLnRyYWNraW5nRGF0YShmcm9tLnBvaW50ZXJJZCk7XG4gICAgaWYgKHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cykge1xuICAgICAgY29uc3QgaXNNb3VzZSA9IGZyb20ucG9pbnRlclR5cGUgPT09IFwibW91c2VcIiB8fCBmcm9tLnBvaW50ZXJUeXBlID09PSBcInBlblwiO1xuICAgICAgY29uc3Qgb3V0VGFyZ2V0ID0gdGhpcy5maW5kTW91bnRlZFRhcmdldCh0cmFja2luZ0RhdGEub3ZlclRhcmdldHMpO1xuICAgICAgY29uc3Qgb3V0RXZlbnQgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tLCBcInBvaW50ZXJvdXRcIiwgb3V0VGFyZ2V0KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChvdXRFdmVudCk7XG4gICAgICBpZiAoaXNNb3VzZSlcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG91dEV2ZW50LCBcIm1vdXNlb3V0XCIpO1xuICAgICAgY29uc3QgbGVhdmVFdmVudCA9IHRoaXMuY3JlYXRlUG9pbnRlckV2ZW50KGZyb20sIFwicG9pbnRlcmxlYXZlXCIsIG91dFRhcmdldCk7XG4gICAgICBsZWF2ZUV2ZW50LmV2ZW50UGhhc2UgPSBsZWF2ZUV2ZW50LkFUX1RBUkdFVDtcbiAgICAgIHdoaWxlIChsZWF2ZUV2ZW50LnRhcmdldCAmJiBsZWF2ZUV2ZW50LnRhcmdldCAhPT0gdGhpcy5yb290VGFyZ2V0LnBhcmVudCkge1xuICAgICAgICBsZWF2ZUV2ZW50LmN1cnJlbnRUYXJnZXQgPSBsZWF2ZUV2ZW50LnRhcmdldDtcbiAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQobGVhdmVFdmVudCk7XG4gICAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGxlYXZlRXZlbnQsIFwibW91c2VsZWF2ZVwiKTtcbiAgICAgICAgbGVhdmVFdmVudC50YXJnZXQgPSBsZWF2ZUV2ZW50LnRhcmdldC5wYXJlbnQ7XG4gICAgICB9XG4gICAgICB0cmFja2luZ0RhdGEub3ZlclRhcmdldHMgPSBudWxsO1xuICAgICAgdGhpcy5mcmVlRXZlbnQob3V0RXZlbnQpO1xuICAgICAgdGhpcy5mcmVlRXZlbnQobGVhdmVFdmVudCk7XG4gICAgfVxuICAgIHRoaXMuY3Vyc29yID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogTWFwcyB0aGUgdXBzdHJlYW0gYHBvaW50ZXJ1cGAgZXZlbnQgdG8gZG93bnN0cmVhbSBgcG9pbnRlcnVwYCwgYHBvaW50ZXJ1cG91dHNpZGVgLFxuICAgKiBhbmQgYGNsaWNrYC9gcmlnaHRjbGlja2AvYHBvaW50ZXJ0YXBgIGV2ZW50cywgaW4gdGhhdCBvcmRlci5cbiAgICpcbiAgICogVGhlIGBwb2ludGVydXBvdXRzaWRlYCBldmVudCBidWJibGVzIGZyb20gdGhlIG9yaWdpbmFsIGBwb2ludGVyZG93bmAgdGFyZ2V0IHRvIHRoZSBtb3N0IHNwZWNpZmljXG4gICAqIGFuY2VzdG9yIG9mIHRoZSBgcG9pbnRlcmRvd25gIGFuZCBgcG9pbnRlcnVwYCB0YXJnZXRzLCB3aGljaCBpcyBhbHNvIHRoZSBgY2xpY2tgIGV2ZW50J3MgdGFyZ2V0LiBgdG91Y2hlbmRgLFxuICAgKiBgcmlnaHR1cGAsIGBtb3VzZXVwYCwgYHRvdWNoZW5kb3V0c2lkZWAsIGByaWdodHVwb3V0c2lkZWAsIGBtb3VzZXVwb3V0c2lkZWAsIGFuZCBgdGFwYCBhcmUgZmlyZWQgYXMgd2VsbCBmb3JcbiAgICogc3BlY2lmaWMgcG9pbnRlciB0eXBlcy5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgdXBzdHJlYW0gYHBvaW50ZXJ1cGAgZXZlbnQuXG4gICAqL1xuICBtYXBQb2ludGVyVXAoZnJvbSkge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQpKSB7XG4gICAgICB3YXJuKFwiRXZlbnRCb3VuZGFyeSBjYW5ub3QgbWFwIGEgbm9uLXBvaW50ZXIgZXZlbnQgYXMgYSBwb2ludGVyIGV2ZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBjb25zdCBlID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwicG9pbnRlcnVwXCIpO1xuICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlLCBcInRvdWNoZW5kXCIpO1xuICAgIH0gZWxzZSBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCIpIHtcbiAgICAgIGNvbnN0IGlzUmlnaHRCdXR0b24gPSBlLmJ1dHRvbiA9PT0gMjtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlLCBpc1JpZ2h0QnV0dG9uID8gXCJyaWdodHVwXCIgOiBcIm1vdXNldXBcIik7XG4gICAgfVxuICAgIGNvbnN0IHRyYWNraW5nRGF0YSA9IHRoaXMudHJhY2tpbmdEYXRhKGZyb20ucG9pbnRlcklkKTtcbiAgICBjb25zdCBwcmVzc1RhcmdldCA9IHRoaXMuZmluZE1vdW50ZWRUYXJnZXQodHJhY2tpbmdEYXRhLnByZXNzVGFyZ2V0c0J5QnV0dG9uW2Zyb20uYnV0dG9uXSk7XG4gICAgbGV0IGNsaWNrVGFyZ2V0ID0gcHJlc3NUYXJnZXQ7XG4gICAgaWYgKHByZXNzVGFyZ2V0ICYmICFlLmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKHByZXNzVGFyZ2V0KSkge1xuICAgICAgbGV0IGN1cnJlbnRUYXJnZXQgPSBwcmVzc1RhcmdldDtcbiAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICYmICFlLmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKGN1cnJlbnRUYXJnZXQpKSB7XG4gICAgICAgIGUuY3VycmVudFRhcmdldCA9IGN1cnJlbnRUYXJnZXQ7XG4gICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIFwicG9pbnRlcnVwb3V0c2lkZVwiKTtcbiAgICAgICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xuICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIFwidG91Y2hlbmRvdXRzaWRlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGUucG9pbnRlclR5cGUgPT09IFwibW91c2VcIiB8fCBlLnBvaW50ZXJUeXBlID09PSBcInBlblwiKSB7XG4gICAgICAgICAgY29uc3QgaXNSaWdodEJ1dHRvbiA9IGUuYnV0dG9uID09PSAyO1xuICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIGlzUmlnaHRCdXR0b24gPyBcInJpZ2h0dXBvdXRzaWRlXCIgOiBcIm1vdXNldXBvdXRzaWRlXCIpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudDtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSB0cmFja2luZ0RhdGEucHJlc3NUYXJnZXRzQnlCdXR0b25bZnJvbS5idXR0b25dO1xuICAgICAgY2xpY2tUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xuICAgIH1cbiAgICBpZiAoY2xpY2tUYXJnZXQpIHtcbiAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSB0aGlzLmNsb25lUG9pbnRlckV2ZW50KGUsIFwiY2xpY2tcIik7XG4gICAgICBjbGlja0V2ZW50LnRhcmdldCA9IGNsaWNrVGFyZ2V0O1xuICAgICAgY2xpY2tFdmVudC5wYXRoID0gbnVsbDtcbiAgICAgIGlmICghdHJhY2tpbmdEYXRhLmNsaWNrc0J5QnV0dG9uW2Zyb20uYnV0dG9uXSkge1xuICAgICAgICB0cmFja2luZ0RhdGEuY2xpY2tzQnlCdXR0b25bZnJvbS5idXR0b25dID0ge1xuICAgICAgICAgIGNsaWNrQ291bnQ6IDAsXG4gICAgICAgICAgdGFyZ2V0OiBjbGlja0V2ZW50LnRhcmdldCxcbiAgICAgICAgICB0aW1lU3RhbXA6IG5vd1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgY29uc3QgY2xpY2tIaXN0b3J5ID0gdHJhY2tpbmdEYXRhLmNsaWNrc0J5QnV0dG9uW2Zyb20uYnV0dG9uXTtcbiAgICAgIGlmIChjbGlja0hpc3RvcnkudGFyZ2V0ID09PSBjbGlja0V2ZW50LnRhcmdldCAmJiBub3cgLSBjbGlja0hpc3RvcnkudGltZVN0YW1wIDwgMjAwKSB7XG4gICAgICAgICsrY2xpY2tIaXN0b3J5LmNsaWNrQ291bnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGlja0hpc3RvcnkuY2xpY2tDb3VudCA9IDE7XG4gICAgICB9XG4gICAgICBjbGlja0hpc3RvcnkudGFyZ2V0ID0gY2xpY2tFdmVudC50YXJnZXQ7XG4gICAgICBjbGlja0hpc3RvcnkudGltZVN0YW1wID0gbm93O1xuICAgICAgY2xpY2tFdmVudC5kZXRhaWwgPSBjbGlja0hpc3RvcnkuY2xpY2tDb3VudDtcbiAgICAgIGlmIChjbGlja0V2ZW50LnBvaW50ZXJUeXBlID09PSBcIm1vdXNlXCIpIHtcbiAgICAgICAgY29uc3QgaXNSaWdodEJ1dHRvbiA9IGNsaWNrRXZlbnQuYnV0dG9uID09PSAyO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoY2xpY2tFdmVudCwgaXNSaWdodEJ1dHRvbiA/IFwicmlnaHRjbGlja1wiIDogXCJjbGlja1wiKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xpY2tFdmVudC5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChjbGlja0V2ZW50LCBcInRhcFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChjbGlja0V2ZW50LCBcInBvaW50ZXJ0YXBcIik7XG4gICAgICB0aGlzLmZyZWVFdmVudChjbGlja0V2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5mcmVlRXZlbnQoZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIHVwc3RyZWFtIGBwb2ludGVydXBvdXRzaWRlYCBldmVudCB0byBhIGRvd25zdHJlYW0gYHBvaW50ZXJ1cG91dHNpZGVgIGV2ZW50LCBidWJibGluZyBmcm9tIHRoZSBvcmlnaW5hbFxuICAgKiBgcG9pbnRlcmRvd25gIHRhcmdldCB0byBgcm9vdFRhcmdldGAuXG4gICAqXG4gICAqIChUaGUgbW9zdCBzcGVjaWZpYyBhbmNlc3RvciBvZiB0aGUgYHBvaW50ZXJkb3duYCBldmVudCBhbmQgdGhlIGBwb2ludGVydXBgIGV2ZW50IG11c3QgdGhlXG4gICAqIGB7QGxpbmsgRXZlbnRCb3VuZGFyeX0ncyByb290IGJlY2F1c2UgdGhlIGBwb2ludGVydXBgIGV2ZW50IG9jY3VycmVkIG91dHNpZGUgb2YgdGhlIGJvdW5kYXJ5LilcbiAgICpcbiAgICogYHRvdWNoZW5kb3V0c2lkZWAsIGBtb3VzZXVwb3V0c2lkZWAsIGFuZCBgcmlnaHR1cG91dHNpZGVgIGV2ZW50cyBhcmUgZmlyZWQgYXMgd2VsbCBmb3Igc3BlY2lmaWMgcG9pbnRlclxuICAgKiB0eXBlcy4gVGhlIHRyYWNraW5nIGRhdGEgZm9yIHRoZSBzcGVjaWZpYyBwb2ludGVyIGlzIGNsZWFyZWQgb2YgYSBgcHJlc3NUYXJnZXRgLlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSB1cHN0cmVhbSBgcG9pbnRlcnVwb3V0c2lkZWAgZXZlbnQuXG4gICAqL1xuICBtYXBQb2ludGVyVXBPdXRzaWRlKGZyb20pIHtcbiAgICBpZiAoIShmcm9tIGluc3RhbmNlb2YgRmVkZXJhdGVkUG9pbnRlckV2ZW50KSkge1xuICAgICAgd2FybihcIkV2ZW50Qm91bmRhcnkgY2Fubm90IG1hcCBhIG5vbi1wb2ludGVyIGV2ZW50IGFzIGEgcG9pbnRlciBldmVudFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdHJhY2tpbmdEYXRhID0gdGhpcy50cmFja2luZ0RhdGEoZnJvbS5wb2ludGVySWQpO1xuICAgIGNvbnN0IHByZXNzVGFyZ2V0ID0gdGhpcy5maW5kTW91bnRlZFRhcmdldCh0cmFja2luZ0RhdGEucHJlc3NUYXJnZXRzQnlCdXR0b25bZnJvbS5idXR0b25dKTtcbiAgICBjb25zdCBlID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSk7XG4gICAgaWYgKHByZXNzVGFyZ2V0KSB7XG4gICAgICBsZXQgY3VycmVudFRhcmdldCA9IHByZXNzVGFyZ2V0O1xuICAgICAgd2hpbGUgKGN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0ID0gY3VycmVudFRhcmdldDtcbiAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgXCJwb2ludGVydXBvdXRzaWRlXCIpO1xuICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG4gICAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgXCJ0b3VjaGVuZG91dHNpZGVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCIpIHtcbiAgICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChlLCBlLmJ1dHRvbiA9PT0gMiA/IFwicmlnaHR1cG91dHNpZGVcIiA6IFwibW91c2V1cG91dHNpZGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFRhcmdldCA9IGN1cnJlbnRUYXJnZXQucGFyZW50O1xuICAgICAgfVxuICAgICAgZGVsZXRlIHRyYWNraW5nRGF0YS5wcmVzc1RhcmdldHNCeUJ1dHRvbltmcm9tLmJ1dHRvbl07XG4gICAgfVxuICAgIHRoaXMuZnJlZUV2ZW50KGUpO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSB1cHN0cmVhbSBgd2hlZWxgIGV2ZW50IHRvIGEgZG93bnN0cmVhbSBgd2hlZWxgIGV2ZW50LlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSB1cHN0cmVhbSBgd2hlZWxgIGV2ZW50LlxuICAgKi9cbiAgbWFwV2hlZWwoZnJvbSkge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRXaGVlbEV2ZW50KSkge1xuICAgICAgd2FybihcIkV2ZW50Qm91bmRhcnkgY2Fubm90IG1hcCBhIG5vbi13aGVlbCBldmVudCBhcyBhIHdoZWVsIGV2ZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB3aGVlbEV2ZW50ID0gdGhpcy5jcmVhdGVXaGVlbEV2ZW50KGZyb20pO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh3aGVlbEV2ZW50KTtcbiAgICB0aGlzLmZyZWVFdmVudCh3aGVlbEV2ZW50KTtcbiAgfVxuICAvKipcbiAgICogRmluZHMgdGhlIG1vc3Qgc3BlY2lmaWMgZXZlbnQtdGFyZ2V0IGluIHRoZSBnaXZlbiBwcm9wYWdhdGlvbiBwYXRoIHRoYXQgaXMgc3RpbGwgbW91bnRlZCBpbiB0aGUgc2NlbmUgZ3JhcGguXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZCB0byBmaW5kIHRoZSBjb3JyZWN0IGBwb2ludGVydXBgIGFuZCBgcG9pbnRlcm91dGAgdGFyZ2V0IGluIHRoZSBjYXNlIHRoYXQgdGhlIG9yaWdpbmFsIGBwb2ludGVyZG93bmBcbiAgICogb3IgYHBvaW50ZXJvdmVyYCB0YXJnZXQgd2FzIHVubW91bnRlZCBmcm9tIHRoZSBzY2VuZSBncmFwaC5cbiAgICogQHBhcmFtIHByb3BhZ2F0aW9uUGF0aCAtIFRoZSBwcm9wYWdhdGlvbiBwYXRoIHdhcyB2YWxpZCBpbiB0aGUgcGFzdC5cbiAgICogQHJldHVybnMgLSBUaGUgbW9zdCBzcGVjaWZpYyBldmVudC10YXJnZXQgc3RpbGwgbW91bnRlZCBhdCB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2NlbmUgZ3JhcGguXG4gICAqL1xuICBmaW5kTW91bnRlZFRhcmdldChwcm9wYWdhdGlvblBhdGgpIHtcbiAgICBpZiAoIXByb3BhZ2F0aW9uUGF0aCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGxldCBjdXJyZW50VGFyZ2V0ID0gcHJvcGFnYXRpb25QYXRoWzBdO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcHJvcGFnYXRpb25QYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocHJvcGFnYXRpb25QYXRoW2ldLnBhcmVudCA9PT0gY3VycmVudFRhcmdldCkge1xuICAgICAgICBjdXJyZW50VGFyZ2V0ID0gcHJvcGFnYXRpb25QYXRoW2ldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjdXJyZW50VGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGV2ZW50IHdob3NlIGBvcmlnaW5hbEV2ZW50YCBpcyBgZnJvbWAsIHdpdGggYW4gb3B0aW9uYWwgYHR5cGVgIGFuZCBgdGFyZ2V0YCBvdmVycmlkZS5cbiAgICpcbiAgICogVGhlIGV2ZW50IGlzIGFsbG9jYXRlZCB1c2luZyB7QGxpbmsgRXZlbnRCb3VuZGFyeSNhbGxvY2F0ZUV2ZW50IHRoaXMuYWxsb2NhdGVFdmVudH0uXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIGBvcmlnaW5hbEV2ZW50YCBmb3IgdGhlIHJldHVybmVkIGV2ZW50LlxuICAgKiBAcGFyYW0gW3R5cGU9ZnJvbS50eXBlXSAtIFRoZSB0eXBlIG9mIHRoZSByZXR1cm5lZCBldmVudC5cbiAgICogQHBhcmFtIHRhcmdldCAtIFRoZSB0YXJnZXQgb2YgdGhlIHJldHVybmVkIGV2ZW50LlxuICAgKi9cbiAgY3JlYXRlUG9pbnRlckV2ZW50KGZyb20sIHR5cGUsIHRhcmdldCkge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5hbGxvY2F0ZUV2ZW50KEZlZGVyYXRlZFBvaW50ZXJFdmVudCk7XG4gICAgdGhpcy5jb3B5UG9pbnRlckRhdGEoZnJvbSwgZXZlbnQpO1xuICAgIHRoaXMuY29weU1vdXNlRGF0YShmcm9tLCBldmVudCk7XG4gICAgdGhpcy5jb3B5RGF0YShmcm9tLCBldmVudCk7XG4gICAgZXZlbnQubmF0aXZlRXZlbnQgPSBmcm9tLm5hdGl2ZUV2ZW50O1xuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQgPSBmcm9tO1xuICAgIGV2ZW50LnRhcmdldCA9IHRhcmdldCA/PyB0aGlzLmhpdFRlc3QoZXZlbnQuZ2xvYmFsLngsIGV2ZW50Lmdsb2JhbC55KSA/PyB0aGlzLl9oaXRFbGVtZW50c1swXTtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGV2ZW50LnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB3aGVlbCBldmVudCB3aG9zZSBgb3JpZ2luYWxFdmVudGAgaXMgYGZyb21gLlxuICAgKlxuICAgKiBUaGUgZXZlbnQgaXMgYWxsb2NhdGVkIHVzaW5nIHtAbGluayBFdmVudEJvdW5kYXJ5I2FsbG9jYXRlRXZlbnQgdGhpcy5hbGxvY2F0ZUV2ZW50fS5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgdXBzdHJlYW0gd2hlZWwgZXZlbnQuXG4gICAqL1xuICBjcmVhdGVXaGVlbEV2ZW50KGZyb20pIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuYWxsb2NhdGVFdmVudChGZWRlcmF0ZWRXaGVlbEV2ZW50KTtcbiAgICB0aGlzLmNvcHlXaGVlbERhdGEoZnJvbSwgZXZlbnQpO1xuICAgIHRoaXMuY29weU1vdXNlRGF0YShmcm9tLCBldmVudCk7XG4gICAgdGhpcy5jb3B5RGF0YShmcm9tLCBldmVudCk7XG4gICAgZXZlbnQubmF0aXZlRXZlbnQgPSBmcm9tLm5hdGl2ZUV2ZW50O1xuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQgPSBmcm9tO1xuICAgIGV2ZW50LnRhcmdldCA9IHRoaXMuaGl0VGVzdChldmVudC5nbG9iYWwueCwgZXZlbnQuZ2xvYmFsLnkpO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICAvKipcbiAgICogQ2xvbmVzIHRoZSBldmVudCBgZnJvbWAsIHdpdGggYW4gb3B0aW9uYWwgYHR5cGVgIG92ZXJyaWRlLlxuICAgKlxuICAgKiBUaGUgZXZlbnQgaXMgYWxsb2NhdGVkIHVzaW5nIHtAbGluayBFdmVudEJvdW5kYXJ5I2FsbG9jYXRlRXZlbnQgdGhpcy5hbGxvY2F0ZUV2ZW50fS5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgZXZlbnQgdG8gY2xvbmUuXG4gICAqIEBwYXJhbSBbdHlwZT1mcm9tLnR5cGVdIC0gVGhlIHR5cGUgb2YgdGhlIHJldHVybmVkIGV2ZW50LlxuICAgKi9cbiAgY2xvbmVQb2ludGVyRXZlbnQoZnJvbSwgdHlwZSkge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5hbGxvY2F0ZUV2ZW50KEZlZGVyYXRlZFBvaW50ZXJFdmVudCk7XG4gICAgZXZlbnQubmF0aXZlRXZlbnQgPSBmcm9tLm5hdGl2ZUV2ZW50O1xuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQgPSBmcm9tLm9yaWdpbmFsRXZlbnQ7XG4gICAgdGhpcy5jb3B5UG9pbnRlckRhdGEoZnJvbSwgZXZlbnQpO1xuICAgIHRoaXMuY29weU1vdXNlRGF0YShmcm9tLCBldmVudCk7XG4gICAgdGhpcy5jb3B5RGF0YShmcm9tLCBldmVudCk7XG4gICAgZXZlbnQudGFyZ2V0ID0gZnJvbS50YXJnZXQ7XG4gICAgZXZlbnQucGF0aCA9IGZyb20uY29tcG9zZWRQYXRoKCkuc2xpY2UoKTtcbiAgICBldmVudC50eXBlID0gdHlwZSA/PyBldmVudC50eXBlO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHdoZWVsIHtAbGluayBGZWRlcmF0ZWRXaGVlbEV2ZW50fSBkYXRhIGZyb20gYGZyb21gIGludG8gYHRvYC5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBjb3BpZWQ6XG4gICAqICsgZGVsdGFNb2RlXG4gICAqICsgZGVsdGFYXG4gICAqICsgZGVsdGFZXG4gICAqICsgZGVsdGFaXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIGV2ZW50IHRvIGNvcHkgZGF0YSBmcm9tLlxuICAgKiBAcGFyYW0gdG8gLSBUaGUgZXZlbnQgdG8gY29weSBkYXRhIGludG8uXG4gICAqL1xuICBjb3B5V2hlZWxEYXRhKGZyb20sIHRvKSB7XG4gICAgdG8uZGVsdGFNb2RlID0gZnJvbS5kZWx0YU1vZGU7XG4gICAgdG8uZGVsdGFYID0gZnJvbS5kZWx0YVg7XG4gICAgdG8uZGVsdGFZID0gZnJvbS5kZWx0YVk7XG4gICAgdG8uZGVsdGFaID0gZnJvbS5kZWx0YVo7XG4gIH1cbiAgLyoqXG4gICAqIENvcGllcyBwb2ludGVyIHtAbGluayBGZWRlcmF0ZWRQb2ludGVyRXZlbnR9IGRhdGEgZnJvbSBgZnJvbWAgaW50byBgdG9gLlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgYXJlIGNvcGllZDpcbiAgICogKyBwb2ludGVySWRcbiAgICogKyB3aWR0aFxuICAgKiArIGhlaWdodFxuICAgKiArIGlzUHJpbWFyeVxuICAgKiArIHBvaW50ZXJUeXBlXG4gICAqICsgcHJlc3N1cmVcbiAgICogKyB0YW5nZW50aWFsUHJlc3N1cmVcbiAgICogKyB0aWx0WFxuICAgKiArIHRpbHRZXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIGV2ZW50IHRvIGNvcHkgZGF0YSBmcm9tLlxuICAgKiBAcGFyYW0gdG8gLSBUaGUgZXZlbnQgdG8gY29weSBkYXRhIGludG8uXG4gICAqL1xuICBjb3B5UG9pbnRlckRhdGEoZnJvbSwgdG8pIHtcbiAgICBpZiAoIShmcm9tIGluc3RhbmNlb2YgRmVkZXJhdGVkUG9pbnRlckV2ZW50ICYmIHRvIGluc3RhbmNlb2YgRmVkZXJhdGVkUG9pbnRlckV2ZW50KSlcbiAgICAgIHJldHVybjtcbiAgICB0by5wb2ludGVySWQgPSBmcm9tLnBvaW50ZXJJZDtcbiAgICB0by53aWR0aCA9IGZyb20ud2lkdGg7XG4gICAgdG8uaGVpZ2h0ID0gZnJvbS5oZWlnaHQ7XG4gICAgdG8uaXNQcmltYXJ5ID0gZnJvbS5pc1ByaW1hcnk7XG4gICAgdG8ucG9pbnRlclR5cGUgPSBmcm9tLnBvaW50ZXJUeXBlO1xuICAgIHRvLnByZXNzdXJlID0gZnJvbS5wcmVzc3VyZTtcbiAgICB0by50YW5nZW50aWFsUHJlc3N1cmUgPSBmcm9tLnRhbmdlbnRpYWxQcmVzc3VyZTtcbiAgICB0by50aWx0WCA9IGZyb20udGlsdFg7XG4gICAgdG8udGlsdFkgPSBmcm9tLnRpbHRZO1xuICAgIHRvLnR3aXN0ID0gZnJvbS50d2lzdDtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIG1vdXNlIHtAbGluayBGZWRlcmF0ZWRNb3VzZUV2ZW50fSBkYXRhIGZyb20gYGZyb21gIHRvIGB0b2AuXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgY29waWVkOlxuICAgKiArIGFsdEtleVxuICAgKiArIGJ1dHRvblxuICAgKiArIGJ1dHRvbnNcbiAgICogKyBjbGllbnRYXG4gICAqICsgY2xpZW50WVxuICAgKiArIG1ldGFLZXlcbiAgICogKyBtb3ZlbWVudFhcbiAgICogKyBtb3ZlbWVudFlcbiAgICogKyBwYWdlWFxuICAgKiArIHBhZ2VZXG4gICAqICsgeFxuICAgKiArIHlcbiAgICogKyBzY3JlZW5cbiAgICogKyBzaGlmdEtleVxuICAgKiArIGdsb2JhbFxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSBldmVudCB0byBjb3B5IGRhdGEgZnJvbS5cbiAgICogQHBhcmFtIHRvIC0gVGhlIGV2ZW50IHRvIGNvcHkgZGF0YSBpbnRvLlxuICAgKi9cbiAgY29weU1vdXNlRGF0YShmcm9tLCB0bykge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRNb3VzZUV2ZW50ICYmIHRvIGluc3RhbmNlb2YgRmVkZXJhdGVkTW91c2VFdmVudCkpXG4gICAgICByZXR1cm47XG4gICAgdG8uYWx0S2V5ID0gZnJvbS5hbHRLZXk7XG4gICAgdG8uYnV0dG9uID0gZnJvbS5idXR0b247XG4gICAgdG8uYnV0dG9ucyA9IGZyb20uYnV0dG9ucztcbiAgICB0by5jbGllbnQuY29weUZyb20oZnJvbS5jbGllbnQpO1xuICAgIHRvLmN0cmxLZXkgPSBmcm9tLmN0cmxLZXk7XG4gICAgdG8ubWV0YUtleSA9IGZyb20ubWV0YUtleTtcbiAgICB0by5tb3ZlbWVudC5jb3B5RnJvbShmcm9tLm1vdmVtZW50KTtcbiAgICB0by5zY3JlZW4uY29weUZyb20oZnJvbS5zY3JlZW4pO1xuICAgIHRvLnNoaWZ0S2V5ID0gZnJvbS5zaGlmdEtleTtcbiAgICB0by5nbG9iYWwuY29weUZyb20oZnJvbS5nbG9iYWwpO1xuICB9XG4gIC8qKlxuICAgKiBDb3BpZXMgYmFzZSB7QGxpbmsgRmVkZXJhdGVkRXZlbnR9IGRhdGEgZnJvbSBgZnJvbWAgaW50byBgdG9gLlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgYXJlIGNvcGllZDpcbiAgICogKyBpc1RydXN0ZWRcbiAgICogKyBzcmNFbGVtZW50XG4gICAqICsgdGltZVN0YW1wXG4gICAqICsgdHlwZVxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSBldmVudCB0byBjb3B5IGRhdGEgZnJvbS5cbiAgICogQHBhcmFtIHRvIC0gVGhlIGV2ZW50IHRvIGNvcHkgZGF0YSBpbnRvLlxuICAgKi9cbiAgY29weURhdGEoZnJvbSwgdG8pIHtcbiAgICB0by5pc1RydXN0ZWQgPSBmcm9tLmlzVHJ1c3RlZDtcbiAgICB0by5zcmNFbGVtZW50ID0gZnJvbS5zcmNFbGVtZW50O1xuICAgIHRvLnRpbWVTdGFtcCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIHRvLnR5cGUgPSBmcm9tLnR5cGU7XG4gICAgdG8uZGV0YWlsID0gZnJvbS5kZXRhaWw7XG4gICAgdG8udmlldyA9IGZyb20udmlldztcbiAgICB0by53aGljaCA9IGZyb20ud2hpY2g7XG4gICAgdG8ubGF5ZXIuY29weUZyb20oZnJvbS5sYXllcik7XG4gICAgdG8ucGFnZS5jb3B5RnJvbShmcm9tLnBhZ2UpO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0gaWQgLSBUaGUgcG9pbnRlciBJRC5cbiAgICogQHJldHVybnMgVGhlIHRyYWNraW5nIGRhdGEgc3RvcmVkIGZvciB0aGUgZ2l2ZW4gcG9pbnRlci4gSWYgbm8gZGF0YSBleGlzdHMsIGEgYmxhbmtcbiAgICogIHN0YXRlIHdpbGwgYmUgY3JlYXRlZC5cbiAgICovXG4gIHRyYWNraW5nRGF0YShpZCkge1xuICAgIGlmICghdGhpcy5tYXBwaW5nU3RhdGUudHJhY2tpbmdEYXRhW2lkXSkge1xuICAgICAgdGhpcy5tYXBwaW5nU3RhdGUudHJhY2tpbmdEYXRhW2lkXSA9IHtcbiAgICAgICAgcHJlc3NUYXJnZXRzQnlCdXR0b246IHt9LFxuICAgICAgICBjbGlja3NCeUJ1dHRvbjoge30sXG4gICAgICAgIG92ZXJUYXJnZXQ6IG51bGxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1hcHBpbmdTdGF0ZS50cmFja2luZ0RhdGFbaWRdO1xuICB9XG4gIC8qKlxuICAgKiBBbGxvY2F0ZSBhIHNwZWNpZmljIHR5cGUgb2YgZXZlbnQgZnJvbSB7QGxpbmsgRXZlbnRCb3VuZGFyeSNldmVudFBvb2wgdGhpcy5ldmVudFBvb2x9LlxuICAgKlxuICAgKiBUaGlzIGFsbG9jYXRpb24gaXMgY29uc3RydWN0b3ItYWdub3N0aWMsIGFzIGxvbmcgYXMgaXQgb25seSB0YWtlcyBvbmUgYXJndW1lbnQgLSB0aGlzIGV2ZW50XG4gICAqIGJvdW5kYXJ5LlxuICAgKiBAcGFyYW0gY29uc3RydWN0b3IgLSBUaGUgZXZlbnQncyBjb25zdHJ1Y3Rvci5cbiAgICogQHJldHVybnMgQW4gZXZlbnQgb2YgdGhlIGdpdmVuIHR5cGUuXG4gICAqL1xuICBhbGxvY2F0ZUV2ZW50KGNvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCF0aGlzLmV2ZW50UG9vbC5oYXMoY29uc3RydWN0b3IpKSB7XG4gICAgICB0aGlzLmV2ZW50UG9vbC5zZXQoY29uc3RydWN0b3IsIFtdKTtcbiAgICB9XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLmV2ZW50UG9vbC5nZXQoY29uc3RydWN0b3IpLnBvcCgpIHx8IG5ldyBjb25zdHJ1Y3Rvcih0aGlzKTtcbiAgICBldmVudC5ldmVudFBoYXNlID0gZXZlbnQuTk9ORTtcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0ID0gbnVsbDtcbiAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gZmFsc2U7XG4gICAgZXZlbnQucGF0aCA9IG51bGw7XG4gICAgZXZlbnQudGFyZ2V0ID0gbnVsbDtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIEZyZWVzIHRoZSBldmVudCBhbmQgcHV0cyBpdCBiYWNrIGludG8gdGhlIGV2ZW50IHBvb2wuXG4gICAqXG4gICAqIEl0IGlzIGlsbGVnYWwgdG8gcmV1c2UgdGhlIGV2ZW50IHVudGlsIGl0IGlzIGFsbG9jYXRlZCBhZ2FpbiwgdXNpbmcgYHRoaXMuYWxsb2NhdGVFdmVudGAuXG4gICAqXG4gICAqIEl0IGlzIGFsc28gYWR2aXNlZCB0aGF0IGV2ZW50cyBub3QgYWxsb2NhdGVkIGZyb20ge0BsaW5rIEV2ZW50Qm91bmRhcnkjYWxsb2NhdGVFdmVudCB0aGlzLmFsbG9jYXRlRXZlbnR9XG4gICAqIG5vdCBiZSBmcmVlZC4gVGhpcyBpcyBiZWNhdXNlIG9mIHRoZSBwb3NzaWJpbGl0eSB0aGF0IHRoZSBzYW1lIGV2ZW50IGlzIGZyZWVkIHR3aWNlLCB3aGljaCBjYW4gY2F1c2VcbiAgICogaXQgdG8gYmUgYWxsb2NhdGVkIHR3aWNlICYgcmVzdWx0IGluIG92ZXJ3cml0aW5nLlxuICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgdG8gYmUgZnJlZWQuXG4gICAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIGV2ZW50IGlzIG1hbmFnZWQgYnkgYW5vdGhlciBldmVudCBib3VuZGFyeS5cbiAgICovXG4gIGZyZWVFdmVudChldmVudCkge1xuICAgIGlmIChldmVudC5tYW5hZ2VyICE9PSB0aGlzKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSXQgaXMgaWxsZWdhbCB0byBmcmVlIGFuIGV2ZW50IG5vdCBtYW5hZ2VkIGJ5IHRoaXMgRXZlbnRCb3VuZGFyeSFcIik7XG4gICAgY29uc3QgY29uc3RydWN0b3IgPSBldmVudC5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoIXRoaXMuZXZlbnRQb29sLmhhcyhjb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRoaXMuZXZlbnRQb29sLnNldChjb25zdHJ1Y3RvciwgW10pO1xuICAgIH1cbiAgICB0aGlzLmV2ZW50UG9vbC5nZXQoY29uc3RydWN0b3IpLnB1c2goZXZlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIHtAbGluayBFdmVudEVtaXR0ZXIuZW1pdH0sIGV4Y2VwdCBpdCBzdG9wcyBpZiB0aGUgYHByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkYCBmbGFnXG4gICAqIGlzIHNldCBvbiB0aGUgZXZlbnQuXG4gICAqIEBwYXJhbSBlIC0gVGhlIGV2ZW50IHRvIGNhbGwgZWFjaCBsaXN0ZW5lciB3aXRoLlxuICAgKiBAcGFyYW0gdHlwZSAtIFRoZSBldmVudCBrZXkuXG4gICAqL1xuICBfbm90aWZ5TGlzdGVuZXJzKGUsIHR5cGUpIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSBlLmN1cnJlbnRUYXJnZXQuX2V2ZW50c1t0eXBlXTtcbiAgICBpZiAoIWxpc3RlbmVycylcbiAgICAgIHJldHVybjtcbiAgICBpZiAoXCJmblwiIGluIGxpc3RlbmVycykge1xuICAgICAgaWYgKGxpc3RlbmVycy5vbmNlKVxuICAgICAgICBlLmN1cnJlbnRUYXJnZXQucmVtb3ZlTGlzdGVuZXIodHlwZSwgbGlzdGVuZXJzLmZuLCB2b2lkIDAsIHRydWUpO1xuICAgICAgbGlzdGVuZXJzLmZuLmNhbGwobGlzdGVuZXJzLmNvbnRleHQsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgaiA9IGxpc3RlbmVycy5sZW5ndGg7IGkgPCBqICYmICFlLnByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkOyBpKyspIHtcbiAgICAgICAgaWYgKGxpc3RlbmVyc1tpXS5vbmNlKVxuICAgICAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0uZm4sIHZvaWQgMCwgdHJ1ZSk7XG4gICAgICAgIGxpc3RlbmVyc1tpXS5mbi5jYWxsKGxpc3RlbmVyc1tpXS5jb250ZXh0LCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgRXZlbnRCb3VuZGFyeSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRCb3VuZGFyeS5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBFdmVudEJvdW5kYXJ5IH0gZnJvbSAnLi9FdmVudEJvdW5kYXJ5Lm1qcyc7XG5pbXBvcnQgeyBFdmVudHNUaWNrZXIgfSBmcm9tICcuL0V2ZW50VGlja2VyLm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRQb2ludGVyRXZlbnQgfSBmcm9tICcuL0ZlZGVyYXRlZFBvaW50ZXJFdmVudC5tanMnO1xuaW1wb3J0IHsgRmVkZXJhdGVkV2hlZWxFdmVudCB9IGZyb20gJy4vRmVkZXJhdGVkV2hlZWxFdmVudC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IE1PVVNFX1BPSU5URVJfSUQgPSAxO1xuY29uc3QgVE9VQ0hfVE9fUE9JTlRFUiA9IHtcbiAgdG91Y2hzdGFydDogXCJwb2ludGVyZG93blwiLFxuICB0b3VjaGVuZDogXCJwb2ludGVydXBcIixcbiAgdG91Y2hlbmRvdXRzaWRlOiBcInBvaW50ZXJ1cG91dHNpZGVcIixcbiAgdG91Y2htb3ZlOiBcInBvaW50ZXJtb3ZlXCIsXG4gIHRvdWNoY2FuY2VsOiBcInBvaW50ZXJjYW5jZWxcIlxufTtcbmNvbnN0IF9FdmVudFN5c3RlbSA9IGNsYXNzIF9FdmVudFN5c3RlbSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge1JlbmRlcmVyfSByZW5kZXJlclxuICAgKi9cbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgY3VycmVudCBkZXZpY2Ugc3VwcG9ydHMgdG91Y2ggZXZlbnRzIGFjY29yZGluZyB0byB0aGUgVzNDIFRvdWNoIEV2ZW50cyBzcGVjLlxuICAgICAqIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgdGhlIGFwcHJvcHJpYXRlIGV2ZW50IGhhbmRsaW5nIHN0cmF0ZWd5LlxuICAgICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi90b3VjaC1ldmVudHMvfSBXM0MgVG91Y2ggRXZlbnRzIFNwZWNpZmljYXRpb25cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAZGVmYXVsdCAnb250b3VjaHN0YXJ0JyBpbiBnbG9iYWxUaGlzXG4gICAgICovXG4gICAgdGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzID0gXCJvbnRvdWNoc3RhcnRcIiBpbiBnbG9iYWxUaGlzO1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBjdXJyZW50IGRldmljZSBzdXBwb3J0cyBwb2ludGVyIGV2ZW50cyBhY2NvcmRpbmcgdG8gdGhlIFczQyBQb2ludGVyIEV2ZW50cyBzcGVjLlxuICAgICAqIFVzZWQgdG8gb3B0aW1pemUgZXZlbnQgaGFuZGxpbmcgYW5kIHByb3ZpZGUgbW9yZSBjb25zaXN0ZW50IGNyb3NzLWRldmljZSBpbnRlcmFjdGlvbi5cbiAgICAgKiBAc2VlIHtAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvcG9pbnRlcmV2ZW50cy99IFczQyBQb2ludGVyIEV2ZW50cyBTcGVjaWZpY2F0aW9uXG4gICAgICogQHJlYWRvbmx5XG4gICAgICogQGRlZmF1bHQgISFnbG9iYWxUaGlzLlBvaW50ZXJFdmVudFxuICAgICAqL1xuICAgIHRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzID0gISFnbG9iYWxUaGlzLlBvaW50ZXJFdmVudDtcbiAgICAvKipcbiAgICAgKiBUaGUgRE9NIGVsZW1lbnQgdG8gd2hpY2ggdGhlIHJvb3QgZXZlbnQgbGlzdGVuZXJzIGFyZSBib3VuZC4gVGhpcyBpcyBhdXRvbWF0aWNhbGx5IHNldCB0b1xuICAgICAqIHRoZSByZW5kZXJlcidzIHtAbGluayBSZW5kZXJlciN2aWV3IHZpZXd9LlxuICAgICAqL1xuICAgIHRoaXMuZG9tRWxlbWVudCA9IG51bGw7XG4gICAgLyoqIFRoZSByZXNvbHV0aW9uIHVzZWQgdG8gY29udmVydCBiZXR3ZWVuIHRoZSBET00gY2xpZW50IHNwYWNlIGludG8gd29ybGQgc3BhY2UuICovXG4gICAgdGhpcy5yZXNvbHV0aW9uID0gMTtcbiAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5yb290Qm91bmRhcnkgPSBuZXcgRXZlbnRCb3VuZGFyeShudWxsKTtcbiAgICBFdmVudHNUaWNrZXIuaW5pdCh0aGlzKTtcbiAgICB0aGlzLmF1dG9QcmV2ZW50RGVmYXVsdCA9IHRydWU7XG4gICAgdGhpcy5fZXZlbnRzQWRkZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9yb290UG9pbnRlckV2ZW50ID0gbmV3IEZlZGVyYXRlZFBvaW50ZXJFdmVudChudWxsKTtcbiAgICB0aGlzLl9yb290V2hlZWxFdmVudCA9IG5ldyBGZWRlcmF0ZWRXaGVlbEV2ZW50KG51bGwpO1xuICAgIHRoaXMuY3Vyc29yU3R5bGVzID0ge1xuICAgICAgZGVmYXVsdDogXCJpbmhlcml0XCIsXG4gICAgICBwb2ludGVyOiBcInBvaW50ZXJcIlxuICAgIH07XG4gICAgdGhpcy5mZWF0dXJlcyA9IG5ldyBQcm94eSh7IC4uLl9FdmVudFN5c3RlbS5kZWZhdWx0RXZlbnRGZWF0dXJlcyB9LCB7XG4gICAgICBzZXQ6ICh0YXJnZXQsIGtleSwgdmFsdWUpID0+IHtcbiAgICAgICAgaWYgKGtleSA9PT0gXCJnbG9iYWxNb3ZlXCIpIHtcbiAgICAgICAgICB0aGlzLnJvb3RCb3VuZGFyeS5lbmFibGVHbG9iYWxNb3ZlRXZlbnRzID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG4gICAgdGhpcy5fb25Qb2ludGVyRG93biA9IHRoaXMuX29uUG9pbnRlckRvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblBvaW50ZXJNb3ZlID0gdGhpcy5fb25Qb2ludGVyTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uUG9pbnRlclVwID0gdGhpcy5fb25Qb2ludGVyVXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9vblBvaW50ZXJPdmVyT3V0ID0gdGhpcy5fb25Qb2ludGVyT3Zlck91dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMub25XaGVlbCA9IHRoaXMub25XaGVlbC5iaW5kKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgZGVmYXVsdCBpbnRlcmFjdGlvbiBtb2RlIGZvciBhbGwgZGlzcGxheSBvYmplY3RzLlxuICAgKiBAc2VlIENvbnRhaW5lci5ldmVudE1vZGVcbiAgICogQHR5cGUge0V2ZW50TW9kZX1cbiAgICogQHJlYWRvbmx5XG4gICAqIEBzaW5jZSA3LjIuMFxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0RXZlbnRNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9kZWZhdWx0RXZlbnRNb2RlO1xuICB9XG4gIC8qKlxuICAgKiBSdW5uZXIgaW5pdCBjYWxsZWQsIHZpZXcgaXMgYXZhaWxhYmxlIGF0IHRoaXMgcG9pbnQuXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGluaXQob3B0aW9ucykge1xuICAgIGNvbnN0IHsgY2FudmFzLCByZXNvbHV0aW9uIH0gPSB0aGlzLnJlbmRlcmVyO1xuICAgIHRoaXMuc2V0VGFyZ2V0RWxlbWVudChjYW52YXMpO1xuICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gICAgX0V2ZW50U3lzdGVtLl9kZWZhdWx0RXZlbnRNb2RlID0gb3B0aW9ucy5ldmVudE1vZGUgPz8gXCJwYXNzaXZlXCI7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLmZlYXR1cmVzLCBvcHRpb25zLmV2ZW50RmVhdHVyZXMgPz8ge30pO1xuICAgIHRoaXMucm9vdEJvdW5kYXJ5LmVuYWJsZUdsb2JhbE1vdmVFdmVudHMgPSB0aGlzLmZlYXR1cmVzLmdsb2JhbE1vdmU7XG4gIH1cbiAgLyoqXG4gICAqIEhhbmRsZSBjaGFuZ2luZyByZXNvbHV0aW9uLlxuICAgKiBAaWdub3JlXG4gICAqL1xuICByZXNvbHV0aW9uQ2hhbmdlKHJlc29sdXRpb24pIHtcbiAgICB0aGlzLnJlc29sdXRpb24gPSByZXNvbHV0aW9uO1xuICB9XG4gIC8qKiBEZXN0cm95cyBhbGwgZXZlbnQgbGlzdGVuZXJzIGFuZCBkZXRhY2hlcyB0aGUgcmVuZGVyZXIuICovXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zZXRUYXJnZXRFbGVtZW50KG51bGwpO1xuICAgIHRoaXMucmVuZGVyZXIgPSBudWxsO1xuICAgIHRoaXMuX2N1cnJlbnRDdXJzb3IgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjdXJyZW50IGN1cnNvciBtb2RlLCBoYW5kbGluZyBhbnkgY2FsbGJhY2tzIG9yIENTUyBzdHlsZSBjaGFuZ2VzLlxuICAgKiBUaGUgY3Vyc29yIGNhbiBiZSBhIENTUyBjdXJzb3Igc3RyaW5nLCBhIGN1c3RvbSBjYWxsYmFjayBmdW5jdGlvbiwgb3IgYSBrZXkgZnJvbSB0aGUgY3Vyc29yU3R5bGVzIGRpY3Rpb25hcnkuXG4gICAqIEBwYXJhbSBtb2RlIC0gQ3Vyc29yIG1vZGUgdG8gc2V0LiBDYW4gYmU6XG4gICAqIC0gQSBDU1MgY3Vyc29yIHN0cmluZyAoZS5nLiwgJ3BvaW50ZXInLCAnZ3JhYicpXG4gICAqIC0gQSBrZXkgZnJvbSB0aGUgY3Vyc29yU3R5bGVzIGRpY3Rpb25hcnlcbiAgICogLSBudWxsL3VuZGVmaW5lZCB0byByZXNldCB0byBkZWZhdWx0XG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIFVzaW5nIHByZWRlZmluZWQgY3Vyc29yIHN0eWxlc1xuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLnNldEN1cnNvcigncG9pbnRlcicpOyAgICAvLyBTZXQgc3RhbmRhcmQgcG9pbnRlciBjdXJzb3JcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5zZXRDdXJzb3IoJ2dyYWInKTsgICAgICAgLy8gU2V0IGdyYWIgY3Vyc29yXG4gICAqIGFwcC5yZW5kZXJlci5ldmVudHMuc2V0Q3Vyc29yKG51bGwpOyAgICAgICAgIC8vIFJlc2V0IHRvIGRlZmF1bHRcbiAgICpcbiAgICogLy8gVXNpbmcgY3VzdG9tIGN1cnNvciBzdHlsZXNcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5jdXJzb3JTdHlsZXMuY3VzdG9tID0gJ3VybChcImN1cnNvci5wbmdcIiksIGF1dG8nO1xuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLnNldEN1cnNvcignY3VzdG9tJyk7ICAgICAvLyBBcHBseSBjdXN0b20gY3Vyc29yXG4gICAqXG4gICAqIC8vIFVzaW5nIGNhbGxiYWNrLWJhc2VkIGN1cnNvclxuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLmN1cnNvclN0eWxlcy5keW5hbWljID0gKG1vZGUpID0+IHtcbiAgICogICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gbW9kZSA9PT0gJ2hvdmVyJyA/ICdwb2ludGVyJyA6ICdkZWZhdWx0JztcbiAgICogfTtcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5zZXRDdXJzb3IoJ2R5bmFtaWMnKTsgICAgLy8gVHJpZ2dlciBjdXJzb3IgY2FsbGJhY2tcbiAgICogYGBgXG4gICAqIEByZW1hcmtzXG4gICAqIC0gSGFzIG5vIGVmZmVjdCBvbiBPZmZzY3JlZW5DYW52YXMgZXhjZXB0IGZvciBjYWxsYmFjay1iYXNlZCBjdXJzb3JzXG4gICAqIC0gQ2FjaGVzIGN1cnJlbnQgY3Vyc29yIHRvIGF2b2lkIHVubmVjZXNzYXJ5IERPTSB1cGRhdGVzXG4gICAqIC0gU3VwcG9ydHMgQ1NTIGN1cnNvciB2YWx1ZXMsIHN0eWxlIG9iamVjdHMsIGFuZCBjYWxsYmFjayBmdW5jdGlvbnNcbiAgICogQHNlZSB7QGxpbmsgRXZlbnRTeXN0ZW0uY3Vyc29yU3R5bGVzfSBGb3IgZGVmaW5pbmcgY3VzdG9tIGN1cnNvciBzdHlsZXNcbiAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL2N1cnNvcn0gTUROIEN1cnNvciBSZWZlcmVuY2VcbiAgICovXG4gIHNldEN1cnNvcihtb2RlKSB7XG4gICAgbW9kZSB8fCAobW9kZSA9IFwiZGVmYXVsdFwiKTtcbiAgICBsZXQgYXBwbHlTdHlsZXMgPSB0cnVlO1xuICAgIGlmIChnbG9iYWxUaGlzLk9mZnNjcmVlbkNhbnZhcyAmJiB0aGlzLmRvbUVsZW1lbnQgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpIHtcbiAgICAgIGFwcGx5U3R5bGVzID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLl9jdXJyZW50Q3Vyc29yID09PSBtb2RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2N1cnJlbnRDdXJzb3IgPSBtb2RlO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5jdXJzb3JTdHlsZXNbbW9kZV07XG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICBzd2l0Y2ggKHR5cGVvZiBzdHlsZSkge1xuICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgaWYgKGFwcGx5U3R5bGVzKSB7XG4gICAgICAgICAgICB0aGlzLmRvbUVsZW1lbnQuc3R5bGUuY3Vyc29yID0gc3R5bGU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICBzdHlsZShtb2RlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgIGlmIChhcHBseVN0eWxlcykge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLmRvbUVsZW1lbnQuc3R5bGUsIHN0eWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChhcHBseVN0eWxlcyAmJiB0eXBlb2YgbW9kZSA9PT0gXCJzdHJpbmdcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY3Vyc29yU3R5bGVzLCBtb2RlKSkge1xuICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLmN1cnNvciA9IG1vZGU7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBUaGUgZ2xvYmFsIHBvaW50ZXIgZXZlbnQgaW5zdGFuY2UgY29udGFpbmluZyB0aGUgbW9zdCByZWNlbnQgcG9pbnRlciBzdGF0ZS5cbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGFjY2Vzc2luZyBwb2ludGVyIGluZm9ybWF0aW9uIHdpdGhvdXQgbGlzdGVuaW5nIHRvIGV2ZW50cy5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogLy8gQWNjZXNzIGN1cnJlbnQgcG9pbnRlciBwb3NpdGlvbiBhdCBhbnkgdGltZVxuICAgKiBjb25zdCBldmVudFN5c3RlbSA9IGFwcC5yZW5kZXJlci5ldmVudHM7XG4gICAqIGNvbnN0IHBvaW50ZXIgPSBldmVudFN5c3RlbS5wb2ludGVyO1xuICAgKlxuICAgKiAvLyBHZXQgZ2xvYmFsIGNvb3JkaW5hdGVzXG4gICAqIGNvbnNvbGUubG9nKCdQb3NpdGlvbjonLCBwb2ludGVyLmdsb2JhbC54LCBwb2ludGVyLmdsb2JhbC55KTtcbiAgICpcbiAgICogLy8gQ2hlY2sgYnV0dG9uIHN0YXRlXG4gICAqIGNvbnNvbGUubG9nKCdCdXR0b25zIHByZXNzZWQ6JywgcG9pbnRlci5idXR0b25zKTtcbiAgICpcbiAgICogLy8gR2V0IHBvaW50ZXIgdHlwZSBhbmQgcHJlc3N1cmVcbiAgICogY29uc29sZS5sb2coJ1R5cGU6JywgcG9pbnRlci5wb2ludGVyVHlwZSk7XG4gICAqIGNvbnNvbGUubG9nKCdQcmVzc3VyZTonLCBwb2ludGVyLnByZXNzdXJlKTtcbiAgICogYGBgXG4gICAqIEByZWFkb25seVxuICAgKiBAc2luY2UgNy4yLjBcbiAgICogQHNlZSB7QGxpbmsgRmVkZXJhdGVkUG9pbnRlckV2ZW50fSBGb3IgYWxsIGF2YWlsYWJsZSBwb2ludGVyIHByb3BlcnRpZXNcbiAgICovXG4gIGdldCBwb2ludGVyKCkge1xuICAgIHJldHVybiB0aGlzLl9yb290UG9pbnRlckV2ZW50O1xuICB9XG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBwb2ludGVyIGRvd24gZXZlbnRzIG9uIHtAbGluayBFdmVudFN5c3RlbSNkb21FbGVtZW50IHRoaXMuZG9tRWxlbWVudH0uXG4gICAqIEBwYXJhbSBuYXRpdmVFdmVudCAtIFRoZSBuYXRpdmUgbW91c2UvcG9pbnRlci90b3VjaCBldmVudC5cbiAgICovXG4gIF9vblBvaW50ZXJEb3duKG5hdGl2ZUV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVzLmNsaWNrKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMucm9vdEJvdW5kYXJ5LnJvb3RUYXJnZXQgPSB0aGlzLnJlbmRlcmVyLmxhc3RPYmplY3RSZW5kZXJlZDtcbiAgICBjb25zdCBldmVudHMgPSB0aGlzLl9ub3JtYWxpemVUb1BvaW50ZXJEYXRhKG5hdGl2ZUV2ZW50KTtcbiAgICBpZiAodGhpcy5hdXRvUHJldmVudERlZmF1bHQgJiYgZXZlbnRzWzBdLmlzTm9ybWFsaXplZCkge1xuICAgICAgY29uc3QgY2FuY2VsYWJsZSA9IG5hdGl2ZUV2ZW50LmNhbmNlbGFibGUgfHwgIShcImNhbmNlbGFibGVcIiBpbiBuYXRpdmVFdmVudCk7XG4gICAgICBpZiAoY2FuY2VsYWJsZSkge1xuICAgICAgICBuYXRpdmVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IGV2ZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGNvbnN0IG5hdGl2ZUV2ZW50MiA9IGV2ZW50c1tpXTtcbiAgICAgIGNvbnN0IGZlZGVyYXRlZEV2ZW50ID0gdGhpcy5fYm9vdHN0cmFwRXZlbnQodGhpcy5fcm9vdFBvaW50ZXJFdmVudCwgbmF0aXZlRXZlbnQyKTtcbiAgICAgIHRoaXMucm9vdEJvdW5kYXJ5Lm1hcEV2ZW50KGZlZGVyYXRlZEV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5zZXRDdXJzb3IodGhpcy5yb290Qm91bmRhcnkuY3Vyc29yKTtcbiAgfVxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgcG9pbnRlciBtb3ZlIGV2ZW50cyBvbiBvbiB7QGxpbmsgRXZlbnRTeXN0ZW0jZG9tRWxlbWVudCB0aGlzLmRvbUVsZW1lbnR9LlxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnQgLSBUaGUgbmF0aXZlIG1vdXNlL3BvaW50ZXIvdG91Y2ggZXZlbnRzLlxuICAgKi9cbiAgX29uUG9pbnRlck1vdmUobmF0aXZlRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZmVhdHVyZXMubW92ZSlcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLnJvb3RCb3VuZGFyeS5yb290VGFyZ2V0ID0gdGhpcy5yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQ7XG4gICAgRXZlbnRzVGlja2VyLnBvaW50ZXJNb3ZlZCgpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudHMgPSB0aGlzLl9ub3JtYWxpemVUb1BvaW50ZXJEYXRhKG5hdGl2ZUV2ZW50KTtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IG5vcm1hbGl6ZWRFdmVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBjb25zdCBldmVudCA9IHRoaXMuX2Jvb3RzdHJhcEV2ZW50KHRoaXMuX3Jvb3RQb2ludGVyRXZlbnQsIG5vcm1hbGl6ZWRFdmVudHNbaV0pO1xuICAgICAgdGhpcy5yb290Qm91bmRhcnkubWFwRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICB0aGlzLnNldEN1cnNvcih0aGlzLnJvb3RCb3VuZGFyeS5jdXJzb3IpO1xuICB9XG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBwb2ludGVyIHVwIGV2ZW50cyBvbiB7QGxpbmsgRXZlbnRTeXN0ZW0jZG9tRWxlbWVudCB0aGlzLmRvbUVsZW1lbnR9LlxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnQgLSBUaGUgbmF0aXZlIG1vdXNlL3BvaW50ZXIvdG91Y2ggZXZlbnQuXG4gICAqL1xuICBfb25Qb2ludGVyVXAobmF0aXZlRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZmVhdHVyZXMuY2xpY2spXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5yb290Qm91bmRhcnkucm9vdFRhcmdldCA9IHRoaXMucmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkO1xuICAgIGxldCB0YXJnZXQgPSBuYXRpdmVFdmVudC50YXJnZXQ7XG4gICAgaWYgKG5hdGl2ZUV2ZW50LmNvbXBvc2VkUGF0aCAmJiBuYXRpdmVFdmVudC5jb21wb3NlZFBhdGgoKS5sZW5ndGggPiAwKSB7XG4gICAgICB0YXJnZXQgPSBuYXRpdmVFdmVudC5jb21wb3NlZFBhdGgoKVswXTtcbiAgICB9XG4gICAgY29uc3Qgb3V0c2lkZSA9IHRhcmdldCAhPT0gdGhpcy5kb21FbGVtZW50ID8gXCJvdXRzaWRlXCIgOiBcIlwiO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudHMgPSB0aGlzLl9ub3JtYWxpemVUb1BvaW50ZXJEYXRhKG5hdGl2ZUV2ZW50KTtcbiAgICBmb3IgKGxldCBpID0gMCwgaiA9IG5vcm1hbGl6ZWRFdmVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBjb25zdCBldmVudCA9IHRoaXMuX2Jvb3RzdHJhcEV2ZW50KHRoaXMuX3Jvb3RQb2ludGVyRXZlbnQsIG5vcm1hbGl6ZWRFdmVudHNbaV0pO1xuICAgICAgZXZlbnQudHlwZSArPSBvdXRzaWRlO1xuICAgICAgdGhpcy5yb290Qm91bmRhcnkubWFwRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICB0aGlzLnNldEN1cnNvcih0aGlzLnJvb3RCb3VuZGFyeS5jdXJzb3IpO1xuICB9XG4gIC8qKlxuICAgKiBFdmVudCBoYW5kbGVyIGZvciBwb2ludGVyIG92ZXIgJiBvdXQgZXZlbnRzIG9uIHtAbGluayBFdmVudFN5c3RlbSNkb21FbGVtZW50IHRoaXMuZG9tRWxlbWVudH0uXG4gICAqIEBwYXJhbSBuYXRpdmVFdmVudCAtIFRoZSBuYXRpdmUgbW91c2UvcG9pbnRlci90b3VjaCBldmVudC5cbiAgICovXG4gIF9vblBvaW50ZXJPdmVyT3V0KG5hdGl2ZUV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVzLmNsaWNrKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMucm9vdEJvdW5kYXJ5LnJvb3RUYXJnZXQgPSB0aGlzLnJlbmRlcmVyLmxhc3RPYmplY3RSZW5kZXJlZDtcbiAgICBjb25zdCBub3JtYWxpemVkRXZlbnRzID0gdGhpcy5fbm9ybWFsaXplVG9Qb2ludGVyRGF0YShuYXRpdmVFdmVudCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBub3JtYWxpemVkRXZlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLl9ib290c3RyYXBFdmVudCh0aGlzLl9yb290UG9pbnRlckV2ZW50LCBub3JtYWxpemVkRXZlbnRzW2ldKTtcbiAgICAgIHRoaXMucm9vdEJvdW5kYXJ5Lm1hcEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5zZXRDdXJzb3IodGhpcy5yb290Qm91bmRhcnkuY3Vyc29yKTtcbiAgfVxuICAvKipcbiAgICogUGFzc2l2ZSBoYW5kbGVyIGZvciBgd2hlZWxgIGV2ZW50cyBvbiB7QGxpbmsgRXZlbnRTeXN0ZW0uZG9tRWxlbWVudCB0aGlzLmRvbUVsZW1lbnR9LlxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnQgLSBUaGUgbmF0aXZlIHdoZWVsIGV2ZW50LlxuICAgKi9cbiAgb25XaGVlbChuYXRpdmVFdmVudCkge1xuICAgIGlmICghdGhpcy5mZWF0dXJlcy53aGVlbClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCB3aGVlbEV2ZW50ID0gdGhpcy5ub3JtYWxpemVXaGVlbEV2ZW50KG5hdGl2ZUV2ZW50KTtcbiAgICB0aGlzLnJvb3RCb3VuZGFyeS5yb290VGFyZ2V0ID0gdGhpcy5yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQ7XG4gICAgdGhpcy5yb290Qm91bmRhcnkubWFwRXZlbnQod2hlZWxFdmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIHtAbGluayBFdmVudFN5c3RlbSNkb21FbGVtZW50IGRvbUVsZW1lbnR9IGFuZCBiaW5kcyBldmVudCBsaXN0ZW5lcnMuXG4gICAqIFRoaXMgbWV0aG9kIG1hbmFnZXMgdGhlIERPTSBldmVudCBiaW5kaW5ncyBmb3IgdGhlIGV2ZW50IHN5c3RlbSwgYWxsb3dpbmcgeW91IHRvXG4gICAqIGNoYW5nZSBvciByZW1vdmUgdGhlIHRhcmdldCBlbGVtZW50IHRoYXQgcmVjZWl2ZXMgaW5wdXQgZXZlbnRzLlxuICAgKiA+IFshSU1QT1JUQU5UXSBUaGlzIHdpbGwgZGVmYXVsdCB0byB0aGUgY2FudmFzIGVsZW1lbnQgb2YgdGhlIHJlbmRlcmVyLCBzbyB5b3VcbiAgICogPiBzaG91bGQgbm90IG5lZWQgdG8gY2FsbCB0aGlzIHVubGVzcyB5b3UgYXJlIHVzaW5nIGEgY3VzdG9tIGVsZW1lbnQuXG4gICAqIEBwYXJhbSBlbGVtZW50IC0gVGhlIG5ldyBET00gZWxlbWVudCB0byBiaW5kIGV2ZW50cyB0bywgb3IgbnVsbCB0byByZW1vdmUgYWxsIGV2ZW50IGJpbmRpbmdzXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIFNldCBhIG5ldyBjYW52YXMgZWxlbWVudCBhcyB0aGUgdGFyZ2V0XG4gICAqIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLnNldFRhcmdldEVsZW1lbnQoY2FudmFzKTtcbiAgICpcbiAgICogLy8gUmVtb3ZlIGFsbCBldmVudCBiaW5kaW5nc1xuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLnNldFRhcmdldEVsZW1lbnQobnVsbCk7XG4gICAqXG4gICAqIC8vIFN3aXRjaCB0byBhIGRpZmZlcmVudCBjYW52YXNcbiAgICogY29uc3QgbmV3Q2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dhbWUtY2FudmFzJyk7XG4gICAqIGFwcC5yZW5kZXJlci5ldmVudHMuc2V0VGFyZ2V0RWxlbWVudChuZXdDYW52YXMpO1xuICAgKiBgYGBcbiAgICogQHJlbWFya3NcbiAgICogLSBBdXRvbWF0aWNhbGx5IHJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIGZyb20gcHJldmlvdXMgZWxlbWVudFxuICAgKiAtIFJlcXVpcmVkIGZvciB0aGUgZXZlbnQgc3lzdGVtIHRvIGZ1bmN0aW9uXG4gICAqIC0gU2FmZSB0byBjYWxsIG11bHRpcGxlIHRpbWVzXG4gICAqIEBzZWUge0BsaW5rIEV2ZW50U3lzdGVtI2RvbUVsZW1lbnR9IFRoZSBjdXJyZW50IERPTSBlbGVtZW50XG4gICAqIEBzZWUge0BsaW5rIEV2ZW50c1RpY2tlcn0gRm9yIHRoZSB0aWNrZXIgc3lzdGVtIHRoYXQgdHJhY2tzIHBvaW50ZXIgbW92ZW1lbnRcbiAgICovXG4gIHNldFRhcmdldEVsZW1lbnQoZWxlbWVudCkge1xuICAgIHRoaXMuX3JlbW92ZUV2ZW50cygpO1xuICAgIHRoaXMuZG9tRWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgRXZlbnRzVGlja2VyLmRvbUVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMuX2FkZEV2ZW50cygpO1xuICB9XG4gIC8qKiBSZWdpc3RlciBldmVudCBsaXN0ZW5lcnMgb24ge0BsaW5rIFJlbmRlcmVyI2RvbUVsZW1lbnQgdGhpcy5kb21FbGVtZW50fS4gKi9cbiAgX2FkZEV2ZW50cygpIHtcbiAgICBpZiAodGhpcy5fZXZlbnRzQWRkZWQgfHwgIXRoaXMuZG9tRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBFdmVudHNUaWNrZXIuYWRkVGlja2VyTGlzdGVuZXIoKTtcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuZG9tRWxlbWVudC5zdHlsZTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgIGlmIChnbG9iYWxUaGlzLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgICAgIHN0eWxlLm1zQ29udGVudFpvb21pbmcgPSBcIm5vbmVcIjtcbiAgICAgICAgc3R5bGUubXNUb3VjaEFjdGlvbiA9IFwibm9uZVwiO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cykge1xuICAgICAgICBzdHlsZS50b3VjaEFjdGlvbiA9IFwibm9uZVwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMpIHtcbiAgICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuX29uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLl9vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmxlYXZlXCIsIHRoaXMuX29uUG9pbnRlck92ZXJPdXQsIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3ZlclwiLCB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LCB0cnVlKTtcbiAgICAgIGdsb2JhbFRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLl9vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vblBvaW50ZXJNb3ZlLCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX29uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIHRoaXMuX29uUG9pbnRlck92ZXJPdXQsIHRydWUpO1xuICAgICAgZ2xvYmFsVGhpcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzKSB7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLl9vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRoaXMub25XaGVlbCwge1xuICAgICAgcGFzc2l2ZTogdHJ1ZSxcbiAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLl9ldmVudHNBZGRlZCA9IHRydWU7XG4gIH1cbiAgLyoqIFVucmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIG9uIHtAbGluayBFdmVudFN5c3RlbSNkb21FbGVtZW50IHRoaXMuZG9tRWxlbWVudH0uICovXG4gIF9yZW1vdmVFdmVudHMoKSB7XG4gICAgaWYgKCF0aGlzLl9ldmVudHNBZGRlZCB8fCAhdGhpcy5kb21FbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIEV2ZW50c1RpY2tlci5yZW1vdmVUaWNrZXJMaXN0ZW5lcigpO1xuICAgIGNvbnN0IHN0eWxlID0gdGhpcy5kb21FbGVtZW50LnN0eWxlO1xuICAgIGlmIChzdHlsZSkge1xuICAgICAgaWYgKGdsb2JhbFRoaXMubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICAgICAgc3R5bGUubXNDb250ZW50Wm9vbWluZyA9IFwiXCI7XG4gICAgICAgIHN0eWxlLm1zVG91Y2hBY3Rpb24gPSBcIlwiO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cykge1xuICAgICAgICBzdHlsZS50b3VjaEFjdGlvbiA9IFwiXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cykge1xuICAgICAgZ2xvYmFsVGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcm1vdmVcIiwgdGhpcy5fb25Qb2ludGVyTW92ZSwgdHJ1ZSk7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsIHRoaXMuX29uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVybGVhdmVcIiwgdGhpcy5fb25Qb2ludGVyT3Zlck91dCwgdHJ1ZSk7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJvdmVyXCIsIHRoaXMuX29uUG9pbnRlck92ZXJPdXQsIHRydWUpO1xuICAgICAgZ2xvYmFsVGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsIHRoaXMuX29uUG9pbnRlclVwLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2xvYmFsVGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX29uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5fb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMuX29uUG9pbnRlck92ZXJPdXQsIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5fb25Qb2ludGVyT3Zlck91dCwgdHJ1ZSk7XG4gICAgICBnbG9iYWxUaGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX29uUG9pbnRlclVwLCB0cnVlKTtcbiAgICAgIGlmICh0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHMpIHtcbiAgICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuX29uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX29uUG9pbnRlclVwLCB0cnVlKTtcbiAgICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5fb25Qb2ludGVyTW92ZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgdGhpcy5vbldoZWVsLCB0cnVlKTtcbiAgICB0aGlzLmRvbUVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX2V2ZW50c0FkZGVkID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgY29vcmRpbmF0ZXMgZnJvbSBET00vc2NyZWVuIHNwYWNlIGludG8gUGl4aUpTIG5vcm1hbGl6ZWQgY29vcmRpbmF0ZXMuXG4gICAqIFRoaXMgdGFrZXMgaW50byBhY2NvdW50IHRoZSBjdXJyZW50IHNjYWxlLCBwb3NpdGlvbiwgYW5kIHJlc29sdXRpb24gb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKiBAcGFyYW0gcG9pbnQgLSBUaGUgcG9pbnQgdG8gc3RvcmUgdGhlIG1hcHBlZCBjb29yZGluYXRlcyBpblxuICAgKiBAcGFyYW0geCAtIFRoZSB4IGNvb3JkaW5hdGUgaW4gRE9NL2NsaWVudCBzcGFjZVxuICAgKiBAcGFyYW0geSAtIFRoZSB5IGNvb3JkaW5hdGUgaW4gRE9NL2NsaWVudCBzcGFjZVxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiAvLyBNYXAgbW91c2UgY29vcmRpbmF0ZXMgdG8gUGl4aUpTIHNwYWNlXG4gICAqIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KCk7XG4gICAqIGFwcC5yZW5kZXJlci5ldmVudHMubWFwUG9zaXRpb25Ub1BvaW50KFxuICAgKiAgICAgcG9pbnQsXG4gICAqICAgICBldmVudC5jbGllbnRYLFxuICAgKiAgICAgZXZlbnQuY2xpZW50WVxuICAgKiApO1xuICAgKiBjb25zb2xlLmxvZygnTWFwcGVkIHBvc2l0aW9uOicsIHBvaW50LngsIHBvaW50LnkpO1xuICAgKlxuICAgKiAvLyBVc2luZyB3aXRoIHBvaW50ZXIgZXZlbnRzXG4gICAqIHNwcml0ZS5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICogICAgIC8vIGV2ZW50Lmdsb2JhbCBhbHJlYWR5IGNvbnRhaW5zIG1hcHBlZCBjb29yZGluYXRlc1xuICAgKiAgICAgY29uc29sZS5sb2coJ0dsb2JhbDonLCBldmVudC5nbG9iYWwueCwgZXZlbnQuZ2xvYmFsLnkpO1xuICAgKlxuICAgKiAgICAgLy8gTWFwIHRvIGxvY2FsIGNvb3JkaW5hdGVzXG4gICAqICAgICBjb25zdCBsb2NhbCA9IGV2ZW50LmdldExvY2FsUG9zaXRpb24oc3ByaXRlKTtcbiAgICogICAgIGNvbnNvbGUubG9nKCdMb2NhbDonLCBsb2NhbC54LCBsb2NhbC55KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAcmVtYXJrc1xuICAgKiAtIEFjY291bnRzIGZvciBlbGVtZW50IHNjYWxpbmcgYW5kIHBvc2l0aW9uaW5nXG4gICAqIC0gQWRqdXN0cyBmb3IgZGV2aWNlIHBpeGVsIHJhdGlvL3Jlc29sdXRpb25cbiAgICovXG4gIG1hcFBvc2l0aW9uVG9Qb2ludChwb2ludCwgeCwgeSkge1xuICAgIGNvbnN0IHJlY3QgPSB0aGlzLmRvbUVsZW1lbnQuaXNDb25uZWN0ZWQgPyB0aGlzLmRvbUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkgOiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHdpZHRoOiB0aGlzLmRvbUVsZW1lbnQud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMuZG9tRWxlbWVudC5oZWlnaHQsXG4gICAgICBsZWZ0OiAwLFxuICAgICAgdG9wOiAwXG4gICAgfTtcbiAgICBjb25zdCByZXNvbHV0aW9uTXVsdGlwbGllciA9IDEgLyB0aGlzLnJlc29sdXRpb247XG4gICAgcG9pbnQueCA9ICh4IC0gcmVjdC5sZWZ0KSAqICh0aGlzLmRvbUVsZW1lbnQud2lkdGggLyByZWN0LndpZHRoKSAqIHJlc29sdXRpb25NdWx0aXBsaWVyO1xuICAgIHBvaW50LnkgPSAoeSAtIHJlY3QudG9wKSAqICh0aGlzLmRvbUVsZW1lbnQuaGVpZ2h0IC8gcmVjdC5oZWlnaHQpICogcmVzb2x1dGlvbk11bHRpcGxpZXI7XG4gIH1cbiAgLyoqXG4gICAqIEVuc3VyZXMgdGhhdCB0aGUgb3JpZ2luYWwgZXZlbnQgb2JqZWN0IGNvbnRhaW5zIGFsbCBkYXRhIHRoYXQgYSByZWd1bGFyIHBvaW50ZXIgZXZlbnQgd291bGQgaGF2ZVxuICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgb3JpZ2luYWwgZXZlbnQgZGF0YSBmcm9tIGEgdG91Y2ggb3IgbW91c2UgZXZlbnRcbiAgICogQHJldHVybnMgQW4gYXJyYXkgY29udGFpbmluZyBhIHNpbmdsZSBub3JtYWxpemVkIHBvaW50ZXIgZXZlbnQsIGluIHRoZSBjYXNlIG9mIGEgcG9pbnRlclxuICAgKiAgb3IgbW91c2UgZXZlbnQsIG9yIGEgbXVsdGlwbGUgbm9ybWFsaXplZCBwb2ludGVyIGV2ZW50cyBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgY2hhbmdlZCB0b3VjaGVzXG4gICAqL1xuICBfbm9ybWFsaXplVG9Qb2ludGVyRGF0YShldmVudCkge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudHMgPSBbXTtcbiAgICBpZiAodGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzICYmIGV2ZW50IGluc3RhbmNlb2YgVG91Y2hFdmVudCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGxpID0gZXZlbnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoOyBpIDwgbGk7IGkrKykge1xuICAgICAgICBjb25zdCB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzW2ldO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmJ1dHRvbiA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC5idXR0b24gPSAwO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmJ1dHRvbnMgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2guYnV0dG9ucyA9IDE7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2guaXNQcmltYXJ5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgdG91Y2guaXNQcmltYXJ5ID0gZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEgJiYgZXZlbnQudHlwZSA9PT0gXCJ0b3VjaHN0YXJ0XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC53aWR0aCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC53aWR0aCA9IHRvdWNoLnJhZGl1c1ggfHwgMTtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC5oZWlnaHQgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2guaGVpZ2h0ID0gdG91Y2gucmFkaXVzWSB8fCAxO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnRpbHRYID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLnRpbHRYID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC50aWx0WSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC50aWx0WSA9IDA7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gucG9pbnRlclR5cGUgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2gucG9pbnRlclR5cGUgPSBcInRvdWNoXCI7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gucG9pbnRlcklkID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLnBvaW50ZXJJZCA9IHRvdWNoLmlkZW50aWZpZXIgfHwgMDtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC5wcmVzc3VyZSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC5wcmVzc3VyZSA9IHRvdWNoLmZvcmNlIHx8IDAuNTtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC50d2lzdCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC50d2lzdCA9IDA7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gudGFuZ2VudGlhbFByZXNzdXJlID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLnRhbmdlbnRpYWxQcmVzc3VyZSA9IDA7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gubGF5ZXJYID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLmxheWVyWCA9IHRvdWNoLm9mZnNldFggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmxheWVyWSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC5sYXllclkgPSB0b3VjaC5vZmZzZXRZID0gdG91Y2guY2xpZW50WTtcbiAgICAgICAgdG91Y2guaXNOb3JtYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgdG91Y2gudHlwZSA9IGV2ZW50LnR5cGU7XG4gICAgICAgIG5vcm1hbGl6ZWRFdmVudHMucHVzaCh0b3VjaCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghZ2xvYmFsVGhpcy5Nb3VzZUV2ZW50IHx8IGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCAmJiAoIXRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzIHx8ICEoZXZlbnQgaW5zdGFuY2VvZiBnbG9iYWxUaGlzLlBvaW50ZXJFdmVudCkpKSB7XG4gICAgICBjb25zdCB0ZW1wRXZlbnQgPSBldmVudDtcbiAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LmlzUHJpbWFyeSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LmlzUHJpbWFyeSA9IHRydWU7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC53aWR0aCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LndpZHRoID0gMTtcbiAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LmhlaWdodCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LmhlaWdodCA9IDE7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC50aWx0WCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LnRpbHRYID0gMDtcbiAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LnRpbHRZID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICB0ZW1wRXZlbnQudGlsdFkgPSAwO1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQucG9pbnRlclR5cGUgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC5wb2ludGVyVHlwZSA9IFwibW91c2VcIjtcbiAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LnBvaW50ZXJJZCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LnBvaW50ZXJJZCA9IE1PVVNFX1BPSU5URVJfSUQ7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC5wcmVzc3VyZSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LnByZXNzdXJlID0gMC41O1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQudHdpc3QgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC50d2lzdCA9IDA7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC50YW5nZW50aWFsUHJlc3N1cmUgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC50YW5nZW50aWFsUHJlc3N1cmUgPSAwO1xuICAgICAgdGVtcEV2ZW50LmlzTm9ybWFsaXplZCA9IHRydWU7XG4gICAgICBub3JtYWxpemVkRXZlbnRzLnB1c2godGVtcEV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9ybWFsaXplZEV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIG5vcm1hbGl6ZWRFdmVudHM7XG4gIH1cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgdGhlIG5hdGl2ZSB7QGxpbmsgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3VpZXZlbnRzLyNpbnRlcmZhY2Utd2hlZWxldmVudCBXaGVlbEV2ZW50fS5cbiAgICpcbiAgICogVGhlIHJldHVybmVkIHtAbGluayBGZWRlcmF0ZWRXaGVlbEV2ZW50fSBpcyBhIHNoYXJlZCBpbnN0YW5jZS4gSXQgd2lsbCBub3QgcGVyc2lzdCBhY3Jvc3NcbiAgICogbXVsdGlwbGUgbmF0aXZlIHdoZWVsIGV2ZW50cy5cbiAgICogQHBhcmFtIG5hdGl2ZUV2ZW50IC0gVGhlIG5hdGl2ZSB3aGVlbCBldmVudCB0aGF0IG9jY3VycmVkIG9uIHRoZSBjYW52YXMuXG4gICAqIEByZXR1cm5zIEEgZmVkZXJhdGVkIHdoZWVsIGV2ZW50LlxuICAgKi9cbiAgbm9ybWFsaXplV2hlZWxFdmVudChuYXRpdmVFdmVudCkge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5fcm9vdFdoZWVsRXZlbnQ7XG4gICAgdGhpcy5fdHJhbnNmZXJNb3VzZURhdGEoZXZlbnQsIG5hdGl2ZUV2ZW50KTtcbiAgICBldmVudC5kZWx0YVggPSBuYXRpdmVFdmVudC5kZWx0YVg7XG4gICAgZXZlbnQuZGVsdGFZID0gbmF0aXZlRXZlbnQuZGVsdGFZO1xuICAgIGV2ZW50LmRlbHRhWiA9IG5hdGl2ZUV2ZW50LmRlbHRhWjtcbiAgICBldmVudC5kZWx0YU1vZGUgPSBuYXRpdmVFdmVudC5kZWx0YU1vZGU7XG4gICAgdGhpcy5tYXBQb3NpdGlvblRvUG9pbnQoZXZlbnQuc2NyZWVuLCBuYXRpdmVFdmVudC5jbGllbnRYLCBuYXRpdmVFdmVudC5jbGllbnRZKTtcbiAgICBldmVudC5nbG9iYWwuY29weUZyb20oZXZlbnQuc2NyZWVuKTtcbiAgICBldmVudC5vZmZzZXQuY29weUZyb20oZXZlbnQuc2NyZWVuKTtcbiAgICBldmVudC5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuICAgIGV2ZW50LnR5cGUgPSBuYXRpdmVFdmVudC50eXBlO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsaXplcyB0aGUgYG5hdGl2ZUV2ZW50YCBpbnRvIGEgZmVkZXJhdGVlZCB7QGxpbmsgRmVkZXJhdGVkUG9pbnRlckV2ZW50fS5cbiAgICogQHBhcmFtIGV2ZW50XG4gICAqIEBwYXJhbSBuYXRpdmVFdmVudFxuICAgKi9cbiAgX2Jvb3RzdHJhcEV2ZW50KGV2ZW50LCBuYXRpdmVFdmVudCkge1xuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQgPSBudWxsO1xuICAgIGV2ZW50Lm5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQ7XG4gICAgZXZlbnQucG9pbnRlcklkID0gbmF0aXZlRXZlbnQucG9pbnRlcklkO1xuICAgIGV2ZW50LndpZHRoID0gbmF0aXZlRXZlbnQud2lkdGg7XG4gICAgZXZlbnQuaGVpZ2h0ID0gbmF0aXZlRXZlbnQuaGVpZ2h0O1xuICAgIGV2ZW50LmlzUHJpbWFyeSA9IG5hdGl2ZUV2ZW50LmlzUHJpbWFyeTtcbiAgICBldmVudC5wb2ludGVyVHlwZSA9IG5hdGl2ZUV2ZW50LnBvaW50ZXJUeXBlO1xuICAgIGV2ZW50LnByZXNzdXJlID0gbmF0aXZlRXZlbnQucHJlc3N1cmU7XG4gICAgZXZlbnQudGFuZ2VudGlhbFByZXNzdXJlID0gbmF0aXZlRXZlbnQudGFuZ2VudGlhbFByZXNzdXJlO1xuICAgIGV2ZW50LnRpbHRYID0gbmF0aXZlRXZlbnQudGlsdFg7XG4gICAgZXZlbnQudGlsdFkgPSBuYXRpdmVFdmVudC50aWx0WTtcbiAgICBldmVudC50d2lzdCA9IG5hdGl2ZUV2ZW50LnR3aXN0O1xuICAgIHRoaXMuX3RyYW5zZmVyTW91c2VEYXRhKGV2ZW50LCBuYXRpdmVFdmVudCk7XG4gICAgdGhpcy5tYXBQb3NpdGlvblRvUG9pbnQoZXZlbnQuc2NyZWVuLCBuYXRpdmVFdmVudC5jbGllbnRYLCBuYXRpdmVFdmVudC5jbGllbnRZKTtcbiAgICBldmVudC5nbG9iYWwuY29weUZyb20oZXZlbnQuc2NyZWVuKTtcbiAgICBldmVudC5vZmZzZXQuY29weUZyb20oZXZlbnQuc2NyZWVuKTtcbiAgICBldmVudC5pc1RydXN0ZWQgPSBuYXRpdmVFdmVudC5pc1RydXN0ZWQ7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09IFwicG9pbnRlcmxlYXZlXCIpIHtcbiAgICAgIGV2ZW50LnR5cGUgPSBcInBvaW50ZXJvdXRcIjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUuc3RhcnRzV2l0aChcIm1vdXNlXCIpKSB7XG4gICAgICBldmVudC50eXBlID0gZXZlbnQudHlwZS5yZXBsYWNlKFwibW91c2VcIiwgXCJwb2ludGVyXCIpO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZS5zdGFydHNXaXRoKFwidG91Y2hcIikpIHtcbiAgICAgIGV2ZW50LnR5cGUgPSBUT1VDSF9UT19QT0lOVEVSW2V2ZW50LnR5cGVdIHx8IGV2ZW50LnR5cGU7XG4gICAgfVxuICAgIHJldHVybiBldmVudDtcbiAgfVxuICAvKipcbiAgICogVHJhbnNmZXJzIGJhc2UgJiBtb3VzZSBldmVudCBkYXRhIGZyb20gdGhlIGBuYXRpdmVFdmVudGAgdG8gdGhlIGZlZGVyYXRlZCBldmVudC5cbiAgICogQHBhcmFtIGV2ZW50XG4gICAqIEBwYXJhbSBuYXRpdmVFdmVudFxuICAgKi9cbiAgX3RyYW5zZmVyTW91c2VEYXRhKGV2ZW50LCBuYXRpdmVFdmVudCkge1xuICAgIGV2ZW50LmlzVHJ1c3RlZCA9IG5hdGl2ZUV2ZW50LmlzVHJ1c3RlZDtcbiAgICBldmVudC5zcmNFbGVtZW50ID0gbmF0aXZlRXZlbnQuc3JjRWxlbWVudDtcbiAgICBldmVudC50aW1lU3RhbXAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICBldmVudC50eXBlID0gbmF0aXZlRXZlbnQudHlwZTtcbiAgICBldmVudC5hbHRLZXkgPSBuYXRpdmVFdmVudC5hbHRLZXk7XG4gICAgZXZlbnQuYnV0dG9uID0gbmF0aXZlRXZlbnQuYnV0dG9uO1xuICAgIGV2ZW50LmJ1dHRvbnMgPSBuYXRpdmVFdmVudC5idXR0b25zO1xuICAgIGV2ZW50LmNsaWVudC54ID0gbmF0aXZlRXZlbnQuY2xpZW50WDtcbiAgICBldmVudC5jbGllbnQueSA9IG5hdGl2ZUV2ZW50LmNsaWVudFk7XG4gICAgZXZlbnQuY3RybEtleSA9IG5hdGl2ZUV2ZW50LmN0cmxLZXk7XG4gICAgZXZlbnQubWV0YUtleSA9IG5hdGl2ZUV2ZW50Lm1ldGFLZXk7XG4gICAgZXZlbnQubW92ZW1lbnQueCA9IG5hdGl2ZUV2ZW50Lm1vdmVtZW50WDtcbiAgICBldmVudC5tb3ZlbWVudC55ID0gbmF0aXZlRXZlbnQubW92ZW1lbnRZO1xuICAgIGV2ZW50LnBhZ2UueCA9IG5hdGl2ZUV2ZW50LnBhZ2VYO1xuICAgIGV2ZW50LnBhZ2UueSA9IG5hdGl2ZUV2ZW50LnBhZ2VZO1xuICAgIGV2ZW50LnJlbGF0ZWRUYXJnZXQgPSBudWxsO1xuICAgIGV2ZW50LnNoaWZ0S2V5ID0gbmF0aXZlRXZlbnQuc2hpZnRLZXk7XG4gIH1cbn07XG4vKiogQGlnbm9yZSAqL1xuX0V2ZW50U3lzdGVtLmV4dGVuc2lvbiA9IHtcbiAgbmFtZTogXCJldmVudHNcIixcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xTeXN0ZW0sXG4gICAgRXh0ZW5zaW9uVHlwZS5DYW52YXNTeXN0ZW0sXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHUFVTeXN0ZW1cbiAgXSxcbiAgcHJpb3JpdHk6IC0xXG59O1xuLyoqXG4gKiBUaGUgZXZlbnQgZmVhdHVyZXMgdGhhdCBhcmUgZW5hYmxlZCBieSB0aGUgRXZlbnRTeXN0ZW1cbiAqIEBzaW5jZSA3LjIuMFxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBFdmVudFN5c3RlbSwgRXZlbnRTeXN0ZW1GZWF0dXJlcyB9IGZyb20gJ3BpeGkuanMnO1xuICogLy8gQWNjZXNzIHRoZSBkZWZhdWx0IGV2ZW50IGZlYXR1cmVzXG4gKiBFdmVudFN5c3RlbS5kZWZhdWx0RXZlbnRGZWF0dXJlcyA9IHtcbiAqICAgICAvLyBFbmFibGUgcG9pbnRlciBtb3ZlbWVudCBldmVudHNcbiAqICAgICBtb3ZlOiB0cnVlLFxuICogICAgIC8vIEVuYWJsZSBnbG9iYWwgcG9pbnRlciBtb3ZlIGV2ZW50c1xuICogICAgIGdsb2JhbE1vdmU6IHRydWUsXG4gKiAgICAgLy8gRW5hYmxlIGNsaWNrIGV2ZW50c1xuICogICAgIGNsaWNrOiB0cnVlLFxuICogICAgIC8vIEVuYWJsZSB3aGVlbCBldmVudHNcbiAqICAgICB3aGVlbDogdHJ1ZSxcbiAqIH07XG4gKiBgYGBcbiAqL1xuX0V2ZW50U3lzdGVtLmRlZmF1bHRFdmVudEZlYXR1cmVzID0ge1xuICAvKiogRW5hYmxlcyBwb2ludGVyIGV2ZW50cyBhc3NvY2lhdGVkIHdpdGggcG9pbnRlciBtb3ZlbWVudC4gKi9cbiAgbW92ZTogdHJ1ZSxcbiAgLyoqIEVuYWJsZXMgZ2xvYmFsIHBvaW50ZXIgbW92ZSBldmVudHMuICovXG4gIGdsb2JhbE1vdmU6IHRydWUsXG4gIC8qKiBFbmFibGVzIHBvaW50ZXIgZXZlbnRzIGFzc29jaWF0ZWQgd2l0aCBjbGlja2luZy4gKi9cbiAgY2xpY2s6IHRydWUsXG4gIC8qKiBFbmFibGVzIHdoZWVsIGV2ZW50cy4gKi9cbiAgd2hlZWw6IHRydWVcbn07XG5sZXQgRXZlbnRTeXN0ZW0gPSBfRXZlbnRTeXN0ZW07XG5cbmV4cG9ydCB7IEV2ZW50U3lzdGVtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudFN5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBFdmVudFN5c3RlbSB9IGZyb20gJy4vRXZlbnRTeXN0ZW0ubWpzJztcbmltcG9ydCB7IEZlZGVyYXRlZEV2ZW50IH0gZnJvbSAnLi9GZWRlcmF0ZWRFdmVudC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNvbnN0IEZlZGVyYXRlZENvbnRhaW5lciA9IHtcbiAgb25jbGljazogbnVsbCxcbiAgb25tb3VzZWRvd246IG51bGwsXG4gIG9ubW91c2VlbnRlcjogbnVsbCxcbiAgb25tb3VzZWxlYXZlOiBudWxsLFxuICBvbm1vdXNlbW92ZTogbnVsbCxcbiAgb25nbG9iYWxtb3VzZW1vdmU6IG51bGwsXG4gIG9ubW91c2VvdXQ6IG51bGwsXG4gIG9ubW91c2VvdmVyOiBudWxsLFxuICBvbm1vdXNldXA6IG51bGwsXG4gIG9ubW91c2V1cG91dHNpZGU6IG51bGwsXG4gIG9ucG9pbnRlcmNhbmNlbDogbnVsbCxcbiAgb25wb2ludGVyZG93bjogbnVsbCxcbiAgb25wb2ludGVyZW50ZXI6IG51bGwsXG4gIG9ucG9pbnRlcmxlYXZlOiBudWxsLFxuICBvbnBvaW50ZXJtb3ZlOiBudWxsLFxuICBvbmdsb2JhbHBvaW50ZXJtb3ZlOiBudWxsLFxuICBvbnBvaW50ZXJvdXQ6IG51bGwsXG4gIG9ucG9pbnRlcm92ZXI6IG51bGwsXG4gIG9ucG9pbnRlcnRhcDogbnVsbCxcbiAgb25wb2ludGVydXA6IG51bGwsXG4gIG9ucG9pbnRlcnVwb3V0c2lkZTogbnVsbCxcbiAgb25yaWdodGNsaWNrOiBudWxsLFxuICBvbnJpZ2h0ZG93bjogbnVsbCxcbiAgb25yaWdodHVwOiBudWxsLFxuICBvbnJpZ2h0dXBvdXRzaWRlOiBudWxsLFxuICBvbnRhcDogbnVsbCxcbiAgb250b3VjaGNhbmNlbDogbnVsbCxcbiAgb250b3VjaGVuZDogbnVsbCxcbiAgb250b3VjaGVuZG91dHNpZGU6IG51bGwsXG4gIG9udG91Y2htb3ZlOiBudWxsLFxuICBvbmdsb2JhbHRvdWNobW92ZTogbnVsbCxcbiAgb250b3VjaHN0YXJ0OiBudWxsLFxuICBvbndoZWVsOiBudWxsLFxuICBnZXQgaW50ZXJhY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnRNb2RlID09PSBcImR5bmFtaWNcIiB8fCB0aGlzLmV2ZW50TW9kZSA9PT0gXCJzdGF0aWNcIjtcbiAgfSxcbiAgc2V0IGludGVyYWN0aXZlKHZhbHVlKSB7XG4gICAgdGhpcy5ldmVudE1vZGUgPSB2YWx1ZSA/IFwic3RhdGljXCIgOiBcInBhc3NpdmVcIjtcbiAgfSxcbiAgX2ludGVybmFsRXZlbnRNb2RlOiB2b2lkIDAsXG4gIGdldCBldmVudE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVybmFsRXZlbnRNb2RlID8/IEV2ZW50U3lzdGVtLmRlZmF1bHRFdmVudE1vZGU7XG4gIH0sXG4gIHNldCBldmVudE1vZGUodmFsdWUpIHtcbiAgICB0aGlzLl9pbnRlcm5hbEV2ZW50TW9kZSA9IHZhbHVlO1xuICB9LFxuICBpc0ludGVyYWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50TW9kZSA9PT0gXCJzdGF0aWNcIiB8fCB0aGlzLmV2ZW50TW9kZSA9PT0gXCJkeW5hbWljXCI7XG4gIH0sXG4gIGludGVyYWN0aXZlQ2hpbGRyZW46IHRydWUsXG4gIGhpdEFyZWE6IG51bGwsXG4gIGFkZEV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjYXB0dXJlID0gdHlwZW9mIG9wdGlvbnMgPT09IFwiYm9vbGVhblwiICYmIG9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5jYXB0dXJlO1xuICAgIGNvbnN0IHNpZ25hbCA9IHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5zaWduYWwgOiB2b2lkIDA7XG4gICAgY29uc3Qgb25jZSA9IHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5vbmNlID09PSB0cnVlIDogZmFsc2U7XG4gICAgY29uc3QgY29udGV4dCA9IHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiID8gdm9pZCAwIDogbGlzdGVuZXI7XG4gICAgdHlwZSA9IGNhcHR1cmUgPyBgJHt0eXBlfWNhcHR1cmVgIDogdHlwZTtcbiAgICBjb25zdCBsaXN0ZW5lckZuID0gdHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIgPyBsaXN0ZW5lciA6IGxpc3RlbmVyLmhhbmRsZUV2ZW50O1xuICAgIGNvbnN0IGVtaXR0ZXIgPSB0aGlzO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIiwgKCkgPT4ge1xuICAgICAgICBlbWl0dGVyLm9mZih0eXBlLCBsaXN0ZW5lckZuLCBjb250ZXh0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAob25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKHR5cGUsIGxpc3RlbmVyRm4sIGNvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbWl0dGVyLm9uKHR5cGUsIGxpc3RlbmVyRm4sIGNvbnRleHQpO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lciwgb3B0aW9ucykge1xuICAgIGNvbnN0IGNhcHR1cmUgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJib29sZWFuXCIgJiYgb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiAmJiBvcHRpb25zLmNhcHR1cmU7XG4gICAgY29uc3QgY29udGV4dCA9IHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiID8gdm9pZCAwIDogbGlzdGVuZXI7XG4gICAgdHlwZSA9IGNhcHR1cmUgPyBgJHt0eXBlfWNhcHR1cmVgIDogdHlwZTtcbiAgICBsaXN0ZW5lciA9IHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiID8gbGlzdGVuZXIgOiBsaXN0ZW5lci5oYW5kbGVFdmVudDtcbiAgICB0aGlzLm9mZih0eXBlLCBsaXN0ZW5lciwgY29udGV4dCk7XG4gIH0sXG4gIGRpc3BhdGNoRXZlbnQoZSkge1xuICAgIGlmICghKGUgaW5zdGFuY2VvZiBGZWRlcmF0ZWRFdmVudCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lciBjYW5ub3QgcHJvcGFnYXRlIGV2ZW50cyBvdXRzaWRlIG9mIHRoZSBGZWRlcmF0ZWQgRXZlbnRzIEFQSVwiKTtcbiAgICB9XG4gICAgZS5kZWZhdWx0UHJldmVudGVkID0gZmFsc2U7XG4gICAgZS5wYXRoID0gbnVsbDtcbiAgICBlLnRhcmdldCA9IHRoaXM7XG4gICAgZS5tYW5hZ2VyLmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgcmV0dXJuICFlLmRlZmF1bHRQcmV2ZW50ZWQ7XG4gIH1cbn07XG5cbmV4cG9ydCB7IEZlZGVyYXRlZENvbnRhaW5lciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmVkZXJhdGVkRXZlbnRUYXJnZXQubWpzLm1hcFxuIiwiaW1wb3J0IHsgZXh0ZW5zaW9ucyB9IGZyb20gJy4uL2V4dGVuc2lvbnMvRXh0ZW5zaW9ucy5tanMnO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSAnLi4vc2NlbmUvY29udGFpbmVyL0NvbnRhaW5lci5tanMnO1xuaW1wb3J0IHsgRXZlbnRTeXN0ZW0gfSBmcm9tICcuL0V2ZW50U3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRDb250YWluZXIgfSBmcm9tICcuL0ZlZGVyYXRlZEV2ZW50VGFyZ2V0Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuZXh0ZW5zaW9ucy5hZGQoRXZlbnRTeXN0ZW0pO1xuZXh0ZW5zaW9ucy5taXhpbihDb250YWluZXIsIEZlZGVyYXRlZENvbnRhaW5lcik7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0Lm1qcy5tYXBcbiIsImltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IENhbnZhc09ic2VydmVyIH0gZnJvbSAnLi9DYW52YXNPYnNlcnZlci5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIERPTVBpcGUge1xuICAvKipcbiAgICogQ29uc3RydWN0b3IgZm9yIHRoZSBET01QaXBlIGNsYXNzLlxuICAgKiBAcGFyYW0gcmVuZGVyZXIgLSBUaGUgcmVuZGVyZXIgaW5zdGFuY2UgdGhhdCB0aGlzIERPTVBpcGUgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGguXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIC8qKiBBcnJheSB0byBrZWVwIHRyYWNrIG9mIGF0dGFjaGVkIERPTSBlbGVtZW50cyAqL1xuICAgIHRoaXMuX2F0dGFjaGVkRG9tRWxlbWVudHMgPSBbXTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX3JlbmRlcmVyLnJ1bm5lcnMucG9zdHJlbmRlci5hZGQodGhpcyk7XG4gICAgdGhpcy5fcmVuZGVyZXIucnVubmVycy5pbml0LmFkZCh0aGlzKTtcbiAgICB0aGlzLl9kb21FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICB0aGlzLl9kb21FbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIHRoaXMuX2RvbUVsZW1lbnQuc3R5bGUudG9wID0gXCIwXCI7XG4gICAgdGhpcy5fZG9tRWxlbWVudC5zdHlsZS5sZWZ0ID0gXCIwXCI7XG4gICAgdGhpcy5fZG9tRWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgdGhpcy5fZG9tRWxlbWVudC5zdHlsZS56SW5kZXggPSBcIjEwMDBcIjtcbiAgfVxuICAvKiogSW5pdGlhbGl6ZXMgdGhlIERPTVBpcGUsIHNldHRpbmcgdXAgdGhlIG1haW4gRE9NIGVsZW1lbnQgYW5kIGFkZGluZyBpdCB0byB0aGUgZG9jdW1lbnQgYm9keS4gKi9cbiAgaW5pdCgpIHtcbiAgICB0aGlzLl9jYW52YXNPYnNlcnZlciA9IG5ldyBDYW52YXNPYnNlcnZlcih7XG4gICAgICBkb21FbGVtZW50OiB0aGlzLl9kb21FbGVtZW50LFxuICAgICAgcmVuZGVyZXI6IHRoaXMuX3JlbmRlcmVyXG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSByZW5kZXJhYmxlIERPTSBjb250YWluZXIgdG8gdGhlIGxpc3Qgb2YgYXR0YWNoZWQgZWxlbWVudHMuXG4gICAqIEBwYXJhbSBkb21Db250YWluZXIgLSBUaGUgRE9NIGNvbnRhaW5lciB0byBiZSBhZGRlZC5cbiAgICogQHBhcmFtIF9pbnN0cnVjdGlvblNldCAtIFRoZSBpbnN0cnVjdGlvbiBzZXQgKHVudXNlZCkuXG4gICAqL1xuICBhZGRSZW5kZXJhYmxlKGRvbUNvbnRhaW5lciwgX2luc3RydWN0aW9uU2V0KSB7XG4gICAgaWYgKCF0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzLmluY2x1ZGVzKGRvbUNvbnRhaW5lcikpIHtcbiAgICAgIHRoaXMuX2F0dGFjaGVkRG9tRWxlbWVudHMucHVzaChkb21Db250YWluZXIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyBhIHJlbmRlcmFibGUgRE9NIGNvbnRhaW5lci5cbiAgICogQHBhcmFtIF9kb21Db250YWluZXIgLSBUaGUgRE9NIGNvbnRhaW5lciB0byBiZSB1cGRhdGVkICh1bnVzZWQpLlxuICAgKi9cbiAgdXBkYXRlUmVuZGVyYWJsZShfZG9tQ29udGFpbmVyKSB7XG4gIH1cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyBhIHJlbmRlcmFibGUgRE9NIGNvbnRhaW5lci5cbiAgICogQHBhcmFtIF9kb21Db250YWluZXIgLSBUaGUgRE9NIGNvbnRhaW5lciB0byBiZSB2YWxpZGF0ZWQgKHVudXNlZCkuXG4gICAqIEByZXR1cm5zIEFsd2F5cyByZXR1cm5zIHRydWUgYXMgdmFsaWRhdGlvbiBpcyBub3QgcmVxdWlyZWQuXG4gICAqL1xuICB2YWxpZGF0ZVJlbmRlcmFibGUoX2RvbUNvbnRhaW5lcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKiBIYW5kbGVzIHRoZSBwb3N0LXJlbmRlcmluZyBwcm9jZXNzLCBlbnN1cmluZyBET00gZWxlbWVudHMgYXJlIGNvcnJlY3RseSBwb3NpdGlvbmVkIGFuZCB2aXNpYmxlLiAqL1xuICBwb3N0cmVuZGVyKCkge1xuICAgIGNvbnN0IGF0dGFjaGVkRG9tRWxlbWVudHMgPSB0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzO1xuICAgIGlmIChhdHRhY2hlZERvbUVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5fZG9tRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fY2FudmFzT2JzZXJ2ZXIuZW5zdXJlQXR0YWNoZWQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dGFjaGVkRG9tRWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRvbUNvbnRhaW5lciA9IGF0dGFjaGVkRG9tRWxlbWVudHNbaV07XG4gICAgICBjb25zdCBlbGVtZW50ID0gZG9tQ29udGFpbmVyLmVsZW1lbnQ7XG4gICAgICBpZiAoIWRvbUNvbnRhaW5lci5wYXJlbnQgfHwgZG9tQ29udGFpbmVyLmdsb2JhbERpc3BsYXlTdGF0dXMgPCA3KSB7XG4gICAgICAgIGVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgICAgICBhdHRhY2hlZERvbUVsZW1lbnRzLnNwbGljZShpLCAxKTtcbiAgICAgICAgaS0tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLl9kb21FbGVtZW50LmNvbnRhaW5zKGVsZW1lbnQpKSB7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcImF1dG9cIjtcbiAgICAgICAgICB0aGlzLl9kb21FbGVtZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHd0ID0gZG9tQ29udGFpbmVyLndvcmxkVHJhbnNmb3JtO1xuICAgICAgICBjb25zdCBhbmNob3IgPSBkb21Db250YWluZXIuX2FuY2hvcjtcbiAgICAgICAgY29uc3QgYXggPSBkb21Db250YWluZXIud2lkdGggKiBhbmNob3IueDtcbiAgICAgICAgY29uc3QgYXkgPSBkb21Db250YWluZXIuaGVpZ2h0ICogYW5jaG9yLnk7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtT3JpZ2luID0gYCR7YXh9cHggJHtheX1weGA7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gYG1hdHJpeCgke3d0LmF9LCAke3d0LmJ9LCAke3d0LmN9LCAke3d0LmR9LCAke3d0LnR4IC0gYXh9LCAke3d0LnR5IC0gYXl9KWA7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUub3BhY2l0eSA9IGRvbUNvbnRhaW5lci5ncm91cEFscGhhLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKiBEZXN0cm95cyB0aGUgRE9NUGlwZSwgcmVtb3ZpbmcgYWxsIGF0dGFjaGVkIERPTSBlbGVtZW50cyBhbmQgY2xlYW5pbmcgdXAgcmVzb3VyY2VzLiAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuX3JlbmRlcmVyLnJ1bm5lcnMucG9zdHJlbmRlci5yZW1vdmUodGhpcyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkb21Db250YWluZXIgPSB0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzW2ldO1xuICAgICAgZG9tQ29udGFpbmVyLmVsZW1lbnQ/LnJlbW92ZSgpO1xuICAgIH1cbiAgICB0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5fZG9tRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYW52YXNPYnNlcnZlci5kZXN0cm95KCk7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBudWxsO1xuICB9XG59XG4vKipcbiAqIFN0YXRpYyBwcm9wZXJ0eSBkZWZpbmluZyB0aGUgZXh0ZW5zaW9uIHR5cGUgYW5kIG5hbWUgZm9yIHRoZSBET01QaXBlLlxuICogVGhpcyBpcyB1c2VkIHRvIHJlZ2lzdGVyIHRoZSBET01QaXBlIHdpdGggZGlmZmVyZW50IHJlbmRlcmluZyBwaXBlbGluZXMuXG4gKi9cbkRPTVBpcGUuZXh0ZW5zaW9uID0ge1xuICB0eXBlOiBbXG4gICAgRXh0ZW5zaW9uVHlwZS5XZWJHTFBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVUGlwZXMsXG4gICAgRXh0ZW5zaW9uVHlwZS5DYW52YXNQaXBlc1xuICBdLFxuICBuYW1lOiBcImRvbVwiXG59O1xuXG5leHBvcnQgeyBET01QaXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ET01QaXBlLm1qcy5tYXBcbiIsImltcG9ydCB7IGV4dGVuc2lvbnMgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IERPTVBpcGUgfSBmcm9tICcuL0RPTVBpcGUubWpzJztcbmltcG9ydCAnLi9pbmRleC5tanMnO1xuZXhwb3J0IHsgQ2FudmFzT2JzZXJ2ZXIgfSBmcm9tICcuL0NhbnZhc09ic2VydmVyLm1qcyc7XG5leHBvcnQgeyBET01Db250YWluZXIgfSBmcm9tICcuL0RPTUNvbnRhaW5lci5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmV4dGVuc2lvbnMuYWRkKERPTVBpcGUpO1xuXG5leHBvcnQgeyBET01QaXBlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0Lm1qcy5tYXBcbiJdLCJuYW1lcyI6WyJDYW52YXNPYnNlcnZlciIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJfbGFzdFRyYW5zZm9ybSIsIl9vYnNlcnZlciIsIl90aWNrZXJBdHRhY2hlZCIsInVwZGF0ZVRyYW5zbGF0aW9uIiwiX2NhbnZhcyIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJjb250ZW50V2lkdGgiLCJ3aWR0aCIsImNvbnRlbnRIZWlnaHQiLCJoZWlnaHQiLCJzeCIsIl9yZW5kZXJlciIsInJlc29sdXRpb24iLCJzeSIsIm5ld1RyYW5zZm9ybSIsImxlZnQiLCJ0b3AiLCJfZG9tRWxlbWVudCIsInN0eWxlIiwidHJhbnNmb3JtIiwiZG9tRWxlbWVudCIsInJlbmRlcmVyIiwiZ2xvYmFsVGhpcyIsIk9mZnNjcmVlbkNhbnZhcyIsImNhbnZhcyIsIl9hdHRhY2hPYnNlcnZlciIsImVuc3VyZUF0dGFjaGVkIiwicGFyZW50Tm9kZSIsImFwcGVuZENoaWxkIiwiZGlzY29ubmVjdCIsIlJlc2l6ZU9ic2VydmVyIiwiZW50cmllcyIsImVudHJ5IiwidGFyZ2V0IiwiY29udGVudFJlY3QiLCJfbGFzdFNjYWxlWCIsIl9sYXN0U2NhbGVZIiwib2JzZXJ2ZSIsIlRpY2tlciIsInNoYXJlZCIsImFkZCIsIkhJR0giLCJkZXN0cm95IiwicmVtb3ZlIiwiRmVkZXJhdGVkRXZlbnQiLCJtYW5hZ2VyIiwiYnViYmxlcyIsImNhbmNlbEJ1YmJsZSIsImNhbmNlbGFibGUiLCJjb21wb3NlZCIsImRlZmF1bHRQcmV2ZW50ZWQiLCJldmVudFBoYXNlIiwicHJvdG90eXBlIiwiTk9ORSIsInByb3BhZ2F0aW9uU3RvcHBlZCIsInByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkIiwibGF5ZXIiLCJQb2ludCIsInBhZ2UiLCJDQVBUVVJJTkdfUEhBU0UiLCJBVF9UQVJHRVQiLCJCVUJCTElOR19QSEFTRSIsImxheWVyWCIsIngiLCJsYXllclkiLCJ5IiwicGFnZVgiLCJwYWdlWSIsImRhdGEiLCJjb21wb3NlZFBhdGgiLCJwYXRoIiwibGVuZ3RoIiwicHJvcGFnYXRpb25QYXRoIiwiaW5pdEV2ZW50IiwiX3R5cGUiLCJfYnViYmxlcyIsIl9jYW5jZWxhYmxlIiwiRXJyb3IiLCJpbml0VUlFdmVudCIsIl90eXBlQXJnIiwiX2J1YmJsZXNBcmciLCJfY2FuY2VsYWJsZUFyZyIsIl92aWV3QXJnIiwiX2RldGFpbEFyZyIsInByZXZlbnREZWZhdWx0IiwibmF0aXZlRXZlbnQiLCJFdmVudCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInN0b3BQcm9wYWdhdGlvbiIsImFwcGxlSXBob25lIiwiYXBwbGVJcG9kIiwiYXBwbGVUYWJsZXQiLCJhcHBsZVVuaXZlcnNhbCIsImFuZHJvaWRQaG9uZSIsImFuZHJvaWRUYWJsZXQiLCJhbWF6b25QaG9uZSIsImFtYXpvblRhYmxldCIsIndpbmRvd3NQaG9uZSIsIndpbmRvd3NUYWJsZXQiLCJvdGhlckJsYWNrQmVycnkiLCJvdGhlckJsYWNrQmVycnkxMCIsIm90aGVyT3BlcmEiLCJvdGhlckNocm9tZSIsIm90aGVyRmlyZWZveCIsImlzQXBwbGVUYWJsZXRPbklvczEzIiwibmF2aWdhdG9yIiwicGxhdGZvcm0iLCJtYXhUb3VjaFBvaW50cyIsIk1TU3RyZWFtIiwiaXNNb2JpbGUiLCJwYXJhbSIsIm5hdiIsInVzZXJBZ2VudCIsInRtcCIsInNwbGl0IiwibWF0Y2giLCJyZWdleCIsInRlc3QiLCJjcmVhdGVNYXRjaCIsInJlc3VsdCIsImFwcGxlIiwicGhvbmUiLCJpcG9kIiwidGFibGV0IiwidW5pdmVyc2FsIiwiZGV2aWNlIiwiYW1hem9uIiwiYW5kcm9pZCIsIndpbmRvd3MiLCJvdGhlciIsImJsYWNrYmVycnkiLCJibGFja2JlcnJ5MTAiLCJvcGVyYSIsImZpcmVmb3giLCJjaHJvbWUiLCJhbnkiLCJfQWNjZXNzaWJpbGl0eVN5c3RlbSIsIl9tb2JpbGVJbmZvIiwiZGVidWciLCJfYWN0aXZhdGVPblRhYiIsIl9kZWFjdGl2YXRlT25Nb3VzZU1vdmUiLCJfaXNBY3RpdmUiLCJfaXNNb2JpbGVBY2Nlc3NpYmlsaXR5IiwiX2RpdiIsIl9wb29sIiwiX3JlbmRlcklkIiwiX2NoaWxkcmVuIiwiX2FuZHJvaWRVcGRhdGVDb3VudCIsIl9hbmRyb2lkVXBkYXRlRnJlcXVlbmN5IiwiX2hvb2tEaXYiLCJfY3JlYXRlVG91Y2hIb29rIiwiaXNBY3RpdmUiLCJpc01vYmlsZUFjY2Vzc2liaWxpdHkiLCJob29rRGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicG9zaXRpb24iLCJ6SW5kZXgiLCJ0b1N0cmluZyIsImJhY2tncm91bmRDb2xvciIsInRpdGxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9hY3RpdmF0ZSIsIl9kZXN0cm95VG91Y2hIb29rIiwiYm9keSIsInJlbW92ZUNoaWxkIiwicG9pbnRlckV2ZW50cyIsIl9jYW52YXNPYnNlcnZlciIsIl9vbktleURvd24iLCJiaW5kIiwiX29uTW91c2VNb3ZlIiwidmlldyIsIl9pbml0QWNjZXNzaWJpbGl0eVNldHVwIiwib2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsInJ1bm5lcnMiLCJwb3N0cmVuZGVyIiwibGFzdE9iamVjdFJlbmRlcmVkIiwiX3VwZGF0ZUFjY2Vzc2libGVPYmplY3RzIiwiX2RlYWN0aXZhdGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2hpbGQiLCJfYWNjZXNzaWJsZURpdiIsIl9hY2Nlc3NpYmxlQWN0aXZlIiwiZm9yRWFjaCIsImRpdiIsImNvbnRhaW5lciIsInZpc2libGUiLCJhY2Nlc3NpYmxlQ2hpbGRyZW4iLCJhY2Nlc3NpYmxlIiwiX2FkZENoaWxkIiwiY2hpbGRyZW4iLCJpIiwiaW5pdCIsIm1lcmdlZE9wdGlvbnMiLCJhY2Nlc3NpYmlsaXR5T3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiYWN0aXZhdGVPblRhYiIsImRlYWN0aXZhdGVPbk1vdXNlTW92ZSIsImVuYWJsZWRCeURlZmF1bHQiLCJub3ciLCJwZXJmb3JtYW5jZSIsInJlbmRlcmluZ1RvU2NyZWVuIiwiYWN0aXZlSWRzIiwiU2V0IiwiaW5kZXhPZiIsImhhcyIsInB1c2giLCJyZW1vdmVJdGVtcyIsImhpdEFyZWEiLCJnZXRCb3VuZHMiLCJyZWN0YW5nbGUiLCJ3dCIsIndvcmxkVHJhbnNmb3JtIiwidHgiLCJhIiwidHkiLCJkIiwiX2NhcEhpdEFyZWEiLCJfdXBkYXRlRGVidWdIVE1MIiwiaW5uZXJIVE1MIiwidHlwZSIsInRhYkluZGV4Iiwidmlld1dpZHRoIiwidmlld0hlaWdodCIsInBvcCIsImFjY2Vzc2libGVUeXBlIiwiY3NzVGV4dCIsImFjY2Vzc2libGVUZXh0IiwiaW5uZXJUZXh0IiwiYm9yZGVyU3R5bGUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwic2V0QXR0cmlidXRlIiwiX29uQ2xpY2siLCJfb25Gb2N1cyIsIl9vbkZvY3VzT3V0IiwiYWNjZXNzaWJsZVBvaW50ZXJFdmVudHMiLCJhY2Nlc3NpYmxlVGl0bGUiLCJhY2Nlc3NpYmxlSGludCIsImludGVyYWN0aXZlIiwiX2Rpc3BhdGNoRXZlbnQiLCJlIiwiYm91bmRhcnkiLCJldmVudHMiLCJyb290Qm91bmRhcnkiLCJldmVudCIsIk9iamVjdCIsImFzc2lnbiIsInJvb3RUYXJnZXQiLCJ0eXBlMiIsImRpc3BhdGNoRXZlbnQiLCJnZXRBdHRyaWJ1dGUiLCJrZXlDb2RlIiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwic2V0QWNjZXNzaWJpbGl0eUVuYWJsZWQiLCJlbmFibGVkIiwiZXh0ZW5zaW9uIiwiV2ViR0xTeXN0ZW0iLCJXZWJHUFVTeXN0ZW0iLCJuYW1lIiwiQWNjZXNzaWJpbGl0eVN5c3RlbSIsIm1peGluIiwiQ29udGFpbmVyIiwiRXZlbnRzVGlja2VyIiwiaW50ZXJhY3Rpb25GcmVxdWVuY3kiLCJfZGVsdGFUaW1lIiwiX2RpZE1vdmUiLCJfdGlja2VyQWRkZWQiLCJfcGF1c2VVcGRhdGUiLCJyZW1vdmVUaWNrZXJMaXN0ZW5lciIsInBhdXNlVXBkYXRlIiwicGF1c2VkIiwiYWRkVGlja2VyTGlzdGVuZXIiLCJzeXN0ZW0iLCJfdGlja2VyVXBkYXRlIiwiSU5URVJBQ1RJT04iLCJwb2ludGVyTW92ZWQiLCJfdXBkYXRlIiwicm9vdFBvaW50ZXJFdmVudCIsInN1cHBvcnRzVG91Y2hFdmVudHMiLCJwb2ludGVyVHlwZSIsInN1cHBvcnRzUG9pbnRlckV2ZW50cyIsIlBvaW50ZXJFdmVudCIsImNsaWVudFgiLCJjbGllbnRZIiwicG9pbnRlcklkIiwiTW91c2VFdmVudCIsInRpY2tlciIsImRlbHRhVGltZSIsIkZlZGVyYXRlZE1vdXNlRXZlbnQiLCJzdXBlciIsImFyZ3VtZW50cyIsImNsaWVudCIsIm1vdmVtZW50Iiwib2Zmc2V0IiwiZ2xvYmFsIiwic2NyZWVuIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJnbG9iYWxYIiwiZ2xvYmFsWSIsInNjcmVlblgiLCJzY3JlZW5ZIiwiZ2V0TG9jYWxQb3NpdGlvbiIsInBvaW50IiwiZ2xvYmFsUG9zIiwiYXBwbHlJbnZlcnNlIiwiZ2V0TW9kaWZpZXJTdGF0ZSIsImtleSIsImluaXRNb3VzZUV2ZW50IiwiX2NhbkJ1YmJsZUFyZyIsIl9zY3JlZW5YQXJnIiwiX3NjcmVlbllBcmciLCJfY2xpZW50WEFyZyIsIl9jbGllbnRZQXJnIiwiX2N0cmxLZXlBcmciLCJfYWx0S2V5QXJnIiwiX3NoaWZ0S2V5QXJnIiwiX21ldGFLZXlBcmciLCJfYnV0dG9uQXJnIiwiX3JlbGF0ZWRUYXJnZXRBcmciLCJGZWRlcmF0ZWRQb2ludGVyRXZlbnQiLCJpc1ByaW1hcnkiLCJnZXRDb2FsZXNjZWRFdmVudHMiLCJnZXRQcmVkaWN0ZWRFdmVudHMiLCJGZWRlcmF0ZWRXaGVlbEV2ZW50IiwiRE9NX0RFTFRBX1BJWEVMIiwiRE9NX0RFTFRBX0xJTkUiLCJET01fREVMVEFfUEFHRSIsInRlbXBIaXRMb2NhdGlvbiIsInRlbXBMb2NhbE1hcHBpbmciLCJFdmVudEJvdW5kYXJ5IiwiZGlzcGF0Y2giLCJtb3ZlT25BbGwiLCJlbmFibGVHbG9iYWxNb3ZlRXZlbnRzIiwibWFwcGluZ1N0YXRlIiwidHJhY2tpbmdEYXRhIiwiZXZlbnRQb29sIiwiTWFwIiwiX2FsbEludGVyYWN0aXZlRWxlbWVudHMiLCJfaGl0RWxlbWVudHMiLCJfaXNQb2ludGVyTW92ZUV2ZW50IiwiaGl0UHJ1bmVGbiIsImhpdFRlc3RGbiIsIm1hcFBvaW50ZXJEb3duIiwibWFwUG9pbnRlck1vdmUiLCJtYXBQb2ludGVyT3V0IiwibWFwUG9pbnRlck92ZXIiLCJtYXBQb2ludGVyVXAiLCJtYXBQb2ludGVyVXBPdXRzaWRlIiwibWFwV2hlZWwiLCJtYXBwaW5nVGFibGUiLCJhZGRFdmVudE1hcHBpbmciLCJmbiIsInByaW9yaXR5Iiwic29ydCIsImIiLCJwcm9wYWdhdGUiLCJlbWl0IiwibWFwRXZlbnQiLCJtYXBwZXJzIiwiaiIsIndhcm4iLCJoaXRUZXN0IiwiaW52ZXJ0ZWRQYXRoIiwiZXZlbnRNb2RlIiwic2V0IiwiY3VycmVudFRhcmdldCIsIm5vdGlmeVRhcmdldCIsImFsbCIsInRhcmdldHMiLCJBcnJheSIsImlzQXJyYXkiLCJwYXJlbnQiLCJyZXZlcnNlIiwiaGl0VGVzdE1vdmVSZWN1cnNpdmUiLCJsb2NhdGlvbiIsInRlc3RGbiIsInBydW5lRm4iLCJpZ25vcmUiLCJzaG91bGRSZXR1cm4iLCJfaW50ZXJhY3RpdmVQcnVuZSIsImludGVyYWN0aXZlQ2hpbGRyZW4iLCJuZXN0ZWRIaXQiLCJfaXNJbnRlcmFjdGl2ZSIsImlzSW50ZXJhY3RpdmUiLCJpc0ludGVyYWN0aXZlTW9kZSIsImlzSW50ZXJhY3RpdmVUYXJnZXQiLCJoaXRUZXN0UmVjdXJzaXZlIiwicmVsYXRpdmVMb2NhdGlvbiIsImludCIsInJlbmRlcmFibGUiLCJtZWFzdXJhYmxlIiwiY29udGFpbnMiLCJlZmZlY3RzIiwiZWZmZWN0IiwiY29udGFpbnNQb2ludCIsImhhbmRsZXJLZXkiLCJfbm90aWZ5TGlzdGVuZXJzIiwiZnJvbSIsImNyZWF0ZVBvaW50ZXJFdmVudCIsImlzUmlnaHRCdXR0b24iLCJidXR0b24iLCJwcmVzc1RhcmdldHNCeUJ1dHRvbiIsImZyZWVFdmVudCIsImlzTW91c2UiLCJvdXRUYXJnZXQiLCJmaW5kTW91bnRlZFRhcmdldCIsIm92ZXJUYXJnZXRzIiwib3V0VHlwZSIsIm91dEV2ZW50IiwibGVhdmVFdmVudCIsIm92ZXJUeXBlIiwib3ZlckV2ZW50IiwiY2xvbmVQb2ludGVyRXZlbnQiLCJvdmVyVGFyZ2V0QW5jZXN0b3IiLCJlbnRlckV2ZW50IiwiYWxsTWV0aG9kcyIsImFsbG93R2xvYmFsUG9pbnRlckV2ZW50cyIsInNwbGljZSIsImN1cnNvciIsInByZXNzVGFyZ2V0IiwiY2xpY2tUYXJnZXQiLCJjbGlja0V2ZW50IiwiY2xpY2tzQnlCdXR0b24iLCJjbGlja0NvdW50IiwidGltZVN0YW1wIiwiY2xpY2tIaXN0b3J5IiwiZGV0YWlsIiwid2hlZWxFdmVudCIsImNyZWF0ZVdoZWVsRXZlbnQiLCJhbGxvY2F0ZUV2ZW50IiwiY29weVBvaW50ZXJEYXRhIiwiY29weU1vdXNlRGF0YSIsImNvcHlEYXRhIiwib3JpZ2luYWxFdmVudCIsImNvcHlXaGVlbERhdGEiLCJzbGljZSIsInRvIiwiZGVsdGFNb2RlIiwiZGVsdGFYIiwiZGVsdGFZIiwiZGVsdGFaIiwicHJlc3N1cmUiLCJ0YW5nZW50aWFsUHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwidHdpc3QiLCJhbHRLZXkiLCJidXR0b25zIiwiY29weUZyb20iLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5IiwiaXNUcnVzdGVkIiwic3JjRWxlbWVudCIsIndoaWNoIiwiaWQiLCJvdmVyVGFyZ2V0IiwiZ2V0IiwibGlzdGVuZXJzIiwiX2V2ZW50cyIsIm9uY2UiLCJyZW1vdmVMaXN0ZW5lciIsImNhbGwiLCJjb250ZXh0IiwiVE9VQ0hfVE9fUE9JTlRFUiIsInRvdWNoc3RhcnQiLCJ0b3VjaGVuZCIsInRvdWNoZW5kb3V0c2lkZSIsInRvdWNobW92ZSIsInRvdWNoY2FuY2VsIiwiX0V2ZW50U3lzdGVtIiwiYXV0b1ByZXZlbnREZWZhdWx0IiwiX2V2ZW50c0FkZGVkIiwiX3Jvb3RQb2ludGVyRXZlbnQiLCJfcm9vdFdoZWVsRXZlbnQiLCJjdXJzb3JTdHlsZXMiLCJkZWZhdWx0IiwicG9pbnRlciIsImZlYXR1cmVzIiwiUHJveHkiLCJkZWZhdWx0RXZlbnRGZWF0dXJlcyIsInZhbHVlIiwiX29uUG9pbnRlckRvd24iLCJfb25Qb2ludGVyTW92ZSIsIl9vblBvaW50ZXJVcCIsIl9vblBvaW50ZXJPdmVyT3V0Iiwib25XaGVlbCIsImRlZmF1bHRFdmVudE1vZGUiLCJfZGVmYXVsdEV2ZW50TW9kZSIsInNldFRhcmdldEVsZW1lbnQiLCJldmVudEZlYXR1cmVzIiwiZ2xvYmFsTW92ZSIsInJlc29sdXRpb25DaGFuZ2UiLCJfY3VycmVudEN1cnNvciIsInNldEN1cnNvciIsIm1vZGUiLCJhcHBseVN0eWxlcyIsImhhc093blByb3BlcnR5IiwiY2xpY2siLCJfbm9ybWFsaXplVG9Qb2ludGVyRGF0YSIsImlzTm9ybWFsaXplZCIsIm5hdGl2ZUV2ZW50MiIsImZlZGVyYXRlZEV2ZW50IiwiX2Jvb3RzdHJhcEV2ZW50IiwibW92ZSIsIm5vcm1hbGl6ZWRFdmVudHMiLCJvdXRzaWRlIiwid2hlZWwiLCJub3JtYWxpemVXaGVlbEV2ZW50IiwiZWxlbWVudCIsIl9yZW1vdmVFdmVudHMiLCJfYWRkRXZlbnRzIiwibXNQb2ludGVyRW5hYmxlZCIsIm1zQ29udGVudFpvb21pbmciLCJtc1RvdWNoQWN0aW9uIiwidG91Y2hBY3Rpb24iLCJwYXNzaXZlIiwiY2FwdHVyZSIsIm1hcFBvc2l0aW9uVG9Qb2ludCIsImlzQ29ubmVjdGVkIiwicmVzb2x1dGlvbk11bHRpcGxpZXIiLCJUb3VjaEV2ZW50IiwibGkiLCJjaGFuZ2VkVG91Y2hlcyIsInRvdWNoIiwidG91Y2hlcyIsInJhZGl1c1giLCJyYWRpdXNZIiwiaWRlbnRpZmllciIsImZvcmNlIiwidGVtcEV2ZW50IiwiX3RyYW5zZmVyTW91c2VEYXRhIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJyZWxhdGVkVGFyZ2V0IiwiQ2FudmFzU3lzdGVtIiwiRXZlbnRTeXN0ZW0iLCJGZWRlcmF0ZWRDb250YWluZXIiLCJvbmNsaWNrIiwib25tb3VzZWRvd24iLCJvbm1vdXNlZW50ZXIiLCJvbm1vdXNlbGVhdmUiLCJvbm1vdXNlbW92ZSIsIm9uZ2xvYmFsbW91c2Vtb3ZlIiwib25tb3VzZW91dCIsIm9ubW91c2VvdmVyIiwib25tb3VzZXVwIiwib25tb3VzZXVwb3V0c2lkZSIsIm9ucG9pbnRlcmNhbmNlbCIsIm9ucG9pbnRlcmRvd24iLCJvbnBvaW50ZXJlbnRlciIsIm9ucG9pbnRlcmxlYXZlIiwib25wb2ludGVybW92ZSIsIm9uZ2xvYmFscG9pbnRlcm1vdmUiLCJvbnBvaW50ZXJvdXQiLCJvbnBvaW50ZXJvdmVyIiwib25wb2ludGVydGFwIiwib25wb2ludGVydXAiLCJvbnBvaW50ZXJ1cG91dHNpZGUiLCJvbnJpZ2h0Y2xpY2siLCJvbnJpZ2h0ZG93biIsIm9ucmlnaHR1cCIsIm9ucmlnaHR1cG91dHNpZGUiLCJvbnRhcCIsIm9udG91Y2hjYW5jZWwiLCJvbnRvdWNoZW5kIiwib250b3VjaGVuZG91dHNpZGUiLCJvbnRvdWNobW92ZSIsIm9uZ2xvYmFsdG91Y2htb3ZlIiwib250b3VjaHN0YXJ0Iiwib253aGVlbCIsIl9pbnRlcm5hbEV2ZW50TW9kZSIsImxpc3RlbmVyIiwic2lnbmFsIiwibGlzdGVuZXJGbiIsImhhbmRsZUV2ZW50IiwiZW1pdHRlciIsIm9mZiIsIm9uIiwiRE9NUGlwZSIsIl9hdHRhY2hlZERvbUVsZW1lbnRzIiwiYWRkUmVuZGVyYWJsZSIsImRvbUNvbnRhaW5lciIsIl9pbnN0cnVjdGlvblNldCIsInVwZGF0ZVJlbmRlcmFibGUiLCJfZG9tQ29udGFpbmVyIiwidmFsaWRhdGVSZW5kZXJhYmxlIiwiYXR0YWNoZWREb21FbGVtZW50cyIsImdsb2JhbERpc3BsYXlTdGF0dXMiLCJhbmNob3IiLCJfYW5jaG9yIiwiYXgiLCJheSIsInRyYW5zZm9ybU9yaWdpbiIsImMiLCJvcGFjaXR5IiwiZ3JvdXBBbHBoYSIsIldlYkdMUGlwZXMiLCJXZWJHUFVQaXBlcyIsIkNhbnZhc1BpcGVzIl0sInNvdXJjZVJvb3QiOiIifQ==